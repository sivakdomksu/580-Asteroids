!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o,r,s=n(1),u=800,h=600;!function(t){t[t.OUT_OF_BOUNDS=0]="OUT_OF_BOUNDS",t[t.LIVES=1]="LIVES"}(o||(o={})),function(t){t[t.HIT=0]="HIT",t[t.DESTROYED=1]="DESTROYED"}(r||(r={}));var c=function(){function t(t,e,n,i){this.minX=t,this.minY=e,this.maxX=n,this.maxY=i}return t.prototype.isInBounds=function(t,e,n){return t>=this.minX&&e>=this.minY&&t+n.getWidth()<=this.maxX&&e+n.getHeight()<=this.maxY},t}(),a=function(){return function(t,e){this.color=t,this.mass=e}}(),f=function(t){function e(e,n,i,o){var r=t.call(this,i,o)||this;return r.width=e,r.height=n,r}return i(e,t),e.prototype.isInBounds=function(t,e,n){},e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e}(a),p=(function(t){function e(e,n,i){var o=t.call(this,n,i)||this;return o.radius=e,o}i(e,t),e.prototype.isInBounds=function(t,e,n){},e.prototype.getHeight=function(){return 2*this.radius},e.prototype.getWidth=function(){return 2*this.radius}}(a),function(){return function(t,e,n){this.shape=t,this.boundary=e,this.move=n}}()),d=function(t){function e(e,n,i,o,r,s,u){var h=t.call(this,i,o,r)||this;return h.lives=e,h.shotFreq=n,h.shot=s,h.bounties=u,h}return i(e,t),e}(p),l=function(t){function e(e,n,i,o){var r=t.call(this,n,i,o)||this;return r.dmg=e,r}return i(e,t),e}(p),y=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return i(e,t),e}(p),v=function(){function t(){}return t.prototype.move=function(t,e,n,i){throw void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=null),new Error("Not Implemented!")},t}(),g=function(t){function e(e){var n=t.call(this)||this;return n.vector=e,n}return i(e,t),e.prototype.move=function(t,e,n,i){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=null),s.default.from(this.vector.x*t,this.vector.y*t)},e.prototype.copy=function(){return new e(s.default.fromOther(this.vector))},e.prototype.setRotation=function(t){return this.vector.rotate(t),this},e}(v),m=function(t){function e(e){var n=t.call(this)||this;return n.decSpeed=e,n}return i(e,t),e.prototype.move=function(t,e,n){return null},e.prototype.copy=function(){return new e(this.decSpeed)},e.prototype.setRotation=function(t){},e}(v),w={PLAYER:new f(20,35,"#6a7fed",0),ENEMY:new f(45,50,"#ff0000",0),SHOT:new f(5,5,"#ffffff",0),HEALTH_ENEMY:new f(45,50,"#91ff6f",0),BIG_ONE:new f(60,60,"#ffbb00",0),FAST_ONE:new f(40,40,"#f5a3ff",0),CLOUD:new f(150,150,"#0a1e3a",0)},O={NONE:new c(Number.MIN_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),SHOT:new c(0,0,u,h),CLOUD:new c(-w.CLOUD.width,-w.CLOUD.height,u+w.CLOUD.width,h+w.CLOUD.height)},E={PLAYER:new m(.08),ENEMY_SIMPLE:new g(s.default.from(0,.1)),PLAYER_SHOT:new g(s.default.from(0,-.5)),ENEMY_SHOT:new g(s.default.from(0,.4)),CLOUD:new g(s.default.from(0,.05))},x={PLAYER:new l(1,w.SHOT,O.SHOT,E.PLAYER_SHOT),ENEMY:new l(1,w.SHOT,O.SHOT,E.ENEMY_SHOT)},_={PLAYER:new d(3,0,w.PLAYER,O.NONE,E.PLAYER,x.PLAYER,[])},L={CLOUD:new y(w.CLOUD,O.CLOUD,E.CLOUD)},M=function(){function t(t,e,n,i,o,r){this.id=t,this.type=e,this.x=n,this.y=i,this.rot=o,this.onDestroyed=r,this.rotation=0,this.move=null,this.speed=0,this.move=e.move.copy().setRotation(o)}return t.prototype.update=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=this.move.move(t);this.type.boundary.isInBounds(this.x+i.x,this.y+i.y,this.type.shape)?(this.x+=i.x,this.y+=i.y):this.type!=_.PLAYER&&this.onDestroyed(o.OUT_OF_BOUNDS)},t.prototype.isCollidingWith=function(t){return!1},t.prototype.getWidth=function(){return this.type.shape.getWidth()},t.prototype.getHeight=function(){return this.type.shape.getHeight()},t.prototype.getColor=function(){return this.type.shape.color},t}(),b=function(t){function e(e,n,i,o,r,s){var u=t.call(this,e,n,i,o,r,s)||this;return u.type=n,u}return i(e,t),e.prototype.update=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),this.rotation=s.mod(this.rotation+.2*e*t,360);var i=this.speed;this.speed=Math.max(0,this.speed-.08),this.moveVector.scale(0===i?1:this.speed/i),i=this.speed,n?(this.speed=Math.min(8,this.speed+.5),this.moveVector.add(s.default.construct(this.speed-i,this.rotation))):0===this.speed&&(this.moveVector=s.default.zero()),this.x=s.mod(this.x+this.moveVector.x,u),this.y=s.mod(this.y+this.moveVector.y,h)},e}(function(t){function e(e,n,i,u,h,c){var a=t.call(this,e,n,i,u,h,c)||this;return a.type=n,a.moveVector=s.default.zero(),a.onHit=function(t){if(t instanceof S){if(t.initiator==a.type)return;a.type.bounties.forEach(function(e){e(a,t,r.HIT)}),a.lives-=t.type.dmg,z(0)}else a.lives--,z(0);a.lives<1&&a.onDestroyed(o.LIVES)},a.lives=n.lives,a}return i(e,t),e.prototype.isAlive=function(){return this.lives>0},e.prototype.isInBounds=function(){return this.type.boundary.isInBounds(this.x,this.y,this.type.shape)},e.prototype.update=function(e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),t.prototype.update.call(this,e,n,i),this.type!==_.PLAYER)switch(Math.floor(Math.random()*this.type.shotFreq)){case 1:this.shoot()}},e.prototype.shoot=function(){var t=W,e=new S(t,this.type,this.type.shot,this.x+this.getWidth()/2,this.y,this.rotation,function(e){j.delete(t)});return j.set(t,e),W++,e},e}(M)),S=function(t){function e(e,n,i,o,r,s,u){var h=t.call(this,e,i,o,r,s,u)||this;return h.initiator=n,h.type=i,h}return i(e,t),e.prototype.isCollidingWith=function(e){return t.prototype.isCollidingWith.call(this,e)&&this.initiator!==e.type},e}(M),H=function(t){function e(e,n,i,o,r,s){return t.call(this,e,n,i,o,r,s)||this}return i(e,t),e}(M),A=document.getElementById("canvas").getContext("2d"),C=document.createElement("canvas");C.width=u,C.height=h;var D=C.getContext("2d"),R=null,U={space:!1,left:!1,right:!1,up:!1,down:!1},N={space:!1,left:!1,right:!1,up:!1,down:!1},T=new b(0,_.PLAYER,0,0,0,function(){F=!1,alert("Game over!")});T.x=u/2-T.getWidth()/2,T.y=h-T.getHeight();var Y=0,P=document.getElementById("score_text"),I=document.getElementById("lives_text"),W=0,B=0,V=new Map,j=new Map,k=new Map,F=!0;function z(t,e){void 0===e&&(e=0),Y+=t,T.lives+=e,P.innerText=""+Y,I.innerText=""+T.lives}window.addEventListener("keydown",function(t){switch(t.key){case" ":U.space=!0;break;case"ArrowUp":case"w":U.up=!0;break;case"ArrowLeft":case"a":U.left=!0;break;case"ArrowRight":case"d":U.right=!0}}),window.addEventListener("keyup",function(t){switch(t.key){case" ":U.space=!1;break;case"ArrowUp":case"w":U.up=!1;break;case"ArrowLeft":case"a":U.left=!1;break;case"ArrowRight":case"d":U.right=!1}}),window.requestAnimationFrame(function t(e){if(F){R||(R=e);var n=e-R;R=e,function(){switch(Math.floor(100*Math.random())){case 1:var t=B;k.set(t,new H(t,L.CLOUD,Math.random()*u,-L.CLOUD.shape.getHeight(),0,function(t){k.delete(this.id)})),B++}}(),function(t){U.space&&!N.space&&T.shoot(),T.update(t,U.left?-1:U.right?1:0,U.up),V.forEach(function(e){return e.update(t)}),j.forEach(function(e){return e.update(t)}),j.forEach(function(t){t.isCollidingWith(T)&&(T.onHit(t),t.onDestroyed()),V.forEach(function(e){t.isCollidingWith(e)&&(e.onHit(t),t.onDestroyed())})}),k.forEach(function(e){return e.update(t)})}(n),D.clearRect(0,0,u,h),k.forEach(function(t){D.fillStyle=t.getColor(),D.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),D.save(),D.fillStyle=T.getColor(),D.translate(T.x+.5*T.getWidth(),T.y+.5*T.getHeight()),D.rotate(s.rad(T.rotation)),D.translate(-(T.x+.5*T.getWidth()),-(T.y+.5*T.getHeight())),D.fillRect(T.x,T.y,T.getWidth(),T.getHeight()),D.restore(),V.forEach(function(t){D.fillStyle=t.getColor(),D.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),j.forEach(function(t){D.fillStyle=t.getColor(),D.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),N=JSON.parse(JSON.stringify(U)),A.clearRect(0,0,u,h),A.drawImage(C,0,0),window.requestAnimationFrame(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.x=t,this.y=e}return t.from=function(e,n){return new t(e,n)},t.fromOther=function(e){return new t(e.x,e.y)},t.zero=function(){return new t(0,0)},t.construct=function(e,n){return new t(e*Math.cos(o(n)),e*Math.sin(o(n))).rotate(-90)},t.prototype.isZero=function(){return 0==this.x&&0==this.y},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.add=function(e,n){return t.fromOther(e).add(n)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.rotate=function(e,n){return t.fromOther(e).rotate(n)},t.prototype.rotate=function(t){var e=this.x;return this.x=this.x*Math.cos(o(t))-this.y*Math.sin(o(t)),this.y=e*Math.sin(o(t))+this.y*Math.cos(o(t)),this},t.scale=function(e,n){return t.fromOther(e).scale(n)},t.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.normalize=function(e){return t.fromOther(e).normalize()},t.prototype.normalize=function(){return 0===this.magnitude()?this:this.scale(1/this.magnitude())},t}();function o(t){return t*(Math.PI/180)}e.default=i,e.mod=function(t,e){return(t%e+e)%e},e.rad=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FzdGVyb2lkcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmVjdG9yLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRGVhdGhDYXVzZUVudW0iLCJIaXRUeXBlRW51bSIsInZlY3Rvcl8xIiwiV0lEVEgiLCJIRUlHSFQiLCJCb3VuZGFyeSIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJ0aGlzIiwiaXNJbkJvdW5kcyIsIngiLCJ5Iiwic2hhcGUiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsIlNoYXBlIiwiY29sb3IiLCJtYXNzIiwiUmVjdGFuZ2xlIiwiX3N1cGVyIiwid2lkdGgiLCJoZWlnaHQiLCJfdGhpcyIsIl9fZXh0ZW5kcyIsImJvdW5kYXJ5IiwiR2FtZU9iamVjdFR5cGUiLCJDaXJjbGUiLCJyYWRpdXMiLCJtb3ZlIiwiVW5pdFR5cGUiLCJsaXZlcyIsInNob3RGcmVxIiwic2hvdCIsImJvdW50aWVzIiwiU2hvdFR5cGUiLCJkbWciLCJFbnZpcm9ubWVudFR5cGUiLCJNb3ZlIiwiZWxhcHNlZFRpbWUiLCJyb3RhdGlvbiIsInNwZWVkIiwibW92ZVZlY3RvciIsIkVycm9yIiwiQ29uc3RhbnRNb3ZlIiwidmVjdG9yIiwiZGVmYXVsdCIsImZyb20iLCJjb3B5IiwiZnJvbU90aGVyIiwic2V0Um90YXRpb24iLCJyb3RhdGUiLCJEeW5hbWljTW92ZSIsImRlY1NwZWVkIiwiU2hhcGVFbnVtIiwiUExBWUVSIiwiRU5FTVkiLCJTSE9UIiwiSEVBTFRIX0VORU1ZIiwiQklHX09ORSIsIkZBU1RfT05FIiwiQ0xPVUQiLCJCb3VuZGFyeUVudW0iLCJOT05FIiwiTnVtYmVyIiwiTUlOX1ZBTFVFIiwiTUFYX1ZBTFVFIiwiTW92ZVR5cGVFbnVtIiwiRU5FTVlfU0lNUExFIiwiUExBWUVSX1NIT1QiLCJFTkVNWV9TSE9UIiwiU2hvdFR5cGVFbnVtIiwiVW5pdFR5cGVFbnVtIiwiRW52aXJvbm1lbnRUeXBlRW51bSIsIkdhbWVPYmplY3QiLCJpZCIsInR5cGUiLCJyb3QiLCJvbkRlc3Ryb3llZCIsInVwZGF0ZSIsIm1vdmVtZW50IiwiT1VUX09GX0JPVU5EUyIsImlzQ29sbGlkaW5nV2l0aCIsIm90aGVyIiwiZ2V0Q29sb3IiLCJQbGF5ZXIiLCJtb2QiLCJvbGRTcGVlZCIsIk1hdGgiLCJtYXgiLCJzY2FsZSIsIm1pbiIsImFkZCIsImNvbnN0cnVjdCIsInplcm8iLCJVbml0Iiwib25IaXQiLCJTaG90IiwiaW5pdGlhdG9yIiwiZm9yRWFjaCIsImJvdW50eSIsIkhJVCIsInVwZGF0ZVN0YXR1cyIsIkxJVkVTIiwiaXNBbGl2ZSIsImZsb29yIiwicmFuZG9tIiwic2hvb3QiLCJzaG90SWRDb3VudGVyIiwiY2F1c2UiLCJzaG90cyIsImRlbGV0ZSIsInNldCIsIkVudmlyb25tZW50IiwiZnJvbnRDb250ZXh0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJiYWNrQ2FudmFzIiwiY3JlYXRlRWxlbWVudCIsImJhY2tDb250ZXh0Iiwic3RhcnQiLCJjdXJyZW50SW5wdXQiLCJzcGFjZSIsImxlZnQiLCJyaWdodCIsInVwIiwiZG93biIsInByaW9ySW5wdXQiLCJwbGF5ZXIiLCJydW5uaW5nIiwiYWxlcnQiLCJzY29yZSIsInNjb3JlRWxlbWVudCIsImxpdmVzRWxlbWVudCIsImVudmlyb25tZW50SWRDb3VudGVyIiwiZW5lbWllcyIsIk1hcCIsImVudmlyb25tZW50cyIsInNjb3JlRGVsdGEiLCJoZWFsdGhEZWx0YSIsImlubmVyVGV4dCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxvb3AiLCJ0aW1lc3RhbXAiLCJjcmVhdGVFbnZpcm9ubWVudCIsImVuZW15IiwiY2xlYXJSZWN0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJzYXZlIiwidHJhbnNsYXRlIiwicmFkIiwicmVzdG9yZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImRyYXdJbWFnZSIsIlZlY3RvciIsIm1hZ25pdHVkZSIsImFuZ2xlIiwiY29zIiwic2luIiwiaXNaZXJvIiwic3FydCIsImEiLCJiIiwib2xkWCIsInNjYWxhciIsIm5vcm1hbGl6ZSIsIlBJIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXpCLEVBQUE2QixFQUFBLFNBQUExQixHQUNBLElBQUFTLEVBQUFULEtBQUFxQixXQUNBLFdBQTJCLE9BQUFyQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REL0IsRUFBQWtDLEVBQUEsR0FJQWxDLElBQUFtQyxFQUFBLHdiQ2xGQSxJQVlLQyxFQUtBQyxFQWpCTEMsRUFBQXRDLEVBQUEsR0FFTXVDLEVBQVEsSUFDUkMsRUFBUyxLQVNmLFNBQUtKLEdBQ0RBLElBQUEsaUNBQ0FBLElBQUEsaUJBRkosQ0FBS0EsV0FLTCxTQUFLQyxHQUNEQSxJQUFBLGFBQ0FBLElBQUEseUJBRkosQ0FBS0EsV0FLTCxJQUFBSSxFQUFBLFdBQ0ksU0FBQUEsRUFBbUJDLEVBQXFCQyxFQUFxQkMsRUFBcUJDLEdBQS9EQyxLQUFBSixPQUFxQkksS0FBQUgsT0FBcUJHLEtBQUFGLE9BQXFCRSxLQUFBRCxPQU90RixPQUpJSixFQUFBVCxVQUFBZSxXQUFBLFNBQVdDLEVBQVdDLEVBQVdDLEdBRTdCLE9BQU9GLEdBQUtGLEtBQUtKLE1BQVFPLEdBQUtILEtBQUtILE1BQVNLLEVBQUlFLEVBQU1DLFlBQWVMLEtBQUtGLE1BQVNLLEVBQUlDLEVBQU1FLGFBQWdCTixLQUFLRCxNQUUxSEosRUFSQSxHQVVBWSxFQUFBLFdBT0EsT0FOSSxTQUE2QkMsRUFBc0JDLEdBQXRCVCxLQUFBUSxRQUFzQlIsS0FBQVMsUUFEdkQsR0FTQUMsRUFBQSxTQUFBQyxHQUNJLFNBQUFELEVBQW1CRSxFQUFzQkMsRUFBZ0JMLEVBQWVDLEdBQXhFLElBQUFLLEVBQ0lILEVBQUFsRCxLQUFBdUMsS0FBTVEsRUFBT0MsSUFBS1QsWUFESGMsRUFBQUYsUUFBc0JFLEVBQUFELFdBZTdDLE9BaEJ3QkUsRUFBQUwsRUFBQUMsR0FLcEJELEVBQUF4QixVQUFBZSxXQUFBLFNBQVdDLEVBQVdDLEVBQVdhLEtBSWpDTixFQUFBeEIsVUFBQW9CLFVBQUEsV0FDSSxPQUFPTixLQUFLYSxRQUdoQkgsRUFBQXhCLFVBQUFtQixTQUFBLFdBQ0ksT0FBT0wsS0FBS1ksT0FFcEJGLEVBaEJBLENBQXdCSCxHQW9DeEJVLEdBbEJBLFNBQUFOLEdBQ0ksU0FBQU8sRUFBbUJDLEVBQWdCWCxFQUFlQyxHQUFsRCxJQUFBSyxFQUNJSCxFQUFBbEQsS0FBQXVDLEtBQU1RLEVBQU9DLElBQUtULFlBREhjLEVBQUFLLFdBREZKLEVBQUFHLEVBQUFQLEdBS2pCTyxFQUFBaEMsVUFBQWUsV0FBQSxTQUFXQyxFQUFXQyxFQUFXYSxLQUlqQ0UsRUFBQWhDLFVBQUFvQixVQUFBLFdBQ0ksT0FBTyxFQUFJTixLQUFLbUIsUUFHcEJELEVBQUFoQyxVQUFBbUIsU0FBQSxXQUNJLE9BQU8sRUFBSUwsS0FBS21CLFFBZHhCLENBQXFCWixHQWtCckIsV0FJQSxPQUhJLFNBQTZCSCxFQUFxQlksRUFBMkJJLEdBQWhEcEIsS0FBQUksUUFBcUJKLEtBQUFnQixXQUEyQmhCLEtBQUFvQixRQURqRixJQU1BQyxFQUFBLFNBQUFWLEdBQ0ksU0FBQVUsRUFBbUJDLEVBQXNCQyxFQUFrQm5CLEVBQWNZLEVBQW9CSSxFQUFtQkksRUFBdUJDLEdBQXZJLElBQUFYLEVBQ0lILEVBQUFsRCxLQUFBdUMsS0FBTUksRUFBT1ksRUFBVUksSUFBS3BCLFlBRGJjLEVBQUFRLFFBQXNCUixFQUFBUyxXQUF1RVQsRUFBQVUsT0FBdUJWLEVBQUFXLGFBRzNJLE9BSnVCVixFQUFBTSxFQUFBVixHQUl2QlUsRUFKQSxDQUF1QkosR0FPdkJTLEVBQUEsU0FBQWYsR0FDSSxTQUFBZSxFQUFtQkMsRUFBYXZCLEVBQWNZLEVBQW9CSSxHQUFsRSxJQUFBTixFQUNJSCxFQUFBbEQsS0FBQXVDLEtBQU1JLEVBQU9ZLEVBQVVJLElBQUtwQixZQURiYyxFQUFBYSxRQUd2QixPQUp1QlosRUFBQVcsRUFBQWYsR0FJdkJlLEVBSkEsQ0FBdUJULEdBTXZCVyxFQUFBLFNBQUFqQixHQUNJLFNBQUFpQixFQUFZeEIsRUFBY1ksRUFBb0JJLFVBQzFDVCxFQUFBbEQsS0FBQXVDLEtBQU1JLEVBQU9ZLEVBQVVJLElBQUtwQixLQUVwQyxPQUo4QmUsRUFBQWEsRUFBQWpCLEdBSTlCaUIsRUFKQSxDQUE4QlgsR0FNOUJZLEVBQUEsV0FDSSxTQUFBQSxLQVNKLE9BTklBLEVBQUEzQyxVQUFBa0MsS0FBQSxTQUFLVSxFQUFxQkMsRUFBc0JDLEVBQW1CQyxHQUMvRCxXQURzQixJQUFBRixNQUFBLFFBQXNCLElBQUFDLE1BQUEsUUFBbUIsSUFBQUMsTUFBQSxNQUN6RCxJQUFJQyxNQUFNLHFCQUt4QkwsRUFWQSxHQVlBTSxFQUFBLFNBQUF4QixHQUNJLFNBQUF3QixFQUFtQkMsR0FBbkIsSUFBQXRCLEVBQ0lILEVBQUFsRCxLQUFBdUMsT0FBT0EsWUFEUWMsRUFBQXNCLFdBaUJ2QixPQWxCMkJyQixFQUFBb0IsRUFBQXhCLEdBS3ZCd0IsRUFBQWpELFVBQUFrQyxLQUFBLFNBQUtVLEVBQXFCQyxFQUFzQkMsRUFBbUJDLEdBQy9ELFlBRHNCLElBQUFGLE1BQUEsUUFBc0IsSUFBQUMsTUFBQSxRQUFtQixJQUFBQyxNQUFBLE1BQ3hEekMsRUFBQTZDLFFBQU9DLEtBQUt0QyxLQUFLb0MsT0FBT2xDLEVBQUk0QixFQUFhOUIsS0FBS29DLE9BQU9qQyxFQUFJMkIsSUFHN0RLLEVBQUFqRCxVQUFBcUQsS0FBUCxXQUNJLE9BQU8sSUFBSUosRUFBYTNDLEVBQUE2QyxRQUFPRyxVQUFVeEMsS0FBS29DLFVBSTNDRCxFQUFBakQsVUFBQXVELFlBQVAsU0FBbUJWLEdBRWYsT0FEQS9CLEtBQUtvQyxPQUFPTSxPQUFPWCxHQUNaL0IsTUFFZm1DLEVBbEJBLENBQTJCTixHQW9CM0JjLEVBQUEsU0FBQWhDLEdBQ0ksU0FBQWdDLEVBQW9CQyxHQUFwQixJQUFBOUIsRUFDSUgsRUFBQWxELEtBQUF1QyxPQUFPQSxZQURTYyxFQUFBOEIsYUFnQnhCLE9BakIwQjdCLEVBQUE0QixFQUFBaEMsR0FLdEJnQyxFQUFBekQsVUFBQWtDLEtBQUEsU0FBS1UsRUFBcUJDLEVBQWtCQyxHQUV4QyxPQUFPLE1BSVhXLEVBQUF6RCxVQUFBcUQsS0FBQSxXQUNJLE9BQU8sSUFBSUksRUFBWTNDLEtBQUs0QyxXQUdoQ0QsRUFBQXpELFVBQUF1RCxZQUFBLFNBQVlWLEtBRWhCWSxFQWpCQSxDQUEwQmQsR0FtQnBCZ0IsR0FDRkMsT0FBUSxJQUFJcEMsRUFBVSxHQUFJLEdBQUksVUFBVyxHQUN6Q3FDLE1BQU8sSUFBSXJDLEVBQVUsR0FBSSxHQUFJLFVBQVcsR0FDeENzQyxLQUFNLElBQUl0QyxFQUFVLEVBQUcsRUFBRyxVQUFXLEdBQ3JDdUMsYUFBYyxJQUFJdkMsRUFBVSxHQUFJLEdBQUksVUFBVyxHQUMvQ3dDLFFBQVMsSUFBSXhDLEVBQVUsR0FBSSxHQUFJLFVBQVcsR0FDMUN5QyxTQUFVLElBQUl6QyxFQUFVLEdBQUksR0FBSSxVQUFXLEdBQzNDMEMsTUFBTyxJQUFJMUMsRUFBVSxJQUFLLElBQUssVUFBVyxJQUd4QzJDLEdBQ0ZDLEtBQU0sSUFBSTNELEVBQVM0RCxPQUFPQyxVQUFXRCxPQUFPQyxVQUFXRCxPQUFPRSxVQUFXRixPQUFPRSxXQUNoRlQsS0FBTSxJQUFJckQsRUFBUyxFQUFHLEVBQUdGLEVBQU9DLEdBQ2hDMEQsTUFBTyxJQUFJekQsR0FBVWtELEVBQVVPLE1BQU14QyxPQUFRaUMsRUFBVU8sTUFBTXZDLE9BQVFwQixFQUFRb0QsRUFBVU8sTUFBTXhDLE1BQU9sQixFQUFTbUQsRUFBVU8sTUFBTXZDLFNBd0IzSDZDLEdBQ0ZaLE9BQVEsSUFBSUgsRUF6TFcsS0EwTHZCZ0IsYUFBYyxJQUFJeEIsRUFBYTNDLEVBQUE2QyxRQUFPQyxLQUFLLEVBQUcsS0FDOUNzQixZQUFhLElBQUl6QixFQUFhM0MsRUFBQTZDLFFBQU9DLEtBQUssR0FBSSxLQUM5Q3VCLFdBQVksSUFBSTFCLEVBQWEzQyxFQUFBNkMsUUFBT0MsS0FBSyxFQUFHLEtBQzVDYyxNQUFPLElBQUlqQixFQUFhM0MsRUFBQTZDLFFBQU9DLEtBQUssRUFBRyxPQUdyQ3dCLEdBQ0ZoQixPQUFRLElBQUlwQixFQUFTLEVBQUdtQixFQUFVRyxLQUFNSyxFQUFhTCxLQUFNVSxFQUFhRSxhQUN4RWIsTUFBTyxJQUFJckIsRUFBUyxFQUFHbUIsRUFBVUcsS0FBTUssRUFBYUwsS0FBTVUsRUFBYUcsYUFHckVFLEdBQ0ZqQixPQUFRLElBQUl6QixFQUFTLEVBQUcsRUFBR3dCLEVBQVVDLE9BQVFPLEVBQWFDLEtBQU1JLEVBQWFaLE9BQVFnQixFQUFhaEIsWUFHaEdrQixHQUNGWixNQUFPLElBQUl4QixFQUFnQmlCLEVBQVVPLE1BQU9DLEVBQWFELE1BQU9NLEVBQWFOLFFBU2pGYSxFQUFBLFdBTUksU0FBQUEsRUFBNkJDLEVBQW1CQyxFQUE2QmpFLEVBQWtCQyxFQUFrQmlFLEVBQW9CQyxHQUF4R3JFLEtBQUFrRSxLQUFtQmxFLEtBQUFtRSxPQUE2Qm5FLEtBQUFFLElBQWtCRixLQUFBRyxJQUFrQkgsS0FBQW9FLE1BQW9CcEUsS0FBQXFFLGNBTDlIckUsS0FBQStCLFNBQW1CLEVBQ25CL0IsS0FBQW9CLEtBQWEsS0FFVnBCLEtBQUFnQyxNQUFnQixFQUd0QmhDLEtBQUtvQixLQUFPK0MsRUFBSy9DLEtBQUttQixPQUFPRSxZQUFZMkIsR0FnQ2pELE9BN0JJSCxFQUFBL0UsVUFBQW9GLE9BQUEsU0FBT3hDLEVBQXFCQyxFQUFzQndDLFFBQXRCLElBQUF4QyxNQUFBLFFBQXNCLElBQUF3QyxPQUFBLEdBQzlDLElBQUluRCxFQUFPcEIsS0FBS29CLEtBQUtBLEtBQUtVLEdBQ3RCOUIsS0FBS21FLEtBQUtuRCxTQUFTZixXQUFXRCxLQUFLRSxFQUFJa0IsRUFBS2xCLEVBQUdGLEtBQUtHLEVBQUlpQixFQUFLakIsRUFBR0gsS0FBS21FLEtBQUsvRCxRQUMxRUosS0FBS0UsR0FBS2tCLEVBQUtsQixFQUNmRixLQUFLRyxHQUFLaUIsRUFBS2pCLEdBQ1JILEtBQUttRSxNQUFRSixFQUFhakIsUUFDakM5QyxLQUFLcUUsWUFBWS9FLEVBQWVrRixnQkFJeENQLEVBQUEvRSxVQUFBdUYsZ0JBQUEsU0FBZ0JDLEdBRVosT0FBTyxHQUlKVCxFQUFBL0UsVUFBQW1CLFNBQVAsV0FDSSxPQUFPTCxLQUFLbUUsS0FBSy9ELE1BQU1DLFlBR3BCNEQsRUFBQS9FLFVBQUFvQixVQUFQLFdBQ0ksT0FBT04sS0FBS21FLEtBQUsvRCxNQUFNRSxhQUdwQjJELEVBQUEvRSxVQUFBeUYsU0FBUCxXQUNJLE9BQU8zRSxLQUFLbUUsS0FBSy9ELE1BQU1JLE9BSS9CeUQsRUF2Q0EsR0FpR0FXLEVBQUEsU0FBQWpFLEdBQ0ksU0FBQWlFLEVBQVlWLEVBQW1CQyxFQUFnQmpFLEVBQVdDLEVBQVdpRSxFQUFhQyxHQUFsRixJQUFBdkQsRUFDSUgsRUFBQWxELEtBQUF1QyxLQUFNa0UsRUFBSUMsRUFBTWpFLEVBQUdDLEVBQUdpRSxFQUFLQyxJQUFZckUsWUFEWmMsRUFBQXFELFNBcUJuQyxPQXRCcUJwRCxFQUFBNkQsRUFBQWpFLEdBS2pCaUUsRUFBQTFGLFVBQUFvRixPQUFBLFNBQU94QyxFQUFxQkMsRUFBc0J3QyxRQUF0QixJQUFBeEMsTUFBQSxRQUFzQixJQUFBd0MsT0FBQSxHQUM5Q3ZFLEtBQUsrQixTQUFXdkMsRUFBQXFGLElBQUk3RSxLQUFLK0IsU0E1VFYsR0E0VHFCQSxFQUE0QkQsRUFBYSxLQUM3RSxJQUFJZ0QsRUFBVzlFLEtBQUtnQyxNQUNwQmhDLEtBQUtnQyxNQUFRK0MsS0FBS0MsSUFBSSxFQUFHaEYsS0FBS2dDLE1BNVRYLEtBNlRuQmhDLEtBQUtpQyxXQUFXZ0QsTUFBbUIsSUFBYkgsRUFBaUIsRUFBRzlFLEtBQUtnQyxNQUFROEMsR0FDdkRBLEVBQVc5RSxLQUFLZ0MsTUFFWnVDLEdBQ0F2RSxLQUFLZ0MsTUFBUStDLEtBQUtHLElBaFVaLEVBZ1UyQmxGLEtBQUtnQyxNQWxVaEMsSUFtVU5oQyxLQUFLaUMsV0FBV2tELElBQUkzRixFQUFBNkMsUUFBTytDLFVBQVVwRixLQUFLZ0MsTUFBUThDLEVBQVU5RSxLQUFLK0IsWUFDM0MsSUFBZi9CLEtBQUtnQyxRQUNaaEMsS0FBS2lDLFdBQWF6QyxFQUFBNkMsUUFBT2dELFFBRzdCckYsS0FBS0UsRUFBSVYsRUFBQXFGLElBQUk3RSxLQUFLRSxFQUFJRixLQUFLaUMsV0FBVy9CLEVBQUdULEdBQ3pDTyxLQUFLRyxFQUFJWCxFQUFBcUYsSUFBSTdFLEtBQUtHLEVBQUlILEtBQUtpQyxXQUFXOUIsRUFBR1QsSUFFakRrRixFQXRCQSxDQXhEQSxTQUFBakUsR0FxQkksU0FBQTJFLEVBQVlwQixFQUFtQkMsRUFBZ0JqRSxFQUFXQyxFQUFXaUUsRUFBYUMsR0FBbEYsSUFBQXZELEVBQ0lILEVBQUFsRCxLQUFBdUMsS0FBTWtFLEVBQUlDLEVBQU1qRSxFQUFHQyxFQUFHaUUsRUFBS0MsSUFBWXJFLFlBRFpjLEVBQUFxRCxPQXBCeEJyRCxFQUFBbUIsV0FBcUJ6QyxFQUFBNkMsUUFBT2dELE9BRTVCdkUsRUFBQXlFLE1BQXFCLFNBQUFiLEdBQ3hCLEdBQUlBLGFBQWlCYyxFQUFNLENBQ3ZCLEdBQUlkLEVBQU1lLFdBQWEzRSxFQUFLcUQsS0FDeEIsT0FDSnJELEVBQUtxRCxLQUFLMUMsU0FBU2lFLFFBQVEsU0FBQUMsR0FDdkJBLEVBQU83RSxFQUFNNEQsRUFBT25GLEVBQVlxRyxPQUVwQzlFLEVBQUtRLE9BQVNvRCxFQUFNUCxLQUFLeEMsSUFDekJrRSxFQUFhLFFBRWIvRSxFQUFLUSxRQUNMdUUsRUFBYSxHQUViL0UsRUFBS1EsTUFBUSxHQUNiUixFQUFLdUQsWUFBWS9FLEVBQWV3RyxRQU1wQ2hGLEVBQUtRLE1BQVE2QyxFQUFLN0MsUUErQjFCLE9BdERtQlAsRUFBQXVFLEVBQUEzRSxHQTBCZjJFLEVBQUFwRyxVQUFBNkcsUUFBQSxXQUNJLE9BQU8vRixLQUFLc0IsTUFBUSxHQUd4QmdFLEVBQUFwRyxVQUFBZSxXQUFBLFdBQ0ksT0FBT0QsS0FBS21FLEtBQUtuRCxTQUFTZixXQUFXRCxLQUFLRSxFQUFHRixLQUFLRyxFQUFHSCxLQUFLbUUsS0FBSy9ELFFBR25Fa0YsRUFBQXBHLFVBQUFvRixPQUFBLFNBQU94QyxFQUFxQkMsRUFBc0J3QyxHQUU5QyxRQUZ3QixJQUFBeEMsTUFBQSxRQUFzQixJQUFBd0MsT0FBQSxHQUM5QzVELEVBQUF6QixVQUFNb0YsT0FBTTdHLEtBQUF1QyxLQUFDOEIsRUFBYUMsRUFBVXdDLEdBQ2hDdkUsS0FBS21FLE9BQVNKLEVBQWFqQixPQUcvQixPQUFRaUMsS0FBS2lCLE1BQU1qQixLQUFLa0IsU0FBV2pHLEtBQUttRSxLQUFLNUMsV0FDekMsS0FBSyxFQUNEdkIsS0FBS2tHLFVBSWpCWixFQUFBcEcsVUFBQWdILE1BQUEsV0FDSSxJQUFJaEMsRUFBS2lDLEVBQ0wzRSxFQUFPLElBQUlnRSxFQUFLdEIsRUFBSWxFLEtBQUttRSxLQUFNbkUsS0FBS21FLEtBQUszQyxLQUFNeEIsS0FBS0UsRUFBSUYsS0FBS0ssV0FBYSxFQUFHTCxLQUFLRyxFQUFHSCxLQUFLK0IsU0FBVSxTQUFDcUUsR0FDckdDLEVBQU1DLE9BQU9wQyxLQUlqQixPQUZBbUMsRUFBTUUsSUFBSXJDLEVBQUkxQyxHQUNkMkUsSUFDTzNFLEdBRWY4RCxFQXREQSxDQUFtQnJCLElBZ0ZuQnVCLEVBQUEsU0FBQTdFLEdBQ0ksU0FBQTZFLEVBQVl0QixFQUFtQnVCLEVBQTRCdEIsRUFBZ0JqRSxFQUFXQyxFQUFXaUUsRUFBYUMsR0FBOUcsSUFBQXZELEVBQ0lILEVBQUFsRCxLQUFBdUMsS0FBTWtFLEVBQUlDLEVBQU1qRSxFQUFHQyxFQUFHaUUsRUFBS0MsSUFBWXJFLFlBRFpjLEVBQUEyRSxZQUE0QjNFLEVBQUFxRCxTQU8vRCxPQVJtQnBELEVBQUF5RSxFQUFBN0UsR0FLZjZFLEVBQUF0RyxVQUFBdUYsZ0JBQUEsU0FBZ0JDLEdBQ1osT0FBTy9ELEVBQUF6QixVQUFNdUYsZ0JBQWVoSCxLQUFBdUMsS0FBQzBFLElBQVUxRSxLQUFLeUYsWUFBY2YsRUFBTVAsTUFFeEVxQixFQVJBLENBQW1CdkIsR0FVbkJ1QyxFQUFBLFNBQUE3RixHQUNJLFNBQUE2RixFQUFZdEMsRUFBWUMsRUFBdUJqRSxFQUFXQyxFQUFXaUUsRUFBYUMsVUFDOUUxRCxFQUFBbEQsS0FBQXVDLEtBQU1rRSxFQUFJQyxFQUFNakUsRUFBR0MsRUFBR2lFLEVBQUtDLElBQVlyRSxLQUUvQyxPQUowQmUsRUFBQXlGLEVBQUE3RixHQUkxQjZGLEVBSkEsQ0FBMEJ2QyxHQVN0QndDLEVBRGtDQyxTQUFTQyxlQUFlLFVBQy9CQyxXQUFXLE1BRXRDQyxFQUFpQ0gsU0FBU0ksY0FBYyxVQUM1REQsRUFBV2pHLE1BQVFuQixFQUNuQm9ILEVBQVdoRyxPQUFTbkIsRUFDcEIsSUFBSXFILEVBQWNGLEVBQVdELFdBQVcsTUFFcENJLEVBQVEsS0FDUkMsR0FDQUMsT0FBTyxFQUNQQyxNQUFNLEVBQ05DLE9BQU8sRUFDUEMsSUFBSSxFQUNKQyxNQUFNLEdBRU5DLEdBQ0FMLE9BQU8sRUFDUEMsTUFBTSxFQUNOQyxPQUFPLEVBQ1BDLElBQUksRUFDSkMsTUFBTSxHQUdORSxFQUFTLElBQUk1QyxFQUFPLEVBQUdiLEVBQWFqQixPQUFRLEVBQUcsRUFBRyxFQUFHLFdBNkxyRDJFLEdBQVUsRUFDVkMsTUFBTSxnQkEzTFZGLEVBQU90SCxFQUFJVCxFQUFRLEVBQUkrSCxFQUFPbkgsV0FBYSxFQUMzQ21ILEVBQU9ySCxFQUFJVCxFQUFTOEgsRUFBT2xILFlBQzNCLElBQUlxSCxFQUFRLEVBQ1JDLEVBQWVsQixTQUFTQyxlQUFlLGNBQ3ZDa0IsRUFBZW5CLFNBQVNDLGVBQWUsY0FJdkNSLEVBQWdCLEVBQ2hCMkIsRUFBdUIsRUFFdkJDLEVBQVUsSUFBSUMsSUFFZDNCLEVBQVEsSUFBSTJCLElBRVpDLEVBQWUsSUFBSUQsSUFDbkJQLEdBQW1CLEVBa0t2QixTQUFTNUIsRUFBYXFDLEVBQW9CQyxRQUFBLElBQUFBLE1BQUEsR0FDdENSLEdBQVNPLEVBQ1RWLEVBQU9sRyxPQUFTNkcsRUFDaEJQLEVBQWFRLFVBQVksR0FBS1QsRUFDOUJFLEVBQWFPLFVBQVksR0FBS1osRUFBT2xHLE1BMUh6QytHLE9BQU9DLGlCQUFpQixVQXBCeEIsU0FBdUJDLEdBQ25CLE9BQVFBLEVBQU0xSixLQUNWLElBQUssSUFDRG9JLEVBQWFDLE9BQVEsRUFDckIsTUFDSixJQUFLLFVBQ0wsSUFBSyxJQUNERCxFQUFhSSxJQUFLLEVBQ2xCLE1BQ0osSUFBSyxZQUNMLElBQUssSUFDREosRUFBYUUsTUFBTyxFQUNwQixNQUNKLElBQUssYUFDTCxJQUFLLElBQ0RGLEVBQWFHLE9BQVEsS0EyQmpDaUIsT0FBT0MsaUJBQWlCLFFBcEJ4QixTQUFxQkMsR0FDakIsT0FBUUEsRUFBTTFKLEtBQ1YsSUFBSyxJQUNEb0ksRUFBYUMsT0FBUSxFQUNyQixNQUNKLElBQUssVUFDTCxJQUFLLElBQ0RELEVBQWFJLElBQUssRUFDbEIsTUFDSixJQUFLLFlBQ0wsSUFBSyxJQUNESixFQUFhRSxNQUFPLEVBQ3BCLE1BQ0osSUFBSyxhQUNMLElBQUssSUFDREYsRUFBYUcsT0FBUSxLQWlIakNpQixPQUFPRyxzQkE1S1AsU0FBU0MsRUFBS0MsR0FDVixHQUFLakIsRUFBTCxDQUVLVCxJQUFPQSxFQUFRMEIsR0FDcEIsSUFBSTVHLEVBQWM0RyxFQUFZMUIsRUFDOUJBLEVBQVEwQixFQTZGWixXQUNJLE9BQVEzRCxLQUFLaUIsTUFBc0IsSUFBaEJqQixLQUFLa0IsV0FDcEIsS0FBSyxFQUNELElBQUkvQixFQUFLNEQsRUFDVEcsRUFBYTFCLElBQUlyQyxFQUFJLElBQUlzQyxFQUFZdEMsRUFBSUYsRUFBb0JaLE1BQU8yQixLQUFLa0IsU0FBV3hHLEdBQVF1RSxFQUFvQlosTUFBTWhELE1BQU1FLFlBQWEsRUFBRyxTQUFVOEYsR0FDbEo2QixFQUFhM0IsT0FBT3RHLEtBQUtrRSxPQUU3QjRELEtBakdSYSxHQXFHSixTQUFnQjdHLEdBQ1JtRixFQUFhQyxRQUFVSyxFQUFXTCxPQUNsQ00sRUFBT3RCLFFBRVhzQixFQUFPbEQsT0FBT3hDLEVBQWFtRixFQUFhRSxNQUFRLEVBQUtGLEVBQWFHLE1BQVEsRUFBSSxFQUFJSCxFQUFhSSxJQUUvRlUsRUFBUXJDLFFBQVEsU0FBQW5ILEdBQVMsT0FBQUEsRUFBTStGLE9BQU94QyxLQUN0Q3VFLEVBQU1YLFFBQVEsU0FBQW5ILEdBQVMsT0FBQUEsRUFBTStGLE9BQU94QyxLQUVwQ3VFLEVBQU1YLFFBQVEsU0FBQWxFLEdBQ05BLEVBQUtpRCxnQkFBZ0IrQyxLQUNyQkEsRUFBT2pDLE1BQU0vRCxHQUNiQSxFQUFLNkMsZUFFVDBELEVBQVFyQyxRQUFRLFNBQUFrRCxHQUNScEgsRUFBS2lELGdCQUFnQm1FLEtBQ3JCQSxFQUFNckQsTUFBTS9ELEdBQ1pBLEVBQUs2QyxtQkFJakI0RCxFQUFhdkMsUUFBUSxTQUFBbkgsR0FBUyxPQUFBQSxFQUFNK0YsT0FBT3hDLEtBekgzQ3dDLENBQU94QyxHQTZIUGlGLEVBQVk4QixVQUFVLEVBQUcsRUFBR3BKLEVBQU9DLEdBRW5DdUksRUFBYXZDLFFBQVEsU0FBQW5ILEdBQ2pCd0ksRUFBWStCLFVBQVl2SyxFQUFNb0csV0FDOUJvQyxFQUFZZ0MsU0FBU3hLLEVBQU0yQixFQUFHM0IsRUFBTTRCLEVBQUc1QixFQUFNOEIsV0FBWTlCLEVBQU0rQixlQUduRXlHLEVBQVlpQyxPQUNaakMsRUFBWStCLFVBQVl0QixFQUFPN0MsV0FDL0JvQyxFQUFZa0MsVUFBVXpCLEVBQU90SCxFQUFJLEdBQU1zSCxFQUFPbkgsV0FBWW1ILEVBQU9ySCxFQUFJLEdBQU1xSCxFQUFPbEgsYUFDbEZ5RyxFQUFZckUsT0FBT2xELEVBQUEwSixJQUFJMUIsRUFBT3pGLFdBQzlCZ0YsRUFBWWtDLFlBQVl6QixFQUFPdEgsRUFBSSxHQUFNc0gsRUFBT25ILGNBQWVtSCxFQUFPckgsRUFBSSxHQUFNcUgsRUFBT2xILGNBQ3ZGeUcsRUFBWWdDLFNBQVN2QixFQUFPdEgsRUFBR3NILEVBQU9ySCxFQUFHcUgsRUFBT25ILFdBQVltSCxFQUFPbEgsYUFDbkV5RyxFQUFZb0MsVUFFWnBCLEVBQVFyQyxRQUFRLFNBQUFuSCxHQUNad0ksRUFBWStCLFVBQVl2SyxFQUFNb0csV0FDOUJvQyxFQUFZZ0MsU0FBU3hLLEVBQU0yQixFQUFHM0IsRUFBTTRCLEVBQUc1QixFQUFNOEIsV0FBWTlCLEVBQU0rQixlQUduRStGLEVBQU1YLFFBQVEsU0FBQW5ILEdBQ1Z3SSxFQUFZK0IsVUFBWXZLLEVBQU1vRyxXQUM5Qm9DLEVBQVlnQyxTQUFTeEssRUFBTTJCLEVBQUczQixFQUFNNEIsRUFBRzVCLEVBQU04QixXQUFZOUIsRUFBTStCLGVBekluRWlILEVBQWE2QixLQUFLQyxNQUFNRCxLQUFLRSxVQUFVckMsSUFOdkNSLEVBQWFvQyxVQUFVLEVBQUcsRUFBR3BKLEVBQU9DLEdBQ3BDK0csRUFBYThDLFVBQVUxQyxFQUFZLEVBQUcsR0FDdEN3QixPQUFPRyxzQkFBc0JDLHFGQ2hhakMsSUFBQWUsRUFBQSxXQUNJLFNBQUFBLEVBQTJCdEosRUFBa0JDLEdBQWxCSCxLQUFBRSxJQUFrQkYsS0FBQUcsSUE0RWpELE9BekVrQnFKLEVBQUFsSCxLQUFkLFNBQW1CcEMsRUFBV0MsR0FDMUIsT0FBTyxJQUFJcUosRUFBT3RKLEVBQUdDLElBR1hxSixFQUFBaEgsVUFBZCxTQUF3QmtDLEdBQ3BCLE9BQU8sSUFBSThFLEVBQU85RSxFQUFNeEUsRUFBR3dFLEVBQU12RSxJQUd2QnFKLEVBQUFuRSxLQUFkLFdBQ0ksT0FBTyxJQUFJbUUsRUFBTyxFQUFHLElBR1hBLEVBQUFwRSxVQUFkLFNBQXdCcUUsRUFBbUJDLEdBQ3ZDLE9BQU8sSUFBSUYsRUFBT0MsRUFBWTFFLEtBQUs0RSxJQUFJVCxFQUFJUSxJQUFTRCxFQUFZMUUsS0FBSzZFLElBQUlWLEVBQUlRLEtBQVNoSCxRQUFRLEtBRzNGOEcsRUFBQXRLLFVBQUEySyxPQUFQLFdBQ0ksT0FBaUIsR0FBVjdKLEtBQUtFLEdBQW9CLEdBQVZGLEtBQUtHLEdBR3hCcUosRUFBQXRLLFVBQUF1SyxVQUFQLFdBQ0ksT0FBTzFFLEtBQUsrRSxLQUFLOUosS0FBS0UsRUFBSUYsS0FBS0UsRUFBSUYsS0FBS0csRUFBSUgsS0FBS0csSUFHdkNxSixFQUFBckUsSUFBZCxTQUFrQjRFLEVBQVdDLEdBQ3pCLE9BQU9SLEVBQU9oSCxVQUFVdUgsR0FBRzVFLElBQUk2RSxJQUc1QlIsRUFBQXRLLFVBQUFpRyxJQUFQLFNBQVdULEdBR1AsT0FGQTFFLEtBQUtFLEdBQUt3RSxFQUFNeEUsRUFDaEJGLEtBQUtHLEdBQUt1RSxFQUFNdkUsRUFDVEgsTUFHR3dKLEVBQUE5RyxPQUFkLFNBQXFCTixFQUFnQnNILEdBQ2pDLE9BQU9GLEVBQU9oSCxVQUFVSixHQUFRTSxPQUFPZ0gsSUFHcENGLEVBQUF0SyxVQUFBd0QsT0FBUCxTQUFjZ0gsR0FDVixJQUFJTyxFQUFPakssS0FBS0UsRUFHaEIsT0FGQUYsS0FBS0UsRUFBSUYsS0FBS0UsRUFBSTZFLEtBQUs0RSxJQUFJVCxFQUFJUSxJQUFVMUosS0FBS0csRUFBSTRFLEtBQUs2RSxJQUFJVixFQUFJUSxJQUMvRDFKLEtBQUtHLEVBQUk4SixFQUFPbEYsS0FBSzZFLElBQUlWLEVBQUlRLElBQVUxSixLQUFLRyxFQUFJNEUsS0FBSzRFLElBQUlULEVBQUlRLElBQ3REMUosTUFHR3dKLEVBQUF2RSxNQUFkLFNBQW9CN0MsRUFBZ0I4SCxHQUNoQyxPQUFPVixFQUFPaEgsVUFBVUosR0FBUTZDLE1BQU1pRixJQUduQ1YsRUFBQXRLLFVBQUErRixNQUFQLFNBQWFpRixHQUdULE9BRkFsSyxLQUFLRSxHQUFLZ0ssRUFDVmxLLEtBQUtHLEdBQUsrSixFQUNIbEssTUFHR3dKLEVBQUFXLFVBQWQsU0FBd0IvSCxHQUNwQixPQUFPb0gsRUFBT2hILFVBQVVKLEdBQVErSCxhQUc3QlgsRUFBQXRLLFVBQUFpTCxVQUFQLFdBQ0ksT0FBNEIsSUFBckJuSyxLQUFLeUosWUFBb0J6SixLQUFPQSxLQUFLaUYsTUFBTSxFQUFJakYsS0FBS3lKLGNBYW5FRCxFQTdFQSxHQW1GQSxTQUFnQk4sRUFBSW5LLEdBQ2hCLE9BQU9BLEdBQUtnRyxLQUFLcUYsR0FBSyxpQkFMMUJoTixFQUFBeUgsSUFBQSxTQUFvQjlGLEVBQVdyQixHQUMzQixPQUFTcUIsRUFBSXJCLEVBQUtBLEdBQUtBLEdBRzNCTixFQUFBOEwiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFZlY3Rvciwge21vZCwgcmFkfSBmcm9tIFwiLi92ZWN0b3JcIjtcclxuXHJcbmNvbnN0IFdJRFRIID0gODAwO1xyXG5jb25zdCBIRUlHSFQgPSA2MDA7XHJcbmNvbnN0IFJPVEFUSU9OX1NQRUVEID0gMC4yO1xyXG5jb25zdCBBQ0NfU1BFRUQgPSAwLjU7XHJcbmNvbnN0IERFQ0VMRVJBVElPTl9TUEVFRCA9IDAuMDg7XHJcbmNvbnN0IE1BWF9TUEVFRCA9IDg7XHJcblxyXG4vL3JlZ2lvbiBHYW1lT2JqZWN0IHBhcnRzXHJcbnR5cGUgQm91bnR5Q2FsbGJhY2sgPSAoZW5lbXk6IFVuaXQsIHNob3Q6IFNob3QsIHR5cGU6IEhpdFR5cGVFbnVtKSA9PiBhbnk7XHJcblxyXG5lbnVtIERlYXRoQ2F1c2VFbnVtIHtcclxuICAgIE9VVF9PRl9CT1VORFMsXHJcbiAgICBMSVZFU1xyXG59XHJcblxyXG5lbnVtIEhpdFR5cGVFbnVtIHtcclxuICAgIEhJVCxcclxuICAgIERFU1RST1lFRFxyXG59XHJcblxyXG5jbGFzcyBCb3VuZGFyeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbWluWDogbnVtYmVyLCBwdWJsaWMgbWluWTogbnVtYmVyLCBwdWJsaWMgbWF4WDogbnVtYmVyLCBwdWJsaWMgbWF4WTogbnVtYmVyKSB7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJbkJvdW5kcyh4OiBudW1iZXIsIHk6IG51bWJlciwgc2hhcGU6IFNoYXBlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHggPj0gdGhpcy5taW5YICYmIHkgPj0gdGhpcy5taW5ZICYmICh4ICsgc2hhcGUuZ2V0V2lkdGgoKSkgPD0gdGhpcy5tYXhYICYmICh5ICsgc2hhcGUuZ2V0SGVpZ2h0KCkpIDw9IHRoaXMubWF4WTtcclxuICAgIH1cclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgU2hhcGUge1xyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHB1YmxpYyBjb2xvcjogc3RyaW5nLCBwdWJsaWMgbWFzczogbnVtYmVyKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGdldFdpZHRoKCk6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0SGVpZ2h0KCk6IG51bWJlcjtcclxufVxyXG5cclxuY2xhc3MgUmVjdGFuZ2xlIGV4dGVuZHMgU2hhcGUge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHdpZHRoOiBudW1iZXIsIHB1YmxpYyBoZWlnaHQ6IG51bWJlciwgY29sb3I6IHN0cmluZywgbWFzczogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoY29sb3IsIG1hc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzSW5Cb3VuZHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIGJvdW5kYXJ5OiBCb3VuZGFyeSkge1xyXG4gICAgICAgIC8vVE9ET1xyXG4gICAgfVxyXG5cclxuICAgIGdldEhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhlaWdodFxyXG4gICAgfVxyXG5cclxuICAgIGdldFdpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGhcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ2lyY2xlIGV4dGVuZHMgU2hhcGUge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHJhZGl1czogbnVtYmVyLCBjb2xvcjogc3RyaW5nLCBtYXNzOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihjb2xvciwgbWFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJbkJvdW5kcyh4OiBudW1iZXIsIHk6IG51bWJlciwgYm91bmRhcnk6IEJvdW5kYXJ5KSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldEhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAyICogdGhpcy5yYWRpdXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0V2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gMiAqIHRoaXMucmFkaXVzO1xyXG4gICAgfVxyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBHYW1lT2JqZWN0VHlwZSB7XHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IocHVibGljIHNoYXBlOiBTaGFwZSwgcHVibGljIGJvdW5kYXJ5OiBCb3VuZGFyeSwgcHVibGljIG1vdmU6IE1vdmUpIHtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFVuaXRUeXBlIGV4dGVuZHMgR2FtZU9iamVjdFR5cGUge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIGxpdmVzOiBudW1iZXIsIHB1YmxpYyBzaG90RnJlcTogbnVtYmVyLCBzaGFwZTogU2hhcGUsIGJvdW5kYXJ5OiBCb3VuZGFyeSwgbW92ZTogTW92ZSwgcHVibGljIHNob3Q6IFNob3RUeXBlLCBwdWJsaWMgYm91bnRpZXM6IEJvdW50eUNhbGxiYWNrW10pIHtcclxuICAgICAgICBzdXBlcihzaGFwZSwgYm91bmRhcnksIG1vdmUpXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBTaG90VHlwZSBleHRlbmRzIEdhbWVPYmplY3RUeXBlIHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBkbWc6IG51bWJlciwgc2hhcGU6IFNoYXBlLCBib3VuZGFyeTogQm91bmRhcnksIG1vdmU6IE1vdmUpIHtcclxuICAgICAgICBzdXBlcihzaGFwZSwgYm91bmRhcnksIG1vdmUpXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEVudmlyb25tZW50VHlwZSBleHRlbmRzIEdhbWVPYmplY3RUeXBlIHtcclxuICAgIGNvbnN0cnVjdG9yKHNoYXBlOiBTaGFwZSwgYm91bmRhcnk6IEJvdW5kYXJ5LCBtb3ZlOiBNb3ZlKSB7XHJcbiAgICAgICAgc3VwZXIoc2hhcGUsIGJvdW5kYXJ5LCBtb3ZlKVxyXG4gICAgfVxyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBNb3ZlIHtcclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcigpIHtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlKGVsYXBzZWRUaW1lOiBudW1iZXIsIHJvdGF0aW9uOiBudW1iZXIgPSAwLCBzcGVlZDogbnVtYmVyID0gMCwgbW92ZVZlY3RvcjogVmVjdG9yID0gbnVsbCk6IFZlY3RvciB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEltcGxlbWVudGVkIVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBhYnN0cmFjdCBjb3B5KCk6IE1vdmU7XHJcbiAgICBhYnN0cmFjdCBzZXRSb3RhdGlvbihyb3RhdGlvbjogbnVtYmVyKTtcclxufVxyXG5cclxuY2xhc3MgQ29uc3RhbnRNb3ZlIGV4dGVuZHMgTW92ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdmVjdG9yOiBWZWN0b3IpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmUoZWxhcHNlZFRpbWU6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIHNwZWVkOiBudW1iZXIgPSAwLCBtb3ZlVmVjdG9yOiBWZWN0b3IgPSBudWxsKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmZyb20odGhpcy52ZWN0b3IueCAqIGVsYXBzZWRUaW1lLCB0aGlzLnZlY3Rvci55ICogZWxhcHNlZFRpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb3B5KCk6IE1vdmUge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29uc3RhbnRNb3ZlKFZlY3Rvci5mcm9tT3RoZXIodGhpcy52ZWN0b3IpKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHNldFJvdGF0aW9uKHJvdGF0aW9uOiBudW1iZXIpOiBNb3ZlIHtcclxuICAgICAgICB0aGlzLnZlY3Rvci5yb3RhdGUocm90YXRpb24pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBEeW5hbWljTW92ZSBleHRlbmRzIE1vdmUge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkZWNTcGVlZDogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlKGVsYXBzZWRUaW1lOiBudW1iZXIsIHJvdGF0aW9uOiBudW1iZXIsIHNwZWVkOiBudW1iZXIpOiBWZWN0b3Ige1xyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY29weSgpOiBNb3ZlIHtcclxuICAgICAgICByZXR1cm4gbmV3IER5bmFtaWNNb3ZlKHRoaXMuZGVjU3BlZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJvdGF0aW9uKHJvdGF0aW9uOiBudW1iZXIpIHtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgU2hhcGVFbnVtID0ge1xyXG4gICAgUExBWUVSOiBuZXcgUmVjdGFuZ2xlKDIwLCAzNSwgXCIjNmE3ZmVkXCIsIDApLFxyXG4gICAgRU5FTVk6IG5ldyBSZWN0YW5nbGUoNDUsIDUwLCBcIiNmZjAwMDBcIiwgMCksXHJcbiAgICBTSE9UOiBuZXcgUmVjdGFuZ2xlKDUsIDUsIFwiI2ZmZmZmZlwiLCAwKSxcclxuICAgIEhFQUxUSF9FTkVNWTogbmV3IFJlY3RhbmdsZSg0NSwgNTAsIFwiIzkxZmY2ZlwiLCAwKSxcclxuICAgIEJJR19PTkU6IG5ldyBSZWN0YW5nbGUoNjAsIDYwLCBcIiNmZmJiMDBcIiwgMCksXHJcbiAgICBGQVNUX09ORTogbmV3IFJlY3RhbmdsZSg0MCwgNDAsIFwiI2Y1YTNmZlwiLCAwKSxcclxuICAgIENMT1VEOiBuZXcgUmVjdGFuZ2xlKDE1MCwgMTUwLCBcIiMwYTFlM2FcIiwgMClcclxufTtcclxuXHJcbmNvbnN0IEJvdW5kYXJ5RW51bSA9IHtcclxuICAgIE5PTkU6IG5ldyBCb3VuZGFyeShOdW1iZXIuTUlOX1ZBTFVFLCBOdW1iZXIuTUlOX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKSxcclxuICAgIFNIT1Q6IG5ldyBCb3VuZGFyeSgwLCAwLCBXSURUSCwgSEVJR0hUKSxcclxuICAgIENMT1VEOiBuZXcgQm91bmRhcnkoLVNoYXBlRW51bS5DTE9VRC53aWR0aCwgLVNoYXBlRW51bS5DTE9VRC5oZWlnaHQsIFdJRFRIICsgU2hhcGVFbnVtLkNMT1VELndpZHRoLCBIRUlHSFQgKyBTaGFwZUVudW0uQ0xPVUQuaGVpZ2h0KVxyXG59O1xyXG5cclxuY29uc3QgQm91bnR5RW51bSA9IHtcclxuICAgIFNDT1JFX1NUOiAoZW5lbXk6IFVuaXQsIHNob3Q6IEdhbWVPYmplY3QsIHR5cGU6IEhpdFR5cGVFbnVtKSA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gSGl0VHlwZUVudW0uREVTVFJPWUVEKVxyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoMTApO1xyXG4gICAgfSxcclxuICAgIEhFQUxUSF9TVDogKGVuZW15OiBVbml0LCBzaG90OiBHYW1lT2JqZWN0LCB0eXBlOiBIaXRUeXBlRW51bSkgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlID09IEhpdFR5cGVFbnVtLkRFU1RST1lFRClcclxuICAgICAgICAgICAgdXBkYXRlU3RhdHVzKDAsIDEpO1xyXG4gICAgfSxcclxuICAgIFNDT1JFX0ZBU1Q6IChlbmVteTogVW5pdCwgc2hvdDogR2FtZU9iamVjdCwgdHlwZTogSGl0VHlwZUVudW0pID0+IHtcclxuICAgICAgICBpZiAodHlwZSA9PSBIaXRUeXBlRW51bS5ISVQpXHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygyMCk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gSGl0VHlwZUVudW0uREVTVFJPWUVEKVxyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoNTApO1xyXG4gICAgfSxcclxuICAgIFNDT1JFXzMwOiAoZW5lbXk6IFVuaXQsIHNob3Q6IEdhbWVPYmplY3QsIHR5cGU6IEhpdFR5cGVFbnVtKSA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gSGl0VHlwZUVudW0uREVTVFJPWUVEKVxyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoMzApO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgTW92ZVR5cGVFbnVtID0ge1xyXG4gICAgUExBWUVSOiBuZXcgRHluYW1pY01vdmUoREVDRUxFUkFUSU9OX1NQRUVEKSxcclxuICAgIEVORU1ZX1NJTVBMRTogbmV3IENvbnN0YW50TW92ZShWZWN0b3IuZnJvbSgwLCAwLjEpKSxcclxuICAgIFBMQVlFUl9TSE9UOiBuZXcgQ29uc3RhbnRNb3ZlKFZlY3Rvci5mcm9tKDAsIC0wLjUpKSxcclxuICAgIEVORU1ZX1NIT1Q6IG5ldyBDb25zdGFudE1vdmUoVmVjdG9yLmZyb20oMCwgMC40KSksXHJcbiAgICBDTE9VRDogbmV3IENvbnN0YW50TW92ZShWZWN0b3IuZnJvbSgwLCAwLjA1KSlcclxufTtcclxuXHJcbmNvbnN0IFNob3RUeXBlRW51bSA9IHtcclxuICAgIFBMQVlFUjogbmV3IFNob3RUeXBlKDEsIFNoYXBlRW51bS5TSE9ULCBCb3VuZGFyeUVudW0uU0hPVCwgTW92ZVR5cGVFbnVtLlBMQVlFUl9TSE9UKSxcclxuICAgIEVORU1ZOiBuZXcgU2hvdFR5cGUoMSwgU2hhcGVFbnVtLlNIT1QsIEJvdW5kYXJ5RW51bS5TSE9ULCBNb3ZlVHlwZUVudW0uRU5FTVlfU0hPVClcclxufTtcclxuXHJcbmNvbnN0IFVuaXRUeXBlRW51bSA9IHtcclxuICAgIFBMQVlFUjogbmV3IFVuaXRUeXBlKDMsIDAsIFNoYXBlRW51bS5QTEFZRVIsIEJvdW5kYXJ5RW51bS5OT05FLCBNb3ZlVHlwZUVudW0uUExBWUVSLCBTaG90VHlwZUVudW0uUExBWUVSLCBbXSksXHJcbn07XHJcblxyXG5jb25zdCBFbnZpcm9ubWVudFR5cGVFbnVtID0ge1xyXG4gICAgQ0xPVUQ6IG5ldyBFbnZpcm9ubWVudFR5cGUoU2hhcGVFbnVtLkNMT1VELCBCb3VuZGFyeUVudW0uQ0xPVUQsIE1vdmVUeXBlRW51bS5DTE9VRClcclxufTtcclxuXHJcbi8vZW5kcmVnaW9uXHJcblxyXG4vL3JlZ2lvbiBHYW1lT2JqZWN0c1xyXG50eXBlIEhpdENhbGxiYWNrID0gKG90aGVyOiBHYW1lT2JqZWN0KSA9PiBhbnk7XHJcbnR5cGUgRGVzdHJveWVkQ2FsbGJhY2sgPSAoY2F1c2U6IERlYXRoQ2F1c2VFbnVtKSA9PiBhbnk7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBHYW1lT2JqZWN0IHtcclxuICAgIHB1YmxpYyByb3RhdGlvbjogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBtb3ZlOiBNb3ZlID0gbnVsbDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3BlZWQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHB1YmxpYyBpZDogbnVtYmVyLCBwdWJsaWMgdHlwZTogR2FtZU9iamVjdFR5cGUsIHB1YmxpYyB4OiBudW1iZXIsIHB1YmxpYyB5OiBudW1iZXIsIHB1YmxpYyByb3Q6IG51bWJlciwgcHVibGljIG9uRGVzdHJveWVkOiBEZXN0cm95ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMubW92ZSA9IHR5cGUubW92ZS5jb3B5KCkuc2V0Um90YXRpb24ocm90KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoZWxhcHNlZFRpbWU6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIG1vdmVtZW50OiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBsZXQgbW92ZSA9IHRoaXMubW92ZS5tb3ZlKGVsYXBzZWRUaW1lKTtcclxuICAgICAgICBpZiAodGhpcy50eXBlLmJvdW5kYXJ5LmlzSW5Cb3VuZHModGhpcy54ICsgbW92ZS54LCB0aGlzLnkgKyBtb3ZlLnksIHRoaXMudHlwZS5zaGFwZSkpIHtcclxuICAgICAgICAgICAgdGhpcy54ICs9IG1vdmUueDtcclxuICAgICAgICAgICAgdGhpcy55ICs9IG1vdmUueTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSAhPSBVbml0VHlwZUVudW0uUExBWUVSKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25EZXN0cm95ZWQoRGVhdGhDYXVzZUVudW0uT1VUX09GX0JPVU5EUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzQ29sbGlkaW5nV2l0aChvdGhlcjogR2FtZU9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vVE9ET1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvL3JlZ2lvbiBIZWxwZXIgTWV0aG9kc1xyXG4gICAgcHVibGljIGdldFdpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5zaGFwZS5nZXRXaWR0aCgpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUuc2hhcGUuZ2V0SGVpZ2h0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvbG9yKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5zaGFwZS5jb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICAvL2VuZHJlZ2lvblxyXG59XHJcblxyXG5jbGFzcyBVbml0IGV4dGVuZHMgR2FtZU9iamVjdCB7XHJcbiAgICBwdWJsaWMgbW92ZVZlY3RvcjogVmVjdG9yID0gVmVjdG9yLnplcm8oKTtcclxuXHJcbiAgICBwdWJsaWMgb25IaXQ6IEhpdENhbGxiYWNrID0gb3RoZXIgPT4ge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFNob3QpIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyLmluaXRpYXRvciA9PSB0aGlzLnR5cGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMudHlwZS5ib3VudGllcy5mb3JFYWNoKGJvdW50eSA9PiB7XHJcbiAgICAgICAgICAgICAgICBib3VudHkodGhpcywgb3RoZXIsIEhpdFR5cGVFbnVtLkhJVClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubGl2ZXMgLT0gb3RoZXIudHlwZS5kbWc7XHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxpdmVzLS07XHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubGl2ZXMgPCAxKVxyXG4gICAgICAgICAgICB0aGlzLm9uRGVzdHJveWVkKERlYXRoQ2F1c2VFbnVtLkxJVkVTKTtcclxuICAgIH07XHJcbiAgICBwdWJsaWMgbGl2ZXM6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwdWJsaWMgdHlwZTogVW5pdFR5cGUsIHg6IG51bWJlciwgeTogbnVtYmVyLCByb3Q6IG51bWJlciwgb25EZXN0cm95ZWQ6IERlc3Ryb3llZENhbGxiYWNrKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHR5cGUsIHgsIHksIHJvdCwgb25EZXN0cm95ZWQpO1xyXG4gICAgICAgIHRoaXMubGl2ZXMgPSB0eXBlLmxpdmVzO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQWxpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGl2ZXMgPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlzSW5Cb3VuZHMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5ib3VuZGFyeS5pc0luQm91bmRzKHRoaXMueCwgdGhpcy55LCB0aGlzLnR5cGUuc2hhcGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShlbGFwc2VkVGltZTogbnVtYmVyLCByb3RhdGlvbjogbnVtYmVyID0gMCwgbW92ZW1lbnQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShlbGFwc2VkVGltZSwgcm90YXRpb24sIG1vdmVtZW50KTtcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBVbml0VHlwZUVudW0uUExBWUVSKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLnR5cGUuc2hvdEZyZXEpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvb3QoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG9vdCgpOiBTaG90IHtcclxuICAgICAgICBsZXQgaWQgPSBzaG90SWRDb3VudGVyO1xyXG4gICAgICAgIGxldCBzaG90ID0gbmV3IFNob3QoaWQsIHRoaXMudHlwZSwgdGhpcy50eXBlLnNob3QsIHRoaXMueCArIHRoaXMuZ2V0V2lkdGgoKSAvIDIsIHRoaXMueSwgdGhpcy5yb3RhdGlvbiwgKGNhdXNlOiBEZWF0aENhdXNlRW51bSkgPT4ge1xyXG4gICAgICAgICAgICBzaG90cy5kZWxldGUoaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNob3RzLnNldChpZCwgc2hvdCk7XHJcbiAgICAgICAgc2hvdElkQ291bnRlcisrO1xyXG4gICAgICAgIHJldHVybiBzaG90O1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQbGF5ZXIgZXh0ZW5kcyBVbml0IHtcclxuICAgIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIHB1YmxpYyB0eXBlOiBVbml0VHlwZSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHJvdDogbnVtYmVyLCBvbkRlc3Ryb3llZDogRGVzdHJveWVkQ2FsbGJhY2spIHtcclxuICAgICAgICBzdXBlcihpZCwgdHlwZSwgeCwgeSwgcm90LCBvbkRlc3Ryb3llZCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGVsYXBzZWRUaW1lOiBudW1iZXIsIHJvdGF0aW9uOiBudW1iZXIgPSAwLCBtb3ZlbWVudDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IG1vZCh0aGlzLnJvdGF0aW9uICsgcm90YXRpb24gKiBST1RBVElPTl9TUEVFRCAqIGVsYXBzZWRUaW1lLCAzNjApO1xyXG4gICAgICAgIGxldCBvbGRTcGVlZCA9IHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IE1hdGgubWF4KDAsIHRoaXMuc3BlZWQgLSBERUNFTEVSQVRJT05fU1BFRUQpO1xyXG4gICAgICAgIHRoaXMubW92ZVZlY3Rvci5zY2FsZShvbGRTcGVlZCA9PT0gMCA/IDEgOnRoaXMuc3BlZWQgLyBvbGRTcGVlZCk7XHJcbiAgICAgICAgb2xkU3BlZWQgPSB0aGlzLnNwZWVkO1xyXG5cclxuICAgICAgICBpZiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGVlZCA9IE1hdGgubWluKE1BWF9TUEVFRCwgdGhpcy5zcGVlZCArIEFDQ19TUEVFRCk7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZVZlY3Rvci5hZGQoVmVjdG9yLmNvbnN0cnVjdCh0aGlzLnNwZWVkIC0gb2xkU3BlZWQsIHRoaXMucm90YXRpb24pKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3BlZWQgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlVmVjdG9yID0gVmVjdG9yLnplcm8oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMueCA9IG1vZCh0aGlzLnggKyB0aGlzLm1vdmVWZWN0b3IueCwgV0lEVEgpO1xyXG4gICAgICAgIHRoaXMueSA9IG1vZCh0aGlzLnkgKyB0aGlzLm1vdmVWZWN0b3IueSwgSEVJR0hUKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgU2hvdCBleHRlbmRzIEdhbWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgcHVibGljIGluaXRpYXRvcjogVW5pdFR5cGUsIHB1YmxpYyB0eXBlOiBTaG90VHlwZSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHJvdDogbnVtYmVyLCBvbkRlc3Ryb3llZDogRGVzdHJveWVkQ2FsbGJhY2spIHtcclxuICAgICAgICBzdXBlcihpZCwgdHlwZSwgeCwgeSwgcm90LCBvbkRlc3Ryb3llZCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDb2xsaWRpbmdXaXRoKG90aGVyOiBHYW1lT2JqZWN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmlzQ29sbGlkaW5nV2l0aChvdGhlcikgJiYgdGhpcy5pbml0aWF0b3IgIT09IG90aGVyLnR5cGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEVudmlyb25tZW50IGV4dGVuZHMgR2FtZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCB0eXBlOiBFbnZpcm9ubWVudFR5cGUsIHg6IG51bWJlciwgeTogbnVtYmVyLCByb3Q6IG51bWJlciwgb25EZXN0cm95ZWQ6IERlc3Ryb3llZENhbGxiYWNrKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHR5cGUsIHgsIHksIHJvdCwgb25EZXN0cm95ZWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vL2VuZHJlZ2lvblxyXG5cclxudmFyIGZyb250Q2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcclxudmFyIGZyb250Q29udGV4dCA9IGZyb250Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbnZhciBiYWNrQ2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG5iYWNrQ2FudmFzLndpZHRoID0gV0lEVEg7XHJcbmJhY2tDYW52YXMuaGVpZ2h0ID0gSEVJR0hUO1xyXG52YXIgYmFja0NvbnRleHQgPSBiYWNrQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbnZhciBzdGFydCA9IG51bGw7XHJcbnZhciBjdXJyZW50SW5wdXQgPSB7XHJcbiAgICBzcGFjZTogZmFsc2UsXHJcbiAgICBsZWZ0OiBmYWxzZSxcclxuICAgIHJpZ2h0OiBmYWxzZSxcclxuICAgIHVwOiBmYWxzZSxcclxuICAgIGRvd246IGZhbHNlXHJcbn07XHJcbnZhciBwcmlvcklucHV0ID0ge1xyXG4gICAgc3BhY2U6IGZhbHNlLFxyXG4gICAgbGVmdDogZmFsc2UsXHJcbiAgICByaWdodDogZmFsc2UsXHJcbiAgICB1cDogZmFsc2UsXHJcbiAgICBkb3duOiBmYWxzZVxyXG59O1xyXG5cclxudmFyIHBsYXllciA9IG5ldyBQbGF5ZXIoMCwgVW5pdFR5cGVFbnVtLlBMQVlFUiwgMCwgMCwgMCwgKCkgPT4ge1xyXG4gICAgZW5kR2FtZSgpO1xyXG59KTtcclxucGxheWVyLnggPSBXSURUSCAvIDIgLSBwbGF5ZXIuZ2V0V2lkdGgoKSAvIDI7XHJcbnBsYXllci55ID0gSEVJR0hUIC0gcGxheWVyLmdldEhlaWdodCgpO1xyXG52YXIgc2NvcmUgPSAwO1xyXG52YXIgc2NvcmVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY29yZV90ZXh0XCIpO1xyXG52YXIgbGl2ZXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXZlc190ZXh0XCIpO1xyXG5cclxudmFyIGVuZW15VGltZVRvU3Bhd24gPSAwO1xyXG52YXIgZW5lbXlJZENvdW50ZXIgPSAwO1xyXG52YXIgc2hvdElkQ291bnRlciA9IDA7XHJcbnZhciBlbnZpcm9ubWVudElkQ291bnRlciA9IDA7XHJcbi8vIEB0cy1pZ25vcmVcclxudmFyIGVuZW1pZXMgPSBuZXcgTWFwPG51bWJlciwgVW5pdD4oKTtcclxuLy8gQHRzLWlnbm9yZVxyXG52YXIgc2hvdHMgPSBuZXcgTWFwPG51bWJlciwgU2hvdD4oKTtcclxuLy8gQHRzLWlnbm9yZVxyXG52YXIgZW52aXJvbm1lbnRzID0gbmV3IE1hcDxudW1iZXIsIEVudmlyb25tZW50PigpO1xyXG52YXIgcnVubmluZzogYm9vbGVhbiA9IHRydWU7XHJcblxyXG5mdW5jdGlvbiBsb29wKHRpbWVzdGFtcCkge1xyXG4gICAgaWYgKCFydW5uaW5nKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGlmICghc3RhcnQpIHN0YXJ0ID0gdGltZXN0YW1wO1xyXG4gICAgbGV0IGVsYXBzZWRUaW1lID0gdGltZXN0YW1wIC0gc3RhcnQ7XHJcbiAgICBzdGFydCA9IHRpbWVzdGFtcDtcclxuXHJcbiAgICBjcmVhdGVFbmVteShlbGFwc2VkVGltZSk7XHJcbiAgICBjcmVhdGVFbnZpcm9ubWVudCgpO1xyXG4gICAgdXBkYXRlKGVsYXBzZWRUaW1lKTtcclxuICAgIHJlbmRlcihlbGFwc2VkVGltZSk7XHJcbiAgICBwb2xsSW5wdXQoKTtcclxuXHJcbiAgICBmcm9udENvbnRleHQuY2xlYXJSZWN0KDAsIDAsIFdJRFRILCBIRUlHSFQpO1xyXG4gICAgZnJvbnRDb250ZXh0LmRyYXdJbWFnZShiYWNrQ2FudmFzLCAwLCAwKTtcclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcClcclxufVxyXG5cclxuZnVuY3Rpb24gcG9sbElucHV0KCkge1xyXG4gICAgcHJpb3JJbnB1dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3VycmVudElucHV0KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUtleWRvd24oZXZlbnQpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XHJcbiAgICAgICAgY2FzZSAnICc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnB1dC5zcGFjZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxyXG4gICAgICAgIGNhc2UgJ3cnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQudXAgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxyXG4gICAgICAgIGNhc2UgJ2EnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQubGVmdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxyXG4gICAgICAgIGNhc2UgJ2QnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQucmlnaHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlkb3duKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUtleXVwKGV2ZW50KSB7XHJcbiAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xyXG4gICAgICAgIGNhc2UgJyAnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQuc3BhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6XHJcbiAgICAgICAgY2FzZSAndyc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnB1dC51cCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxyXG4gICAgICAgIGNhc2UgJ2EnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQubGVmdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcclxuICAgICAgICBjYXNlICdkJzpcclxuICAgICAgICAgICAgY3VycmVudElucHV0LnJpZ2h0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBoYW5kbGVLZXl1cCk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFbmVteShlbGFwc2VkVGltZTogbnVtYmVyKSB7XHJcbiAgICAvLyBlbmVteVRpbWVUb1NwYXduICs9IGVsYXBzZWRUaW1lO1xyXG4gICAgLy8gaWYgKGVuZW15VGltZVRvU3Bhd24gPiBFTkVNWV9TUEFXTl9SQVRFKSB7XHJcbiAgICAvLyAgICAgZW5lbXlUaW1lVG9TcGF3biA9IDA7XHJcbiAgICAvLyAgICAgaWYgKE1hdGgucmFuZG9tKCkgKiBFTkVNWV9TUEFXTl9QUk9CQUJJTElUWSA8IDEpIHtcclxuICAgIC8vICAgICAgICAgbGV0IGlkID0gZW5lbXlJZENvdW50ZXI7XHJcbiAgICAvLyAgICAgICAgIGxldCB0eXBlID0gVW5pdFR5cGVFbnVtLkVORU1ZO1xyXG4gICAgLy8gICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwKSkge1xyXG4gICAgLy8gICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgLy8gICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgLy8gICAgICAgICAgICAgICAgIHR5cGUgPSBVbml0VHlwZUVudW0uSEVBTFRIX0VORU1ZO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgLy8gICAgICAgICAgICAgICAgIHR5cGUgPSBVbml0VHlwZUVudW0uQklHX09ORTtcclxuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIC8vICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgIC8vICAgICAgICAgICAgICAgICB0eXBlID0gVW5pdFR5cGVFbnVtLkZBU1RfT05FO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIGVuZW1pZXMuc2V0KGlkLCBuZXcgVW5pdChpZCwgdHlwZSwgTWF0aC5yYW5kb20oKSAqIChXSURUSCAtIFNoYXBlRW51bS5FTkVNWS53aWR0aCksIC1TaGFwZUVudW0uRU5FTVkuaGVpZ2h0LCBmdW5jdGlvbiAoY2F1c2U6IERlYXRoQ2F1c2VFbnVtKSB7XHJcbiAgICAvLyAgICAgICAgICAgICBpZiAoY2F1c2UgPT0gRGVhdGhDYXVzZUVudW0uT1VUX09GX0JPVU5EUykge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIHBsYXllci5vbkhpdCh0aGlzKTtcclxuICAgIC8vICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F1c2UgPT0gRGVhdGhDYXVzZUVudW0uTElWRVMpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLnR5cGUuYm91bnRpZXMuZm9yRWFjaChib3VudHkgPT4gYm91bnR5KHRoaXMsIG51bGwsIEhpdFR5cGVFbnVtLkRFU1RST1lFRCkpO1xyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICAgICAgZW5lbWllcy5kZWxldGUoaWQpO1xyXG4gICAgLy8gICAgICAgICB9KSk7XHJcbiAgICAvLyAgICAgICAgIGVuZW15SWRDb3VudGVyKys7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFbnZpcm9ubWVudCgpIHtcclxuICAgIHN3aXRjaCAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSkge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgbGV0IGlkID0gZW52aXJvbm1lbnRJZENvdW50ZXI7XHJcbiAgICAgICAgICAgIGVudmlyb25tZW50cy5zZXQoaWQsIG5ldyBFbnZpcm9ubWVudChpZCwgRW52aXJvbm1lbnRUeXBlRW51bS5DTE9VRCwgTWF0aC5yYW5kb20oKSAqIFdJRFRILCAtRW52aXJvbm1lbnRUeXBlRW51bS5DTE9VRC5zaGFwZS5nZXRIZWlnaHQoKSwgMCwgZnVuY3Rpb24gKGNhdXNlOiBEZWF0aENhdXNlRW51bSkge1xyXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnRzLmRlbGV0ZSh0aGlzLmlkKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBlbnZpcm9ubWVudElkQ291bnRlcisrO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGUoZWxhcHNlZFRpbWU6IG51bWJlcikge1xyXG4gICAgaWYgKGN1cnJlbnRJbnB1dC5zcGFjZSAmJiAhcHJpb3JJbnB1dC5zcGFjZSkge1xyXG4gICAgICAgIHBsYXllci5zaG9vdCgpO1xyXG4gICAgfVxyXG4gICAgcGxheWVyLnVwZGF0ZShlbGFwc2VkVGltZSwgY3VycmVudElucHV0LmxlZnQgPyAtMSA6IChjdXJyZW50SW5wdXQucmlnaHQgPyAxIDogMCksIGN1cnJlbnRJbnB1dC51cCk7XHJcblxyXG4gICAgZW5lbWllcy5mb3JFYWNoKHZhbHVlID0+IHZhbHVlLnVwZGF0ZShlbGFwc2VkVGltZSkpO1xyXG4gICAgc2hvdHMuZm9yRWFjaCh2YWx1ZSA9PiB2YWx1ZS51cGRhdGUoZWxhcHNlZFRpbWUpKTtcclxuXHJcbiAgICBzaG90cy5mb3JFYWNoKHNob3QgPT4ge1xyXG4gICAgICAgIGlmIChzaG90LmlzQ29sbGlkaW5nV2l0aChwbGF5ZXIpKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5vbkhpdChzaG90KTtcclxuICAgICAgICAgICAgc2hvdC5vbkRlc3Ryb3llZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbmVtaWVzLmZvckVhY2goZW5lbXkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2hvdC5pc0NvbGxpZGluZ1dpdGgoZW5lbXkpKSB7XHJcbiAgICAgICAgICAgICAgICBlbmVteS5vbkhpdChzaG90KTtcclxuICAgICAgICAgICAgICAgIHNob3Qub25EZXN0cm95ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxuICAgIGVudmlyb25tZW50cy5mb3JFYWNoKHZhbHVlID0+IHZhbHVlLnVwZGF0ZShlbGFwc2VkVGltZSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoZWxhcHNlZFRpbWU6IG51bWJlcikge1xyXG4gICAgYmFja0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIFdJRFRILCBIRUlHSFQpO1xyXG5cclxuICAgIGVudmlyb25tZW50cy5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICBiYWNrQ29udGV4dC5maWxsU3R5bGUgPSB2YWx1ZS5nZXRDb2xvcigpO1xyXG4gICAgICAgIGJhY2tDb250ZXh0LmZpbGxSZWN0KHZhbHVlLngsIHZhbHVlLnksIHZhbHVlLmdldFdpZHRoKCksIHZhbHVlLmdldEhlaWdodCgpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGJhY2tDb250ZXh0LnNhdmUoKTtcclxuICAgIGJhY2tDb250ZXh0LmZpbGxTdHlsZSA9IHBsYXllci5nZXRDb2xvcigpO1xyXG4gICAgYmFja0NvbnRleHQudHJhbnNsYXRlKHBsYXllci54ICsgMC41ICogcGxheWVyLmdldFdpZHRoKCksIHBsYXllci55ICsgMC41ICogcGxheWVyLmdldEhlaWdodCgpKTtcclxuICAgIGJhY2tDb250ZXh0LnJvdGF0ZShyYWQocGxheWVyLnJvdGF0aW9uKSk7XHJcbiAgICBiYWNrQ29udGV4dC50cmFuc2xhdGUoLShwbGF5ZXIueCArIDAuNSAqIHBsYXllci5nZXRXaWR0aCgpKSwgLShwbGF5ZXIueSArIDAuNSAqIHBsYXllci5nZXRIZWlnaHQoKSkpO1xyXG4gICAgYmFja0NvbnRleHQuZmlsbFJlY3QocGxheWVyLngsIHBsYXllci55LCBwbGF5ZXIuZ2V0V2lkdGgoKSwgcGxheWVyLmdldEhlaWdodCgpKTtcclxuICAgIGJhY2tDb250ZXh0LnJlc3RvcmUoKTtcclxuXHJcbiAgICBlbmVtaWVzLmZvckVhY2godmFsdWUgPT4ge1xyXG4gICAgICAgIGJhY2tDb250ZXh0LmZpbGxTdHlsZSA9IHZhbHVlLmdldENvbG9yKCk7XHJcbiAgICAgICAgYmFja0NvbnRleHQuZmlsbFJlY3QodmFsdWUueCwgdmFsdWUueSwgdmFsdWUuZ2V0V2lkdGgoKSwgdmFsdWUuZ2V0SGVpZ2h0KCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2hvdHMuZm9yRWFjaCh2YWx1ZSA9PiB7XHJcbiAgICAgICAgYmFja0NvbnRleHQuZmlsbFN0eWxlID0gdmFsdWUuZ2V0Q29sb3IoKTtcclxuICAgICAgICBiYWNrQ29udGV4dC5maWxsUmVjdCh2YWx1ZS54LCB2YWx1ZS55LCB2YWx1ZS5nZXRXaWR0aCgpLCB2YWx1ZS5nZXRIZWlnaHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlU3RhdHVzKHNjb3JlRGVsdGE6IG51bWJlciwgaGVhbHRoRGVsdGE6IG51bWJlciA9IDApIHtcclxuICAgIHNjb3JlICs9IHNjb3JlRGVsdGE7XHJcbiAgICBwbGF5ZXIubGl2ZXMgKz0gaGVhbHRoRGVsdGE7XHJcbiAgICBzY29yZUVsZW1lbnQuaW5uZXJUZXh0ID0gXCJcIiArIHNjb3JlO1xyXG4gICAgbGl2ZXNFbGVtZW50LmlubmVyVGV4dCA9IFwiXCIgKyBwbGF5ZXIubGl2ZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuZEdhbWUoKSB7XHJcbiAgICBydW5uaW5nID0gZmFsc2U7XHJcbiAgICBhbGVydChcIkdhbWUgb3ZlciFcIik7XHJcbn1cclxuXHJcbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yIHtcclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IocHVibGljIHg6IG51bWJlciwgcHVibGljIHk6IG51bWJlciwgLypwcml2YXRlIG1vZFg6IG51bWJlciwgcHJpdmF0ZSBtb2RZOiBudW1iZXIqLykge1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbSh4OiBudW1iZXIsIHk6IG51bWJlci8qLCBtb2RYOiBudW1iZXIsIG1vZFk6IG51bWJlciovKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih4LCB5LyosIG1vZFgsIG1vZFkqLyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBmcm9tT3RoZXIob3RoZXI6IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3Iob3RoZXIueCwgb3RoZXIueS8qLCBvdGhlci5tb2RYLCBvdGhlci5tb2RZKi8pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgemVybygvKm1vZFg6IG51bWJlciwgbW9kWTogbnVtYmVyKi8pOiBWZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKDAsIDAvKiwgbW9kWCwgbW9kWSovKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbnN0cnVjdChtYWduaXR1ZGU6IG51bWJlciwgYW5nbGU6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IobWFnbml0dWRlICogTWF0aC5jb3MocmFkKGFuZ2xlKSksIG1hZ25pdHVkZSAqIE1hdGguc2luKHJhZChhbmdsZSkpKS5yb3RhdGUoLTkwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNaZXJvKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggPT0gMCAmJiB0aGlzLnkgPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbWFnbml0dWRlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkKGE6IFZlY3RvciwgYjogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmZyb21PdGhlcihhKS5hZGQoYik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZChvdGhlcjogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICB0aGlzLnggKz0gb3RoZXIueDtcclxuICAgICAgICB0aGlzLnkgKz0gb3RoZXIueTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJvdGF0ZSh2ZWN0b3I6IFZlY3RvciwgYW5nbGU6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5mcm9tT3RoZXIodmVjdG9yKS5yb3RhdGUoYW5nbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByb3RhdGUoYW5nbGU6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgbGV0IG9sZFggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy54ICogTWF0aC5jb3MocmFkKGFuZ2xlKSkgLSB0aGlzLnkgKiBNYXRoLnNpbihyYWQoYW5nbGUpKTtcclxuICAgICAgICB0aGlzLnkgPSBvbGRYICogTWF0aC5zaW4ocmFkKGFuZ2xlKSkgKyB0aGlzLnkgKiBNYXRoLmNvcyhyYWQoYW5nbGUpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHNjYWxlKHZlY3RvcjogVmVjdG9yLCBzY2FsYXI6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5mcm9tT3RoZXIodmVjdG9yKS5zY2FsZShzY2FsYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY2FsZShzY2FsYXI6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgdGhpcy54ICo9IHNjYWxhcjtcclxuICAgICAgICB0aGlzLnkgKj0gc2NhbGFyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbm9ybWFsaXplKHZlY3RvcjogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmZyb21PdGhlcih2ZWN0b3IpLm5vcm1hbGl6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBub3JtYWxpemUoKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYWduaXR1ZGUoKSA9PT0gMCA/IHRoaXMgOiB0aGlzLnNjYWxlKDEgLyB0aGlzLm1hZ25pdHVkZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIG1vZCh2ZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAvLyAgICAgcmV0dXJuIFZlY3Rvci5mcm9tT3RoZXIodmVjdG9yKS5tb2QoKTtcclxuICAgIC8vIH1cclxuICAgIC8vXHJcbiAgICAvLyBwdWJsaWMgbW9kKCk6IFZlY3RvciB7XHJcbiAgICAvLyAgICAgdGhpcy54ID0gbW9kKHRoaXMueCwgdGhpcy5tb2RYKTtcclxuICAgIC8vICAgICB0aGlzLnkgPSBtb2QodGhpcy55LCB0aGlzLm1vZFkpO1xyXG4gICAgLy8gICAgIHJldHVybiB0aGlzO1xyXG4gICAgLy8gfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1vZChuOiBudW1iZXIsIG06IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gKChuICUgbSkgKyBtKSAlIG07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByYWQobjogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBuICogKE1hdGguUEkgLyAxODApO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==