!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o,r,s=n(1),u=800,h=600;!function(t){t[t.OUT_OF_BOUNDS=0]="OUT_OF_BOUNDS",t[t.LIVES=1]="LIVES"}(o||(o={})),function(t){t[t.HIT=0]="HIT",t[t.DESTROYED=1]="DESTROYED"}(r||(r={}));var c=function(){function t(t,e,n,i){this.minX=t,this.minY=e,this.maxX=n,this.maxY=i}return t.prototype.isInBounds=function(t,e,n){return t>=this.minX&&e>=this.minY&&t+n.getWidth()<=this.maxX&&e+n.getHeight()<=this.maxY},t}(),a=function(){return function(t,e){this.color=t,this.mass=e}}(),f=function(t){function e(e,n,i,o){var r=t.call(this,i,o)||this;return r.width=e,r.height=n,r}return i(e,t),e.prototype.isInBounds=function(t,e,n){},e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e}(a),p=(function(t){function e(e,n,i){var o=t.call(this,n,i)||this;return o.radius=e,o}i(e,t),e.prototype.isInBounds=function(t,e,n){},e.prototype.getHeight=function(){return 2*this.radius},e.prototype.getWidth=function(){return 2*this.radius}}(a),function(){return function(t,e,n){this.shape=t,this.boundary=e,this.move=n}}()),d=function(t){function e(e,n,i,o,r,s,u){var h=t.call(this,i,o,r)||this;return h.lives=e,h.shotFreq=n,h.shot=s,h.bounties=u,h}return i(e,t),e}(p),l=function(t){function e(e,n,i,o){var r=t.call(this,n,i,o)||this;return r.dmg=e,r}return i(e,t),e}(p),y=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return i(e,t),e}(p),v=function(){function t(){}return t.prototype.move=function(t,e,n,i){throw void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=null),new Error("Not Implemented!")},t}(),g=function(t){function e(e){var n=t.call(this)||this;return n.vector=e,n}return i(e,t),e.prototype.move=function(t,e,n,i){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=null),s.default.from(this.vector.x*t,this.vector.y*t)},e.prototype.copy=function(){return new e(s.default.fromOther(this.vector))},e.prototype.setRotation=function(t){return this.vector.rotate(t),this},e}(v),m=function(t){function e(e){var n=t.call(this)||this;return n.decSpeed=e,n}return i(e,t),e.prototype.move=function(t,e,n){return null},e.prototype.copy=function(){return new e(this.decSpeed)},e.prototype.setRotation=function(t){},e}(v),w={PLAYER:new f(20,35,"#6a7fed",0),ENEMY:new f(45,50,"#ff0000",0),SHOT:new f(5,5,"#ffffff",0),HEALTH_ENEMY:new f(45,50,"#91ff6f",0),BIG_ONE:new f(60,60,"#ffbb00",0),FAST_ONE:new f(40,40,"#f5a3ff",0),CLOUD:new f(150,150,"#0a1e3a",0)},O={NONE:new c(Number.MIN_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),SHOT:new c(0,0,u,h),CLOUD:new c(-w.CLOUD.width,-w.CLOUD.height,u+w.CLOUD.width,h+w.CLOUD.height)},E={PLAYER:new m(.4),ENEMY_SIMPLE:new g(s.default.from(0,.1)),PLAYER_SHOT:new g(s.default.from(0,-.5)),ENEMY_SHOT:new g(s.default.from(0,.4)),CLOUD:new g(s.default.from(0,.05))},x={PLAYER:new l(1,w.SHOT,O.SHOT,E.PLAYER_SHOT),ENEMY:new l(1,w.SHOT,O.SHOT,E.ENEMY_SHOT)},_={PLAYER:new d(3,0,w.PLAYER,O.NONE,E.PLAYER,x.PLAYER,[])},L={CLOUD:new y(w.CLOUD,O.CLOUD,E.CLOUD)},M=function(){function t(t,e,n,i,o,r){this.id=t,this.type=e,this.x=n,this.y=i,this.rot=o,this.onDestroyed=r,this.rotation=0,this.move=null,this.speed=0,this.move=e.move.copy().setRotation(o)}return t.prototype.update=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=this.move.move(t);this.type.boundary.isInBounds(this.x+i.x,this.y+i.y,this.type.shape)?(this.x+=i.x,this.y+=i.y):this.type!=_.PLAYER&&this.onDestroyed(o.OUT_OF_BOUNDS)},t.prototype.isCollidingWith=function(t){return!1},t.prototype.getWidth=function(){return this.type.shape.getWidth()},t.prototype.getHeight=function(){return this.type.shape.getHeight()},t.prototype.getColor=function(){return this.type.shape.color},t}(),b=function(t){function e(e,n,i,o,r,s){var u=t.call(this,e,n,i,o,r,s)||this;return u.type=n,u}return i(e,t),e.prototype.update=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),this.rotation=s.mod(this.rotation+.2*e*t,360);var i=this.speed;this.speed=Math.max(0,this.speed-.4*t/100),this.moveVector.scale(0===i?1:this.speed/i),i=this.speed,console.log("Speed: ",this.speed),n?(this.speed=Math.min(8,this.speed+1*t/100),this.moveVector.add(s.default.construct(this.speed-i,this.rotation))):this.speed,this.x=s.mod(this.x+this.moveVector.x,u),this.y=s.mod(this.y+this.moveVector.y,h)},e}(function(t){function e(e,n,i,u,h,c){var a=t.call(this,e,n,i,u,h,c)||this;return a.type=n,a.moveVector=s.default.zero(),a.onHit=function(t){if(t instanceof S){if(t.initiator==a.type)return;a.type.bounties.forEach(function(e){e(a,t,r.HIT)}),a.lives-=t.type.dmg,X(0)}else a.lives--,X(0);a.lives<1&&a.onDestroyed(o.LIVES)},a.lives=n.lives,a}return i(e,t),e.prototype.isAlive=function(){return this.lives>0},e.prototype.isInBounds=function(){return this.type.boundary.isInBounds(this.x,this.y,this.type.shape)},e.prototype.update=function(e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),t.prototype.update.call(this,e,n,i),this.type!==_.PLAYER)switch(Math.floor(Math.random()*this.type.shotFreq)){case 1:this.shoot()}},e.prototype.shoot=function(){var t=W,e=new S(t,this.type,this.type.shot,this.x+this.getWidth()/2,this.y+this.getHeight()/2,this.rotation,function(e){j.delete(t)});return this.moveVector.add(s.default.construct(.65,this.rotation).scale(-1)),this.speed=Math.min(8,this.speed+.65),j.set(t,e),W++,e},e}(M)),S=function(t){function e(e,n,i,o,r,s,u){var h=t.call(this,e,i,o,r,s,u)||this;return h.initiator=n,h.type=i,h}return i(e,t),e.prototype.isCollidingWith=function(e){return!t.prototype.isCollidingWith.call(this,e)&&this.initiator!==e.type},e}(M),H=function(t){function e(e,n,i,o,r,s){return t.call(this,e,n,i,o,r,s)||this}return i(e,t),e}(M),A=document.getElementById("canvas").getContext("2d"),C=document.createElement("canvas");C.width=u,C.height=h;var D=C.getContext("2d"),R=null,U={space:!1,left:!1,right:!1,up:!1,down:!1},N={space:!1,left:!1,right:!1,up:!1,down:!1},T=new b(0,_.PLAYER,0,0,0,function(){F=!1,alert("Game over!")});T.x=u/2-T.getWidth()/2,T.y=h-T.getHeight();var Y=0,P=document.getElementById("score_text"),I=document.getElementById("lives_text"),W=0,B=0,V=new Map,j=new Map,k=new Map,F=!0;function X(t,e){void 0===e&&(e=0),Y+=t,T.lives+=e,P.innerText=""+Y,I.innerText=""+T.lives}window.addEventListener("keydown",function(t){switch(t.key){case" ":U.space=!0;break;case"ArrowUp":case"w":U.up=!0;break;case"ArrowLeft":case"a":U.left=!0;break;case"ArrowRight":case"d":U.right=!0}}),window.addEventListener("keyup",function(t){switch(t.key){case" ":U.space=!1;break;case"ArrowUp":case"w":U.up=!1;break;case"ArrowLeft":case"a":U.left=!1;break;case"ArrowRight":case"d":U.right=!1}}),window.requestAnimationFrame(function t(e){if(F){R||(R=e);var n=e-R;R=e,function(){switch(Math.floor(100*Math.random())){case 1:var t=B;k.set(t,new H(t,L.CLOUD,Math.random()*u,-L.CLOUD.shape.getHeight(),0,function(t){k.delete(this.id)})),B++}}(),function(t){U.space&&!N.space&&T.shoot(),T.update(t,U.left?-1:U.right?1:0,U.up),V.forEach(function(e){return e.update(t)}),j.forEach(function(e){return e.update(t)}),j.forEach(function(t){t.isCollidingWith(T)&&(T.onHit(t),t.onDestroyed()),V.forEach(function(e){t.isCollidingWith(e)&&(e.onHit(t),t.onDestroyed())})}),k.forEach(function(e){return e.update(t)})}(n),D.clearRect(0,0,u,h),k.forEach(function(t){D.fillStyle=t.getColor(),D.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),D.save(),D.fillStyle=T.getColor(),D.translate(T.x+.5*T.getWidth(),T.y+.5*T.getHeight()),D.rotate(s.rad(T.rotation)),D.translate(-(T.x+.5*T.getWidth()),-(T.y+.5*T.getHeight())),D.fillRect(T.x,T.y,T.getWidth(),T.getHeight()),D.restore(),V.forEach(function(t){D.fillStyle=t.getColor(),D.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),j.forEach(function(t){D.fillStyle=t.getColor(),D.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),N=JSON.parse(JSON.stringify(U)),A.clearRect(0,0,u,h),A.drawImage(C,0,0),window.requestAnimationFrame(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.x=t,this.y=e}return t.from=function(e,n){return new t(e,n)},t.fromOther=function(e){return new t(e.x,e.y)},t.zero=function(){return new t(0,0)},t.construct=function(e,n){return new t(e*Math.cos(o(n)),e*Math.sin(o(n))).rotate(-90)},t.prototype.isZero=function(){return 0==this.x&&0==this.y},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.add=function(e,n){return t.fromOther(e).add(n)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.rotate=function(e,n){return t.fromOther(e).rotate(n)},t.prototype.rotate=function(t){var e=this.x;return this.x=this.x*Math.cos(o(t))-this.y*Math.sin(o(t)),this.y=e*Math.sin(o(t))+this.y*Math.cos(o(t)),this},t.scale=function(e,n){return t.fromOther(e).scale(n)},t.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.normalize=function(e){return t.fromOther(e).normalize()},t.prototype.normalize=function(){return 0===this.magnitude()?this:this.scale(1/this.magnitude())},t}();function o(t){return t*(Math.PI/180)}e.default=i,e.mod=function(t,e){return(t%e+e)%e},e.rad=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FzdGVyb2lkcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmVjdG9yLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRGVhdGhDYXVzZUVudW0iLCJIaXRUeXBlRW51bSIsInZlY3Rvcl8xIiwiV0lEVEgiLCJIRUlHSFQiLCJCb3VuZGFyeSIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJ0aGlzIiwiaXNJbkJvdW5kcyIsIngiLCJ5Iiwic2hhcGUiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsIlNoYXBlIiwiY29sb3IiLCJtYXNzIiwiUmVjdGFuZ2xlIiwiX3N1cGVyIiwid2lkdGgiLCJoZWlnaHQiLCJfdGhpcyIsIl9fZXh0ZW5kcyIsImJvdW5kYXJ5IiwiR2FtZU9iamVjdFR5cGUiLCJDaXJjbGUiLCJyYWRpdXMiLCJtb3ZlIiwiVW5pdFR5cGUiLCJsaXZlcyIsInNob3RGcmVxIiwic2hvdCIsImJvdW50aWVzIiwiU2hvdFR5cGUiLCJkbWciLCJFbnZpcm9ubWVudFR5cGUiLCJNb3ZlIiwiZWxhcHNlZFRpbWUiLCJyb3RhdGlvbiIsInNwZWVkIiwibW92ZVZlY3RvciIsIkVycm9yIiwiQ29uc3RhbnRNb3ZlIiwidmVjdG9yIiwiZGVmYXVsdCIsImZyb20iLCJjb3B5IiwiZnJvbU90aGVyIiwic2V0Um90YXRpb24iLCJyb3RhdGUiLCJEeW5hbWljTW92ZSIsImRlY1NwZWVkIiwiU2hhcGVFbnVtIiwiUExBWUVSIiwiRU5FTVkiLCJTSE9UIiwiSEVBTFRIX0VORU1ZIiwiQklHX09ORSIsIkZBU1RfT05FIiwiQ0xPVUQiLCJCb3VuZGFyeUVudW0iLCJOT05FIiwiTnVtYmVyIiwiTUlOX1ZBTFVFIiwiTUFYX1ZBTFVFIiwiTW92ZVR5cGVFbnVtIiwiRU5FTVlfU0lNUExFIiwiUExBWUVSX1NIT1QiLCJFTkVNWV9TSE9UIiwiU2hvdFR5cGVFbnVtIiwiVW5pdFR5cGVFbnVtIiwiRW52aXJvbm1lbnRUeXBlRW51bSIsIkdhbWVPYmplY3QiLCJpZCIsInR5cGUiLCJyb3QiLCJvbkRlc3Ryb3llZCIsInVwZGF0ZSIsIm1vdmVtZW50IiwiT1VUX09GX0JPVU5EUyIsImlzQ29sbGlkaW5nV2l0aCIsIm90aGVyIiwiZ2V0Q29sb3IiLCJQbGF5ZXIiLCJtb2QiLCJvbGRTcGVlZCIsIk1hdGgiLCJtYXgiLCJzY2FsZSIsImNvbnNvbGUiLCJsb2ciLCJtaW4iLCJhZGQiLCJjb25zdHJ1Y3QiLCJVbml0IiwiemVybyIsIm9uSGl0IiwiU2hvdCIsImluaXRpYXRvciIsImZvckVhY2giLCJib3VudHkiLCJISVQiLCJ1cGRhdGVTdGF0dXMiLCJMSVZFUyIsImlzQWxpdmUiLCJmbG9vciIsInJhbmRvbSIsInNob290Iiwic2hvdElkQ291bnRlciIsImNhdXNlIiwic2hvdHMiLCJkZWxldGUiLCJzZXQiLCJFbnZpcm9ubWVudCIsImZyb250Q29udGV4dCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiYmFja0NhbnZhcyIsImNyZWF0ZUVsZW1lbnQiLCJiYWNrQ29udGV4dCIsInN0YXJ0IiwiY3VycmVudElucHV0Iiwic3BhY2UiLCJsZWZ0IiwicmlnaHQiLCJ1cCIsImRvd24iLCJwcmlvcklucHV0IiwicGxheWVyIiwicnVubmluZyIsImFsZXJ0Iiwic2NvcmUiLCJzY29yZUVsZW1lbnQiLCJsaXZlc0VsZW1lbnQiLCJlbnZpcm9ubWVudElkQ291bnRlciIsImVuZW1pZXMiLCJNYXAiLCJlbnZpcm9ubWVudHMiLCJzY29yZURlbHRhIiwiaGVhbHRoRGVsdGEiLCJpbm5lclRleHQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJsb29wIiwidGltZXN0YW1wIiwiY3JlYXRlRW52aXJvbm1lbnQiLCJlbmVteSIsImNsZWFyUmVjdCIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic2F2ZSIsInRyYW5zbGF0ZSIsInJhZCIsInJlc3RvcmUiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJkcmF3SW1hZ2UiLCJWZWN0b3IiLCJtYWduaXR1ZGUiLCJhbmdsZSIsImNvcyIsInNpbiIsImlzWmVybyIsInNxcnQiLCJhIiwiYiIsIm9sZFgiLCJzY2FsYXIiLCJub3JtYWxpemUiLCJQSSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdBQWdILE9BQUFOLEVBQUFNLElBQXFCQyxLQUFBLEtBQUFELElBQ3JJLE9BQUFGLEdBSUF6QixFQUFBNkIsRUFBQSxTQUFBMUIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBcUIsV0FDQSxXQUEyQixPQUFBckIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQWlCLEVBQUFDLEdBQXNELE9BQUFqQixPQUFBa0IsVUFBQUMsZUFBQTFCLEtBQUF1QixFQUFBQyxJQUd0RC9CLEVBQUFrQyxFQUFBLEdBSUFsQyxJQUFBbUMsRUFBQSx3YkNsRkEsSUFZS0MsRUFLQUMsRUFqQkxDLEVBQUF0QyxFQUFBLEdBRU11QyxFQUFRLElBQ1JDLEVBQVMsS0FTZixTQUFLSixHQUNEQSxJQUFBLGlDQUNBQSxJQUFBLGlCQUZKLENBQUtBLFdBS0wsU0FBS0MsR0FDREEsSUFBQSxhQUNBQSxJQUFBLHlCQUZKLENBQUtBLFdBS0wsSUFBQUksRUFBQSxXQUNJLFNBQUFBLEVBQW1CQyxFQUFxQkMsRUFBcUJDLEVBQXFCQyxHQUEvREMsS0FBQUosT0FBcUJJLEtBQUFILE9BQXFCRyxLQUFBRixPQUFxQkUsS0FBQUQsT0FNdEYsT0FISUosRUFBQVQsVUFBQWUsV0FBQSxTQUFXQyxFQUFXQyxFQUFXQyxHQUM3QixPQUFPRixHQUFLRixLQUFLSixNQUFRTyxHQUFLSCxLQUFLSCxNQUFTSyxFQUFJRSxFQUFNQyxZQUFlTCxLQUFLRixNQUFTSyxFQUFJQyxFQUFNRSxhQUFnQk4sS0FBS0QsTUFFMUhKLEVBUEEsR0FTQVksRUFBQSxXQU9BLE9BTkksU0FBNkJDLEVBQXNCQyxHQUF0QlQsS0FBQVEsUUFBc0JSLEtBQUFTLFFBRHZELEdBU0FDLEVBQUEsU0FBQUMsR0FDSSxTQUFBRCxFQUFtQkUsRUFBc0JDLEVBQWdCTCxFQUFlQyxHQUF4RSxJQUFBSyxFQUNJSCxFQUFBbEQsS0FBQXVDLEtBQU1RLEVBQU9DLElBQUtULFlBREhjLEVBQUFGLFFBQXNCRSxFQUFBRCxXQWU3QyxPQWhCd0JFLEVBQUFMLEVBQUFDLEdBS3BCRCxFQUFBeEIsVUFBQWUsV0FBQSxTQUFXQyxFQUFXQyxFQUFXYSxLQUlqQ04sRUFBQXhCLFVBQUFvQixVQUFBLFdBQ0ksT0FBT04sS0FBS2EsUUFHaEJILEVBQUF4QixVQUFBbUIsU0FBQSxXQUNJLE9BQU9MLEtBQUtZLE9BRXBCRixFQWhCQSxDQUF3QkgsR0FvQ3hCVSxHQWxCQSxTQUFBTixHQUNJLFNBQUFPLEVBQW1CQyxFQUFnQlgsRUFBZUMsR0FBbEQsSUFBQUssRUFDSUgsRUFBQWxELEtBQUF1QyxLQUFNUSxFQUFPQyxJQUFLVCxZQURIYyxFQUFBSyxXQURGSixFQUFBRyxFQUFBUCxHQUtqQk8sRUFBQWhDLFVBQUFlLFdBQUEsU0FBV0MsRUFBV0MsRUFBV2EsS0FJakNFLEVBQUFoQyxVQUFBb0IsVUFBQSxXQUNJLE9BQU8sRUFBSU4sS0FBS21CLFFBR3BCRCxFQUFBaEMsVUFBQW1CLFNBQUEsV0FDSSxPQUFPLEVBQUlMLEtBQUttQixRQWR4QixDQUFxQlosR0FrQnJCLFdBSUEsT0FISSxTQUE2QkgsRUFBcUJZLEVBQTJCSSxHQUFoRHBCLEtBQUFJLFFBQXFCSixLQUFBZ0IsV0FBMkJoQixLQUFBb0IsUUFEakYsSUFNQUMsRUFBQSxTQUFBVixHQUNJLFNBQUFVLEVBQW1CQyxFQUFzQkMsRUFBa0JuQixFQUFjWSxFQUFvQkksRUFBbUJJLEVBQXVCQyxHQUF2SSxJQUFBWCxFQUNJSCxFQUFBbEQsS0FBQXVDLEtBQU1JLEVBQU9ZLEVBQVVJLElBQUtwQixZQURiYyxFQUFBUSxRQUFzQlIsRUFBQVMsV0FBdUVULEVBQUFVLE9BQXVCVixFQUFBVyxhQUczSSxPQUp1QlYsRUFBQU0sRUFBQVYsR0FJdkJVLEVBSkEsQ0FBdUJKLEdBT3ZCUyxFQUFBLFNBQUFmLEdBQ0ksU0FBQWUsRUFBbUJDLEVBQWF2QixFQUFjWSxFQUFvQkksR0FBbEUsSUFBQU4sRUFDSUgsRUFBQWxELEtBQUF1QyxLQUFNSSxFQUFPWSxFQUFVSSxJQUFLcEIsWUFEYmMsRUFBQWEsUUFHdkIsT0FKdUJaLEVBQUFXLEVBQUFmLEdBSXZCZSxFQUpBLENBQXVCVCxHQU12QlcsRUFBQSxTQUFBakIsR0FDSSxTQUFBaUIsRUFBWXhCLEVBQWNZLEVBQW9CSSxVQUMxQ1QsRUFBQWxELEtBQUF1QyxLQUFNSSxFQUFPWSxFQUFVSSxJQUFLcEIsS0FFcEMsT0FKOEJlLEVBQUFhLEVBQUFqQixHQUk5QmlCLEVBSkEsQ0FBOEJYLEdBTTlCWSxFQUFBLFdBQ0ksU0FBQUEsS0FVSixPQVBJQSxFQUFBM0MsVUFBQWtDLEtBQUEsU0FBS1UsRUFBcUJDLEVBQXNCQyxFQUFtQkMsR0FDL0QsV0FEc0IsSUFBQUYsTUFBQSxRQUFzQixJQUFBQyxNQUFBLFFBQW1CLElBQUFDLE1BQUEsTUFDekQsSUFBSUMsTUFBTSxxQkFNeEJMLEVBWEEsR0FhQU0sRUFBQSxTQUFBeEIsR0FDSSxTQUFBd0IsRUFBbUJDLEdBQW5CLElBQUF0QixFQUNJSCxFQUFBbEQsS0FBQXVDLE9BQU9BLFlBRFFjLEVBQUFzQixXQWlCdkIsT0FsQjJCckIsRUFBQW9CLEVBQUF4QixHQUt2QndCLEVBQUFqRCxVQUFBa0MsS0FBQSxTQUFLVSxFQUFxQkMsRUFBc0JDLEVBQW1CQyxHQUMvRCxZQURzQixJQUFBRixNQUFBLFFBQXNCLElBQUFDLE1BQUEsUUFBbUIsSUFBQUMsTUFBQSxNQUN4RHpDLEVBQUE2QyxRQUFPQyxLQUFLdEMsS0FBS29DLE9BQU9sQyxFQUFJNEIsRUFBYTlCLEtBQUtvQyxPQUFPakMsRUFBSTJCLElBRzdESyxFQUFBakQsVUFBQXFELEtBQVAsV0FDSSxPQUFPLElBQUlKLEVBQWEzQyxFQUFBNkMsUUFBT0csVUFBVXhDLEtBQUtvQyxVQUkzQ0QsRUFBQWpELFVBQUF1RCxZQUFQLFNBQW1CVixHQUVmLE9BREEvQixLQUFLb0MsT0FBT00sT0FBT1gsR0FDWi9CLE1BRWZtQyxFQWxCQSxDQUEyQk4sR0FvQjNCYyxFQUFBLFNBQUFoQyxHQUNJLFNBQUFnQyxFQUFvQkMsR0FBcEIsSUFBQTlCLEVBQ0lILEVBQUFsRCxLQUFBdUMsT0FBT0EsWUFEU2MsRUFBQThCLGFBZ0J4QixPQWpCMEI3QixFQUFBNEIsRUFBQWhDLEdBS3RCZ0MsRUFBQXpELFVBQUFrQyxLQUFBLFNBQUtVLEVBQXFCQyxFQUFrQkMsR0FFeEMsT0FBTyxNQUlYVyxFQUFBekQsVUFBQXFELEtBQUEsV0FDSSxPQUFPLElBQUlJLEVBQVkzQyxLQUFLNEMsV0FHaENELEVBQUF6RCxVQUFBdUQsWUFBQSxTQUFZVixLQUVoQlksRUFqQkEsQ0FBMEJkLEdBbUJwQmdCLEdBQ0ZDLE9BQVEsSUFBSXBDLEVBQVUsR0FBSSxHQUFJLFVBQVcsR0FDekNxQyxNQUFPLElBQUlyQyxFQUFVLEdBQUksR0FBSSxVQUFXLEdBQ3hDc0MsS0FBTSxJQUFJdEMsRUFBVSxFQUFHLEVBQUcsVUFBVyxHQUNyQ3VDLGFBQWMsSUFBSXZDLEVBQVUsR0FBSSxHQUFJLFVBQVcsR0FDL0N3QyxRQUFTLElBQUl4QyxFQUFVLEdBQUksR0FBSSxVQUFXLEdBQzFDeUMsU0FBVSxJQUFJekMsRUFBVSxHQUFJLEdBQUksVUFBVyxHQUMzQzBDLE1BQU8sSUFBSTFDLEVBQVUsSUFBSyxJQUFLLFVBQVcsSUFHeEMyQyxHQUNGQyxLQUFNLElBQUkzRCxFQUFTNEQsT0FBT0MsVUFBV0QsT0FBT0MsVUFBV0QsT0FBT0UsVUFBV0YsT0FBT0UsV0FDaEZULEtBQU0sSUFBSXJELEVBQVMsRUFBRyxFQUFHRixFQUFPQyxHQUNoQzBELE1BQU8sSUFBSXpELEdBQVVrRCxFQUFVTyxNQUFNeEMsT0FBUWlDLEVBQVVPLE1BQU12QyxPQUFRcEIsRUFBUW9ELEVBQVVPLE1BQU14QyxNQUFPbEIsRUFBU21ELEVBQVVPLE1BQU12QyxTQXdCM0g2QyxHQUNGWixPQUFRLElBQUlILEVBekxXLElBMEx2QmdCLGFBQWMsSUFBSXhCLEVBQWEzQyxFQUFBNkMsUUFBT0MsS0FBSyxFQUFHLEtBQzlDc0IsWUFBYSxJQUFJekIsRUFBYTNDLEVBQUE2QyxRQUFPQyxLQUFLLEdBQUksS0FDOUN1QixXQUFZLElBQUkxQixFQUFhM0MsRUFBQTZDLFFBQU9DLEtBQUssRUFBRyxLQUM1Q2MsTUFBTyxJQUFJakIsRUFBYTNDLEVBQUE2QyxRQUFPQyxLQUFLLEVBQUcsT0FHckN3QixHQUNGaEIsT0FBUSxJQUFJcEIsRUFBUyxFQUFHbUIsRUFBVUcsS0FBTUssRUFBYUwsS0FBTVUsRUFBYUUsYUFDeEViLE1BQU8sSUFBSXJCLEVBQVMsRUFBR21CLEVBQVVHLEtBQU1LLEVBQWFMLEtBQU1VLEVBQWFHLGFBR3JFRSxHQUNGakIsT0FBUSxJQUFJekIsRUFBUyxFQUFHLEVBQUd3QixFQUFVQyxPQUFRTyxFQUFhQyxLQUFNSSxFQUFhWixPQUFRZ0IsRUFBYWhCLFlBR2hHa0IsR0FDRlosTUFBTyxJQUFJeEIsRUFBZ0JpQixFQUFVTyxNQUFPQyxFQUFhRCxNQUFPTSxFQUFhTixRQVNqRmEsRUFBQSxXQU1JLFNBQUFBLEVBQTZCQyxFQUFtQkMsRUFBNkJqRSxFQUFrQkMsRUFBa0JpRSxFQUFvQkMsR0FBeEdyRSxLQUFBa0UsS0FBbUJsRSxLQUFBbUUsT0FBNkJuRSxLQUFBRSxJQUFrQkYsS0FBQUcsSUFBa0JILEtBQUFvRSxNQUFvQnBFLEtBQUFxRSxjQUw5SHJFLEtBQUErQixTQUFtQixFQUNuQi9CLEtBQUFvQixLQUFhLEtBRVZwQixLQUFBZ0MsTUFBZ0IsRUFHdEJoQyxLQUFLb0IsS0FBTytDLEVBQUsvQyxLQUFLbUIsT0FBT0UsWUFBWTJCLEdBZ0NqRCxPQTdCSUgsRUFBQS9FLFVBQUFvRixPQUFBLFNBQU94QyxFQUFxQkMsRUFBc0J3QyxRQUF0QixJQUFBeEMsTUFBQSxRQUFzQixJQUFBd0MsT0FBQSxHQUM5QyxJQUFJbkQsRUFBT3BCLEtBQUtvQixLQUFLQSxLQUFLVSxHQUN0QjlCLEtBQUttRSxLQUFLbkQsU0FBU2YsV0FBV0QsS0FBS0UsRUFBSWtCLEVBQUtsQixFQUFHRixLQUFLRyxFQUFJaUIsRUFBS2pCLEVBQUdILEtBQUttRSxLQUFLL0QsUUFDMUVKLEtBQUtFLEdBQUtrQixFQUFLbEIsRUFDZkYsS0FBS0csR0FBS2lCLEVBQUtqQixHQUNSSCxLQUFLbUUsTUFBUUosRUFBYWpCLFFBQ2pDOUMsS0FBS3FFLFlBQVkvRSxFQUFla0YsZ0JBSXhDUCxFQUFBL0UsVUFBQXVGLGdCQUFBLFNBQWdCQyxHQUVaLE9BQU8sR0FJSlQsRUFBQS9FLFVBQUFtQixTQUFQLFdBQ0ksT0FBT0wsS0FBS21FLEtBQUsvRCxNQUFNQyxZQUdwQjRELEVBQUEvRSxVQUFBb0IsVUFBUCxXQUNJLE9BQU9OLEtBQUttRSxLQUFLL0QsTUFBTUUsYUFHcEIyRCxFQUFBL0UsVUFBQXlGLFNBQVAsV0FDSSxPQUFPM0UsS0FBS21FLEtBQUsvRCxNQUFNSSxPQUkvQnlELEVBdkNBLEdBbUdBVyxFQUFBLFNBQUFqRSxHQUNJLFNBQUFpRSxFQUFZVixFQUFtQkMsRUFBZ0JqRSxFQUFXQyxFQUFXaUUsRUFBYUMsR0FBbEYsSUFBQXZELEVBQ0lILEVBQUFsRCxLQUFBdUMsS0FBTWtFLEVBQUlDLEVBQU1qRSxFQUFHQyxFQUFHaUUsRUFBS0MsSUFBWXJFLFlBRFpjLEVBQUFxRCxTQXFCbkMsT0F0QnFCcEQsRUFBQTZELEVBQUFqRSxHQUtqQmlFLEVBQUExRixVQUFBb0YsT0FBQSxTQUFPeEMsRUFBcUJDLEVBQXNCd0MsUUFBdEIsSUFBQXhDLE1BQUEsUUFBc0IsSUFBQXdDLE9BQUEsR0FDOUN2RSxLQUFLK0IsU0FBV3ZDLEVBQUFxRixJQUFJN0UsS0FBSytCLFNBOVRWLEdBOFRxQkEsRUFBNEJELEVBQWEsS0FDN0UsSUFBSWdELEVBQVc5RSxLQUFLZ0MsTUFDcEJoQyxLQUFLZ0MsTUFBUStDLEtBQUtDLElBQUksRUFBR2hGLEtBQUtnQyxNQTlUWCxHQThUeUNGLEVBQWMsS0FDMUU5QixLQUFLaUMsV0FBV2dELE1BQW1CLElBQWJILEVBQWlCLEVBQUk5RSxLQUFLZ0MsTUFBUThDLEdBQ3hEQSxFQUFXOUUsS0FBS2dDLE1BQ2hCa0QsUUFBUUMsSUFBSSxVQUFXbkYsS0FBS2dDLE9BQ3hCdUMsR0FDQXZFLEtBQUtnQyxNQUFRK0MsS0FBS0ssSUFsVVosRUFrVTJCcEYsS0FBS2dDLE1BcFVoQyxFQW9VcURGLEVBQWMsS0FDekU5QixLQUFLaUMsV0FBV29ELElBQUk3RixFQUFBNkMsUUFBT2lELFVBQVV0RixLQUFLZ0MsTUFBUThDLEVBQVU5RSxLQUFLK0IsWUFDMUQvQixLQUFLZ0MsTUFJaEJoQyxLQUFLRSxFQUFJVixFQUFBcUYsSUFBSTdFLEtBQUtFLEVBQUlGLEtBQUtpQyxXQUFXL0IsRUFBR1QsR0FDekNPLEtBQUtHLEVBQUlYLEVBQUFxRixJQUFJN0UsS0FBS0csRUFBSUgsS0FBS2lDLFdBQVc5QixFQUFHVCxJQUVqRGtGLEVBdEJBLENBMURBLFNBQUFqRSxHQXFCSSxTQUFBNEUsRUFBWXJCLEVBQW1CQyxFQUFnQmpFLEVBQVdDLEVBQVdpRSxFQUFhQyxHQUFsRixJQUFBdkQsRUFDSUgsRUFBQWxELEtBQUF1QyxLQUFNa0UsRUFBSUMsRUFBTWpFLEVBQUdDLEVBQUdpRSxFQUFLQyxJQUFZckUsWUFEWmMsRUFBQXFELE9BcEJ4QnJELEVBQUFtQixXQUFxQnpDLEVBQUE2QyxRQUFPbUQsT0FFNUIxRSxFQUFBMkUsTUFBcUIsU0FBQWYsR0FDeEIsR0FBSUEsYUFBaUJnQixFQUFNLENBQ3ZCLEdBQUloQixFQUFNaUIsV0FBYTdFLEVBQUtxRCxLQUN4QixPQUNKckQsRUFBS3FELEtBQUsxQyxTQUFTbUUsUUFBUSxTQUFBQyxHQUN2QkEsRUFBTy9FLEVBQU00RCxFQUFPbkYsRUFBWXVHLE9BRXBDaEYsRUFBS1EsT0FBU29ELEVBQU1QLEtBQUt4QyxJQUN6Qm9FLEVBQWEsUUFFYmpGLEVBQUtRLFFBQ0x5RSxFQUFhLEdBRWJqRixFQUFLUSxNQUFRLEdBQ2JSLEVBQUt1RCxZQUFZL0UsRUFBZTBHLFFBTXBDbEYsRUFBS1EsTUFBUTZDLEVBQUs3QyxRQWlDMUIsT0F4RG1CUCxFQUFBd0UsRUFBQTVFLEdBMEJmNEUsRUFBQXJHLFVBQUErRyxRQUFBLFdBQ0ksT0FBT2pHLEtBQUtzQixNQUFRLEdBR3hCaUUsRUFBQXJHLFVBQUFlLFdBQUEsV0FDSSxPQUFPRCxLQUFLbUUsS0FBS25ELFNBQVNmLFdBQVdELEtBQUtFLEVBQUdGLEtBQUtHLEVBQUdILEtBQUttRSxLQUFLL0QsUUFHbkVtRixFQUFBckcsVUFBQW9GLE9BQUEsU0FBT3hDLEVBQXFCQyxFQUFzQndDLEdBRTlDLFFBRndCLElBQUF4QyxNQUFBLFFBQXNCLElBQUF3QyxPQUFBLEdBQzlDNUQsRUFBQXpCLFVBQU1vRixPQUFNN0csS0FBQXVDLEtBQUM4QixFQUFhQyxFQUFVd0MsR0FDaEN2RSxLQUFLbUUsT0FBU0osRUFBYWpCLE9BRy9CLE9BQVFpQyxLQUFLbUIsTUFBTW5CLEtBQUtvQixTQUFXbkcsS0FBS21FLEtBQUs1QyxXQUN6QyxLQUFLLEVBQ0R2QixLQUFLb0csVUFJakJiLEVBQUFyRyxVQUFBa0gsTUFBQSxXQUNJLElBQUlsQyxFQUFLbUMsRUFDTDdFLEVBQU8sSUFBSWtFLEVBQUt4QixFQUFJbEUsS0FBS21FLEtBQU1uRSxLQUFLbUUsS0FBSzNDLEtBQU14QixLQUFLRSxFQUFJRixLQUFLSyxXQUFhLEVBQUdMLEtBQUtHLEVBQUlILEtBQUtNLFlBQWMsRUFBR04sS0FBSytCLFNBQVUsU0FBQ3VFLEdBQzVIQyxFQUFNQyxPQUFPdEMsS0FNakIsT0FKQWxFLEtBQUtpQyxXQUFXb0QsSUFBSTdGLEVBQUE2QyxRQUFPaUQsVUFBVSxJQUFNdEYsS0FBSytCLFVBQVVrRCxPQUFPLElBQ2pFakYsS0FBS2dDLE1BQVErQyxLQUFLSyxJQTlTUixFQThTdUJwRixLQUFLZ0MsTUFBUSxLQUM5Q3VFLEVBQU1FLElBQUl2QyxFQUFJMUMsR0FDZDZFLElBQ083RSxHQUVmK0QsRUF4REEsQ0FBbUJ0QixJQWtGbkJ5QixFQUFBLFNBQUEvRSxHQUNJLFNBQUErRSxFQUFZeEIsRUFBbUJ5QixFQUE0QnhCLEVBQWdCakUsRUFBV0MsRUFBV2lFLEVBQWFDLEdBQTlHLElBQUF2RCxFQUNJSCxFQUFBbEQsS0FBQXVDLEtBQU1rRSxFQUFJQyxFQUFNakUsRUFBR0MsRUFBR2lFLEVBQUtDLElBQVlyRSxZQURaYyxFQUFBNkUsWUFBNEI3RSxFQUFBcUQsU0FPL0QsT0FSbUJwRCxFQUFBMkUsRUFBQS9FLEdBS2YrRSxFQUFBeEcsVUFBQXVGLGdCQUFBLFNBQWdCQyxHQUNaLE9BQVEvRCxFQUFBekIsVUFBTXVGLGdCQUFlaEgsS0FBQXVDLEtBQUMwRSxJQUFVMUUsS0FBSzJGLFlBQWNqQixFQUFNUCxNQUV6RXVCLEVBUkEsQ0FBbUJ6QixHQVVuQnlDLEVBQUEsU0FBQS9GLEdBQ0ksU0FBQStGLEVBQVl4QyxFQUFZQyxFQUF1QmpFLEVBQVdDLEVBQVdpRSxFQUFhQyxVQUM5RTFELEVBQUFsRCxLQUFBdUMsS0FBTWtFLEVBQUlDLEVBQU1qRSxFQUFHQyxFQUFHaUUsRUFBS0MsSUFBWXJFLEtBRS9DLE9BSjBCZSxFQUFBMkYsRUFBQS9GLEdBSTFCK0YsRUFKQSxDQUEwQnpDLEdBU3RCMEMsRUFEa0NDLFNBQVNDLGVBQWUsVUFDL0JDLFdBQVcsTUFFdENDLEVBQWlDSCxTQUFTSSxjQUFjLFVBQzVERCxFQUFXbkcsTUFBUW5CLEVBQ25Cc0gsRUFBV2xHLE9BQVNuQixFQUNwQixJQUFJdUgsRUFBY0YsRUFBV0QsV0FBVyxNQUVwQ0ksRUFBUSxLQUNSQyxHQUNBQyxPQUFPLEVBQ1BDLE1BQU0sRUFDTkMsT0FBTyxFQUNQQyxJQUFJLEVBQ0pDLE1BQU0sR0FFTkMsR0FDQUwsT0FBTyxFQUNQQyxNQUFNLEVBQ05DLE9BQU8sRUFDUEMsSUFBSSxFQUNKQyxNQUFNLEdBR05FLEVBQVMsSUFBSTlDLEVBQU8sRUFBR2IsRUFBYWpCLE9BQVEsRUFBRyxFQUFHLEVBQUcsV0E2THJENkUsR0FBVSxFQUNWQyxNQUFNLGdCQTNMVkYsRUFBT3hILEVBQUlULEVBQVEsRUFBSWlJLEVBQU9ySCxXQUFhLEVBQzNDcUgsRUFBT3ZILEVBQUlULEVBQVNnSSxFQUFPcEgsWUFDM0IsSUFBSXVILEVBQVEsRUFDUkMsRUFBZWxCLFNBQVNDLGVBQWUsY0FDdkNrQixFQUFlbkIsU0FBU0MsZUFBZSxjQUl2Q1IsRUFBZ0IsRUFDaEIyQixFQUF1QixFQUV2QkMsRUFBVSxJQUFJQyxJQUVkM0IsRUFBUSxJQUFJMkIsSUFFWkMsRUFBZSxJQUFJRCxJQUNuQlAsR0FBbUIsRUFrS3ZCLFNBQVM1QixFQUFhcUMsRUFBb0JDLFFBQUEsSUFBQUEsTUFBQSxHQUN0Q1IsR0FBU08sRUFDVFYsRUFBT3BHLE9BQVMrRyxFQUNoQlAsRUFBYVEsVUFBWSxHQUFLVCxFQUM5QkUsRUFBYU8sVUFBWSxHQUFLWixFQUFPcEcsTUExSHpDaUgsT0FBT0MsaUJBQWlCLFVBcEJ4QixTQUF1QkMsR0FDbkIsT0FBUUEsRUFBTTVKLEtBQ1YsSUFBSyxJQUNEc0ksRUFBYUMsT0FBUSxFQUNyQixNQUNKLElBQUssVUFDTCxJQUFLLElBQ0RELEVBQWFJLElBQUssRUFDbEIsTUFDSixJQUFLLFlBQ0wsSUFBSyxJQUNESixFQUFhRSxNQUFPLEVBQ3BCLE1BQ0osSUFBSyxhQUNMLElBQUssSUFDREYsRUFBYUcsT0FBUSxLQTJCakNpQixPQUFPQyxpQkFBaUIsUUFwQnhCLFNBQXFCQyxHQUNqQixPQUFRQSxFQUFNNUosS0FDVixJQUFLLElBQ0RzSSxFQUFhQyxPQUFRLEVBQ3JCLE1BQ0osSUFBSyxVQUNMLElBQUssSUFDREQsRUFBYUksSUFBSyxFQUNsQixNQUNKLElBQUssWUFDTCxJQUFLLElBQ0RKLEVBQWFFLE1BQU8sRUFDcEIsTUFDSixJQUFLLGFBQ0wsSUFBSyxJQUNERixFQUFhRyxPQUFRLEtBaUhqQ2lCLE9BQU9HLHNCQTVLUCxTQUFTQyxFQUFLQyxHQUNWLEdBQUtqQixFQUFMLENBRUtULElBQU9BLEVBQVEwQixHQUNwQixJQUFJOUcsRUFBYzhHLEVBQVkxQixFQUM5QkEsRUFBUTBCLEVBNkZaLFdBQ0ksT0FBUTdELEtBQUttQixNQUFzQixJQUFoQm5CLEtBQUtvQixXQUNwQixLQUFLLEVBQ0QsSUFBSWpDLEVBQUs4RCxFQUNURyxFQUFhMUIsSUFBSXZDLEVBQUksSUFBSXdDLEVBQVl4QyxFQUFJRixFQUFvQlosTUFBTzJCLEtBQUtvQixTQUFXMUcsR0FBUXVFLEVBQW9CWixNQUFNaEQsTUFBTUUsWUFBYSxFQUFHLFNBQVVnRyxHQUNsSjZCLEVBQWEzQixPQUFPeEcsS0FBS2tFLE9BRTdCOEQsS0FqR1JhLEdBcUdKLFNBQWdCL0csR0FDUnFGLEVBQWFDLFFBQVVLLEVBQVdMLE9BQ2xDTSxFQUFPdEIsUUFFWHNCLEVBQU9wRCxPQUFPeEMsRUFBYXFGLEVBQWFFLE1BQVEsRUFBS0YsRUFBYUcsTUFBUSxFQUFJLEVBQUlILEVBQWFJLElBRS9GVSxFQUFRckMsUUFBUSxTQUFBckgsR0FBUyxPQUFBQSxFQUFNK0YsT0FBT3hDLEtBQ3RDeUUsRUFBTVgsUUFBUSxTQUFBckgsR0FBUyxPQUFBQSxFQUFNK0YsT0FBT3hDLEtBRXBDeUUsRUFBTVgsUUFBUSxTQUFBcEUsR0FDTkEsRUFBS2lELGdCQUFnQmlELEtBQ3JCQSxFQUFPakMsTUFBTWpFLEdBQ2JBLEVBQUs2QyxlQUVUNEQsRUFBUXJDLFFBQVEsU0FBQWtELEdBQ1J0SCxFQUFLaUQsZ0JBQWdCcUUsS0FDckJBLEVBQU1yRCxNQUFNakUsR0FDWkEsRUFBSzZDLG1CQUlqQjhELEVBQWF2QyxRQUFRLFNBQUFySCxHQUFTLE9BQUFBLEVBQU0rRixPQUFPeEMsS0F6SDNDd0MsQ0FBT3hDLEdBNkhQbUYsRUFBWThCLFVBQVUsRUFBRyxFQUFHdEosRUFBT0MsR0FFbkN5SSxFQUFhdkMsUUFBUSxTQUFBckgsR0FDakIwSSxFQUFZK0IsVUFBWXpLLEVBQU1vRyxXQUM5QnNDLEVBQVlnQyxTQUFTMUssRUFBTTJCLEVBQUczQixFQUFNNEIsRUFBRzVCLEVBQU04QixXQUFZOUIsRUFBTStCLGVBR25FMkcsRUFBWWlDLE9BQ1pqQyxFQUFZK0IsVUFBWXRCLEVBQU8vQyxXQUMvQnNDLEVBQVlrQyxVQUFVekIsRUFBT3hILEVBQUksR0FBTXdILEVBQU9ySCxXQUFZcUgsRUFBT3ZILEVBQUksR0FBTXVILEVBQU9wSCxhQUNsRjJHLEVBQVl2RSxPQUFPbEQsRUFBQTRKLElBQUkxQixFQUFPM0YsV0FDOUJrRixFQUFZa0MsWUFBWXpCLEVBQU94SCxFQUFJLEdBQU13SCxFQUFPckgsY0FBZXFILEVBQU92SCxFQUFJLEdBQU11SCxFQUFPcEgsY0FDdkYyRyxFQUFZZ0MsU0FBU3ZCLEVBQU94SCxFQUFHd0gsRUFBT3ZILEVBQUd1SCxFQUFPckgsV0FBWXFILEVBQU9wSCxhQUNuRTJHLEVBQVlvQyxVQUVacEIsRUFBUXJDLFFBQVEsU0FBQXJILEdBQ1owSSxFQUFZK0IsVUFBWXpLLEVBQU1vRyxXQUM5QnNDLEVBQVlnQyxTQUFTMUssRUFBTTJCLEVBQUczQixFQUFNNEIsRUFBRzVCLEVBQU04QixXQUFZOUIsRUFBTStCLGVBR25FaUcsRUFBTVgsUUFBUSxTQUFBckgsR0FDVjBJLEVBQVkrQixVQUFZekssRUFBTW9HLFdBQzlCc0MsRUFBWWdDLFNBQVMxSyxFQUFNMkIsRUFBRzNCLEVBQU00QixFQUFHNUIsRUFBTThCLFdBQVk5QixFQUFNK0IsZUF6SW5FbUgsRUFBYTZCLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVVyQyxJQU52Q1IsRUFBYW9DLFVBQVUsRUFBRyxFQUFHdEosRUFBT0MsR0FDcENpSCxFQUFhOEMsVUFBVTFDLEVBQVksRUFBRyxHQUN0Q3dCLE9BQU9HLHNCQUFzQkMscUZDbGFqQyxJQUFBZSxFQUFBLFdBQ0ksU0FBQUEsRUFBMkJ4SixFQUFrQkMsR0FBbEJILEtBQUFFLElBQWtCRixLQUFBRyxJQTRFakQsT0F6RWtCdUosRUFBQXBILEtBQWQsU0FBbUJwQyxFQUFXQyxHQUMxQixPQUFPLElBQUl1SixFQUFPeEosRUFBR0MsSUFHWHVKLEVBQUFsSCxVQUFkLFNBQXdCa0MsR0FDcEIsT0FBTyxJQUFJZ0YsRUFBT2hGLEVBQU14RSxFQUFHd0UsRUFBTXZFLElBR3ZCdUosRUFBQWxFLEtBQWQsV0FDSSxPQUFPLElBQUlrRSxFQUFPLEVBQUcsSUFHWEEsRUFBQXBFLFVBQWQsU0FBd0JxRSxFQUFtQkMsR0FDdkMsT0FBTyxJQUFJRixFQUFPQyxFQUFZNUUsS0FBSzhFLElBQUlULEVBQUlRLElBQVNELEVBQVk1RSxLQUFLK0UsSUFBSVYsRUFBSVEsS0FBU2xILFFBQVEsS0FHM0ZnSCxFQUFBeEssVUFBQTZLLE9BQVAsV0FDSSxPQUFpQixHQUFWL0osS0FBS0UsR0FBb0IsR0FBVkYsS0FBS0csR0FHeEJ1SixFQUFBeEssVUFBQXlLLFVBQVAsV0FDSSxPQUFPNUUsS0FBS2lGLEtBQUtoSyxLQUFLRSxFQUFJRixLQUFLRSxFQUFJRixLQUFLRyxFQUFJSCxLQUFLRyxJQUd2Q3VKLEVBQUFyRSxJQUFkLFNBQWtCNEUsRUFBV0MsR0FDekIsT0FBT1IsRUFBT2xILFVBQVV5SCxHQUFHNUUsSUFBSTZFLElBRzVCUixFQUFBeEssVUFBQW1HLElBQVAsU0FBV1gsR0FHUCxPQUZBMUUsS0FBS0UsR0FBS3dFLEVBQU14RSxFQUNoQkYsS0FBS0csR0FBS3VFLEVBQU12RSxFQUNUSCxNQUdHMEosRUFBQWhILE9BQWQsU0FBcUJOLEVBQWdCd0gsR0FDakMsT0FBT0YsRUFBT2xILFVBQVVKLEdBQVFNLE9BQU9rSCxJQUdwQ0YsRUFBQXhLLFVBQUF3RCxPQUFQLFNBQWNrSCxHQUNWLElBQUlPLEVBQU9uSyxLQUFLRSxFQUdoQixPQUZBRixLQUFLRSxFQUFJRixLQUFLRSxFQUFJNkUsS0FBSzhFLElBQUlULEVBQUlRLElBQVU1SixLQUFLRyxFQUFJNEUsS0FBSytFLElBQUlWLEVBQUlRLElBQy9ENUosS0FBS0csRUFBSWdLLEVBQU9wRixLQUFLK0UsSUFBSVYsRUFBSVEsSUFBVTVKLEtBQUtHLEVBQUk0RSxLQUFLOEUsSUFBSVQsRUFBSVEsSUFDdEQ1SixNQUdHMEosRUFBQXpFLE1BQWQsU0FBb0I3QyxFQUFnQmdJLEdBQ2hDLE9BQU9WLEVBQU9sSCxVQUFVSixHQUFRNkMsTUFBTW1GLElBR25DVixFQUFBeEssVUFBQStGLE1BQVAsU0FBYW1GLEdBR1QsT0FGQXBLLEtBQUtFLEdBQUtrSyxFQUNWcEssS0FBS0csR0FBS2lLLEVBQ0hwSyxNQUdHMEosRUFBQVcsVUFBZCxTQUF3QmpJLEdBQ3BCLE9BQU9zSCxFQUFPbEgsVUFBVUosR0FBUWlJLGFBRzdCWCxFQUFBeEssVUFBQW1MLFVBQVAsV0FDSSxPQUE0QixJQUFyQnJLLEtBQUsySixZQUFvQjNKLEtBQU9BLEtBQUtpRixNQUFNLEVBQUlqRixLQUFLMkosY0FhbkVELEVBN0VBLEdBbUZBLFNBQWdCTixFQUFJckssR0FDaEIsT0FBT0EsR0FBS2dHLEtBQUt1RixHQUFLLGlCQUwxQmxOLEVBQUF5SCxJQUFBLFNBQW9COUYsRUFBV3JCLEdBQzNCLE9BQVNxQixFQUFJckIsRUFBS0EsR0FBS0EsR0FHM0JOLEVBQUFnTSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgVmVjdG9yLCB7bW9kLCByYWR9IGZyb20gXCIuL3ZlY3RvclwiO1xyXG5cclxuY29uc3QgV0lEVEggPSA4MDA7XHJcbmNvbnN0IEhFSUdIVCA9IDYwMDtcclxuY29uc3QgUk9UQVRJT05fU1BFRUQgPSAwLjI7XHJcbmNvbnN0IEFDQ19TUEVFRCA9IDE7XHJcbmNvbnN0IERFQ0VMRVJBVElPTl9TUEVFRCA9IDAuNDtcclxuY29uc3QgTUFYX1NQRUVEID0gODtcclxuXHJcbi8vcmVnaW9uIEdhbWVPYmplY3QgcGFydHNcclxudHlwZSBCb3VudHlDYWxsYmFjayA9IChlbmVteTogVW5pdCwgc2hvdDogU2hvdCwgdHlwZTogSGl0VHlwZUVudW0pID0+IGFueTtcclxuXHJcbmVudW0gRGVhdGhDYXVzZUVudW0ge1xyXG4gICAgT1VUX09GX0JPVU5EUyxcclxuICAgIExJVkVTXHJcbn1cclxuXHJcbmVudW0gSGl0VHlwZUVudW0ge1xyXG4gICAgSElULFxyXG4gICAgREVTVFJPWUVEXHJcbn1cclxuXHJcbmNsYXNzIEJvdW5kYXJ5IHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBtaW5YOiBudW1iZXIsIHB1YmxpYyBtaW5ZOiBudW1iZXIsIHB1YmxpYyBtYXhYOiBudW1iZXIsIHB1YmxpYyBtYXhZOiBudW1iZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBpc0luQm91bmRzKHg6IG51bWJlciwgeTogbnVtYmVyLCBzaGFwZTogU2hhcGUpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4geCA+PSB0aGlzLm1pblggJiYgeSA+PSB0aGlzLm1pblkgJiYgKHggKyBzaGFwZS5nZXRXaWR0aCgpKSA8PSB0aGlzLm1heFggJiYgKHkgKyBzaGFwZS5nZXRIZWlnaHQoKSkgPD0gdGhpcy5tYXhZO1xyXG4gICAgfVxyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBTaGFwZSB7XHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IocHVibGljIGNvbG9yOiBzdHJpbmcsIHB1YmxpYyBtYXNzOiBudW1iZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0V2lkdGgoKTogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRIZWlnaHQoKTogbnVtYmVyO1xyXG59XHJcblxyXG5jbGFzcyBSZWN0YW5nbGUgZXh0ZW5kcyBTaGFwZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgd2lkdGg6IG51bWJlciwgcHVibGljIGhlaWdodDogbnVtYmVyLCBjb2xvcjogc3RyaW5nLCBtYXNzOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihjb2xvciwgbWFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJbkJvdW5kcyh4OiBudW1iZXIsIHk6IG51bWJlciwgYm91bmRhcnk6IEJvdW5kYXJ5KSB7XHJcbiAgICAgICAgLy9UT0RPXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0V2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWR0aFxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDaXJjbGUgZXh0ZW5kcyBTaGFwZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgcmFkaXVzOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcsIG1hc3M6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKGNvbG9yLCBtYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0luQm91bmRzKHg6IG51bWJlciwgeTogbnVtYmVyLCBib3VuZGFyeTogQm91bmRhcnkpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDIgKiB0aGlzLnJhZGl1cztcclxuICAgIH1cclxuXHJcbiAgICBnZXRXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAyICogdGhpcy5yYWRpdXM7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFic3RyYWN0IGNsYXNzIEdhbWVPYmplY3RUeXBlIHtcclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihwdWJsaWMgc2hhcGU6IFNoYXBlLCBwdWJsaWMgYm91bmRhcnk6IEJvdW5kYXJ5LCBwdWJsaWMgbW92ZTogTW92ZSkge1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgVW5pdFR5cGUgZXh0ZW5kcyBHYW1lT2JqZWN0VHlwZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbGl2ZXM6IG51bWJlciwgcHVibGljIHNob3RGcmVxOiBudW1iZXIsIHNoYXBlOiBTaGFwZSwgYm91bmRhcnk6IEJvdW5kYXJ5LCBtb3ZlOiBNb3ZlLCBwdWJsaWMgc2hvdDogU2hvdFR5cGUsIHB1YmxpYyBib3VudGllczogQm91bnR5Q2FsbGJhY2tbXSkge1xyXG4gICAgICAgIHN1cGVyKHNoYXBlLCBib3VuZGFyeSwgbW92ZSlcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNsYXNzIFNob3RUeXBlIGV4dGVuZHMgR2FtZU9iamVjdFR5cGUge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIGRtZzogbnVtYmVyLCBzaGFwZTogU2hhcGUsIGJvdW5kYXJ5OiBCb3VuZGFyeSwgbW92ZTogTW92ZSkge1xyXG4gICAgICAgIHN1cGVyKHNoYXBlLCBib3VuZGFyeSwgbW92ZSlcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRW52aXJvbm1lbnRUeXBlIGV4dGVuZHMgR2FtZU9iamVjdFR5cGUge1xyXG4gICAgY29uc3RydWN0b3Ioc2hhcGU6IFNoYXBlLCBib3VuZGFyeTogQm91bmRhcnksIG1vdmU6IE1vdmUpIHtcclxuICAgICAgICBzdXBlcihzaGFwZSwgYm91bmRhcnksIG1vdmUpXHJcbiAgICB9XHJcbn1cclxuXHJcbmFic3RyYWN0IGNsYXNzIE1vdmUge1xyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmUoZWxhcHNlZFRpbWU6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIHNwZWVkOiBudW1iZXIgPSAwLCBtb3ZlVmVjdG9yOiBWZWN0b3IgPSBudWxsKTogVmVjdG9yIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgSW1wbGVtZW50ZWQhXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IGNvcHkoKTogTW92ZTtcclxuXHJcbiAgICBhYnN0cmFjdCBzZXRSb3RhdGlvbihyb3RhdGlvbjogbnVtYmVyKTtcclxufVxyXG5cclxuY2xhc3MgQ29uc3RhbnRNb3ZlIGV4dGVuZHMgTW92ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdmVjdG9yOiBWZWN0b3IpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmUoZWxhcHNlZFRpbWU6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIHNwZWVkOiBudW1iZXIgPSAwLCBtb3ZlVmVjdG9yOiBWZWN0b3IgPSBudWxsKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmZyb20odGhpcy52ZWN0b3IueCAqIGVsYXBzZWRUaW1lLCB0aGlzLnZlY3Rvci55ICogZWxhcHNlZFRpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb3B5KCk6IE1vdmUge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29uc3RhbnRNb3ZlKFZlY3Rvci5mcm9tT3RoZXIodGhpcy52ZWN0b3IpKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHNldFJvdGF0aW9uKHJvdGF0aW9uOiBudW1iZXIpOiBNb3ZlIHtcclxuICAgICAgICB0aGlzLnZlY3Rvci5yb3RhdGUocm90YXRpb24pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBEeW5hbWljTW92ZSBleHRlbmRzIE1vdmUge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkZWNTcGVlZDogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlKGVsYXBzZWRUaW1lOiBudW1iZXIsIHJvdGF0aW9uOiBudW1iZXIsIHNwZWVkOiBudW1iZXIpOiBWZWN0b3Ige1xyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY29weSgpOiBNb3ZlIHtcclxuICAgICAgICByZXR1cm4gbmV3IER5bmFtaWNNb3ZlKHRoaXMuZGVjU3BlZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJvdGF0aW9uKHJvdGF0aW9uOiBudW1iZXIpIHtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgU2hhcGVFbnVtID0ge1xyXG4gICAgUExBWUVSOiBuZXcgUmVjdGFuZ2xlKDIwLCAzNSwgXCIjNmE3ZmVkXCIsIDApLFxyXG4gICAgRU5FTVk6IG5ldyBSZWN0YW5nbGUoNDUsIDUwLCBcIiNmZjAwMDBcIiwgMCksXHJcbiAgICBTSE9UOiBuZXcgUmVjdGFuZ2xlKDUsIDUsIFwiI2ZmZmZmZlwiLCAwKSxcclxuICAgIEhFQUxUSF9FTkVNWTogbmV3IFJlY3RhbmdsZSg0NSwgNTAsIFwiIzkxZmY2ZlwiLCAwKSxcclxuICAgIEJJR19PTkU6IG5ldyBSZWN0YW5nbGUoNjAsIDYwLCBcIiNmZmJiMDBcIiwgMCksXHJcbiAgICBGQVNUX09ORTogbmV3IFJlY3RhbmdsZSg0MCwgNDAsIFwiI2Y1YTNmZlwiLCAwKSxcclxuICAgIENMT1VEOiBuZXcgUmVjdGFuZ2xlKDE1MCwgMTUwLCBcIiMwYTFlM2FcIiwgMClcclxufTtcclxuXHJcbmNvbnN0IEJvdW5kYXJ5RW51bSA9IHtcclxuICAgIE5PTkU6IG5ldyBCb3VuZGFyeShOdW1iZXIuTUlOX1ZBTFVFLCBOdW1iZXIuTUlOX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKSxcclxuICAgIFNIT1Q6IG5ldyBCb3VuZGFyeSgwLCAwLCBXSURUSCwgSEVJR0hUKSxcclxuICAgIENMT1VEOiBuZXcgQm91bmRhcnkoLVNoYXBlRW51bS5DTE9VRC53aWR0aCwgLVNoYXBlRW51bS5DTE9VRC5oZWlnaHQsIFdJRFRIICsgU2hhcGVFbnVtLkNMT1VELndpZHRoLCBIRUlHSFQgKyBTaGFwZUVudW0uQ0xPVUQuaGVpZ2h0KVxyXG59O1xyXG5cclxuY29uc3QgQm91bnR5RW51bSA9IHtcclxuICAgIFNDT1JFX1NUOiAoZW5lbXk6IFVuaXQsIHNob3Q6IEdhbWVPYmplY3QsIHR5cGU6IEhpdFR5cGVFbnVtKSA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gSGl0VHlwZUVudW0uREVTVFJPWUVEKVxyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoMTApO1xyXG4gICAgfSxcclxuICAgIEhFQUxUSF9TVDogKGVuZW15OiBVbml0LCBzaG90OiBHYW1lT2JqZWN0LCB0eXBlOiBIaXRUeXBlRW51bSkgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlID09IEhpdFR5cGVFbnVtLkRFU1RST1lFRClcclxuICAgICAgICAgICAgdXBkYXRlU3RhdHVzKDAsIDEpO1xyXG4gICAgfSxcclxuICAgIFNDT1JFX0ZBU1Q6IChlbmVteTogVW5pdCwgc2hvdDogR2FtZU9iamVjdCwgdHlwZTogSGl0VHlwZUVudW0pID0+IHtcclxuICAgICAgICBpZiAodHlwZSA9PSBIaXRUeXBlRW51bS5ISVQpXHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygyMCk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gSGl0VHlwZUVudW0uREVTVFJPWUVEKVxyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoNTApO1xyXG4gICAgfSxcclxuICAgIFNDT1JFXzMwOiAoZW5lbXk6IFVuaXQsIHNob3Q6IEdhbWVPYmplY3QsIHR5cGU6IEhpdFR5cGVFbnVtKSA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gSGl0VHlwZUVudW0uREVTVFJPWUVEKVxyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoMzApO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgTW92ZVR5cGVFbnVtID0ge1xyXG4gICAgUExBWUVSOiBuZXcgRHluYW1pY01vdmUoREVDRUxFUkFUSU9OX1NQRUVEKSxcclxuICAgIEVORU1ZX1NJTVBMRTogbmV3IENvbnN0YW50TW92ZShWZWN0b3IuZnJvbSgwLCAwLjEpKSxcclxuICAgIFBMQVlFUl9TSE9UOiBuZXcgQ29uc3RhbnRNb3ZlKFZlY3Rvci5mcm9tKDAsIC0wLjUpKSxcclxuICAgIEVORU1ZX1NIT1Q6IG5ldyBDb25zdGFudE1vdmUoVmVjdG9yLmZyb20oMCwgMC40KSksXHJcbiAgICBDTE9VRDogbmV3IENvbnN0YW50TW92ZShWZWN0b3IuZnJvbSgwLCAwLjA1KSlcclxufTtcclxuXHJcbmNvbnN0IFNob3RUeXBlRW51bSA9IHtcclxuICAgIFBMQVlFUjogbmV3IFNob3RUeXBlKDEsIFNoYXBlRW51bS5TSE9ULCBCb3VuZGFyeUVudW0uU0hPVCwgTW92ZVR5cGVFbnVtLlBMQVlFUl9TSE9UKSxcclxuICAgIEVORU1ZOiBuZXcgU2hvdFR5cGUoMSwgU2hhcGVFbnVtLlNIT1QsIEJvdW5kYXJ5RW51bS5TSE9ULCBNb3ZlVHlwZUVudW0uRU5FTVlfU0hPVClcclxufTtcclxuXHJcbmNvbnN0IFVuaXRUeXBlRW51bSA9IHtcclxuICAgIFBMQVlFUjogbmV3IFVuaXRUeXBlKDMsIDAsIFNoYXBlRW51bS5QTEFZRVIsIEJvdW5kYXJ5RW51bS5OT05FLCBNb3ZlVHlwZUVudW0uUExBWUVSLCBTaG90VHlwZUVudW0uUExBWUVSLCBbXSksXHJcbn07XHJcblxyXG5jb25zdCBFbnZpcm9ubWVudFR5cGVFbnVtID0ge1xyXG4gICAgQ0xPVUQ6IG5ldyBFbnZpcm9ubWVudFR5cGUoU2hhcGVFbnVtLkNMT1VELCBCb3VuZGFyeUVudW0uQ0xPVUQsIE1vdmVUeXBlRW51bS5DTE9VRClcclxufTtcclxuXHJcbi8vZW5kcmVnaW9uXHJcblxyXG4vL3JlZ2lvbiBHYW1lT2JqZWN0c1xyXG50eXBlIEhpdENhbGxiYWNrID0gKG90aGVyOiBHYW1lT2JqZWN0KSA9PiBhbnk7XHJcbnR5cGUgRGVzdHJveWVkQ2FsbGJhY2sgPSAoY2F1c2U6IERlYXRoQ2F1c2VFbnVtKSA9PiBhbnk7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBHYW1lT2JqZWN0IHtcclxuICAgIHB1YmxpYyByb3RhdGlvbjogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBtb3ZlOiBNb3ZlID0gbnVsbDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3BlZWQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHB1YmxpYyBpZDogbnVtYmVyLCBwdWJsaWMgdHlwZTogR2FtZU9iamVjdFR5cGUsIHB1YmxpYyB4OiBudW1iZXIsIHB1YmxpYyB5OiBudW1iZXIsIHB1YmxpYyByb3Q6IG51bWJlciwgcHVibGljIG9uRGVzdHJveWVkOiBEZXN0cm95ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMubW92ZSA9IHR5cGUubW92ZS5jb3B5KCkuc2V0Um90YXRpb24ocm90KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoZWxhcHNlZFRpbWU6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIG1vdmVtZW50OiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBsZXQgbW92ZSA9IHRoaXMubW92ZS5tb3ZlKGVsYXBzZWRUaW1lKTtcclxuICAgICAgICBpZiAodGhpcy50eXBlLmJvdW5kYXJ5LmlzSW5Cb3VuZHModGhpcy54ICsgbW92ZS54LCB0aGlzLnkgKyBtb3ZlLnksIHRoaXMudHlwZS5zaGFwZSkpIHtcclxuICAgICAgICAgICAgdGhpcy54ICs9IG1vdmUueDtcclxuICAgICAgICAgICAgdGhpcy55ICs9IG1vdmUueTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSAhPSBVbml0VHlwZUVudW0uUExBWUVSKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25EZXN0cm95ZWQoRGVhdGhDYXVzZUVudW0uT1VUX09GX0JPVU5EUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzQ29sbGlkaW5nV2l0aChvdGhlcjogR2FtZU9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vVE9ET1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvL3JlZ2lvbiBIZWxwZXIgTWV0aG9kc1xyXG4gICAgcHVibGljIGdldFdpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5zaGFwZS5nZXRXaWR0aCgpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUuc2hhcGUuZ2V0SGVpZ2h0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvbG9yKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5zaGFwZS5jb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICAvL2VuZHJlZ2lvblxyXG59XHJcblxyXG5jbGFzcyBVbml0IGV4dGVuZHMgR2FtZU9iamVjdCB7XHJcbiAgICBwdWJsaWMgbW92ZVZlY3RvcjogVmVjdG9yID0gVmVjdG9yLnplcm8oKTtcclxuXHJcbiAgICBwdWJsaWMgb25IaXQ6IEhpdENhbGxiYWNrID0gb3RoZXIgPT4ge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFNob3QpIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyLmluaXRpYXRvciA9PSB0aGlzLnR5cGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMudHlwZS5ib3VudGllcy5mb3JFYWNoKGJvdW50eSA9PiB7XHJcbiAgICAgICAgICAgICAgICBib3VudHkodGhpcywgb3RoZXIsIEhpdFR5cGVFbnVtLkhJVClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubGl2ZXMgLT0gb3RoZXIudHlwZS5kbWc7XHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxpdmVzLS07XHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubGl2ZXMgPCAxKVxyXG4gICAgICAgICAgICB0aGlzLm9uRGVzdHJveWVkKERlYXRoQ2F1c2VFbnVtLkxJVkVTKTtcclxuICAgIH07XHJcbiAgICBwdWJsaWMgbGl2ZXM6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwdWJsaWMgdHlwZTogVW5pdFR5cGUsIHg6IG51bWJlciwgeTogbnVtYmVyLCByb3Q6IG51bWJlciwgb25EZXN0cm95ZWQ6IERlc3Ryb3llZENhbGxiYWNrKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHR5cGUsIHgsIHksIHJvdCwgb25EZXN0cm95ZWQpO1xyXG4gICAgICAgIHRoaXMubGl2ZXMgPSB0eXBlLmxpdmVzO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQWxpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGl2ZXMgPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlzSW5Cb3VuZHMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5ib3VuZGFyeS5pc0luQm91bmRzKHRoaXMueCwgdGhpcy55LCB0aGlzLnR5cGUuc2hhcGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShlbGFwc2VkVGltZTogbnVtYmVyLCByb3RhdGlvbjogbnVtYmVyID0gMCwgbW92ZW1lbnQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZShlbGFwc2VkVGltZSwgcm90YXRpb24sIG1vdmVtZW50KTtcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBVbml0VHlwZUVudW0uUExBWUVSKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLnR5cGUuc2hvdEZyZXEpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvb3QoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG9vdCgpOiBTaG90IHtcclxuICAgICAgICBsZXQgaWQgPSBzaG90SWRDb3VudGVyO1xyXG4gICAgICAgIGxldCBzaG90ID0gbmV3IFNob3QoaWQsIHRoaXMudHlwZSwgdGhpcy50eXBlLnNob3QsIHRoaXMueCArIHRoaXMuZ2V0V2lkdGgoKSAvIDIsIHRoaXMueSArIHRoaXMuZ2V0SGVpZ2h0KCkgLyAyLCB0aGlzLnJvdGF0aW9uLCAoY2F1c2U6IERlYXRoQ2F1c2VFbnVtKSA9PiB7XHJcbiAgICAgICAgICAgIHNob3RzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5tb3ZlVmVjdG9yLmFkZChWZWN0b3IuY29uc3RydWN0KDAuNjUsIHRoaXMucm90YXRpb24pLnNjYWxlKC0xKSk7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IE1hdGgubWluKE1BWF9TUEVFRCwgdGhpcy5zcGVlZCArICgwLjY1KSk7XHJcbiAgICAgICAgc2hvdHMuc2V0KGlkLCBzaG90KTtcclxuICAgICAgICBzaG90SWRDb3VudGVyKys7XHJcbiAgICAgICAgcmV0dXJuIHNob3Q7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBsYXllciBleHRlbmRzIFVuaXQge1xyXG4gICAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgcHVibGljIHR5cGU6IFVuaXRUeXBlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgcm90OiBudW1iZXIsIG9uRGVzdHJveWVkOiBEZXN0cm95ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIHN1cGVyKGlkLCB0eXBlLCB4LCB5LCByb3QsIG9uRGVzdHJveWVkKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoZWxhcHNlZFRpbWU6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIG1vdmVtZW50OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gbW9kKHRoaXMucm90YXRpb24gKyByb3RhdGlvbiAqIFJPVEFUSU9OX1NQRUVEICogZWxhcHNlZFRpbWUsIDM2MCk7XHJcbiAgICAgICAgbGV0IG9sZFNwZWVkID0gdGhpcy5zcGVlZDtcclxuICAgICAgICB0aGlzLnNwZWVkID0gTWF0aC5tYXgoMCwgdGhpcy5zcGVlZCAtIChERUNFTEVSQVRJT05fU1BFRUQgKiBlbGFwc2VkVGltZSAvIDEwMCkpO1xyXG4gICAgICAgIHRoaXMubW92ZVZlY3Rvci5zY2FsZShvbGRTcGVlZCA9PT0gMCA/IDEgOiB0aGlzLnNwZWVkIC8gb2xkU3BlZWQpO1xyXG4gICAgICAgIG9sZFNwZWVkID0gdGhpcy5zcGVlZDtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNwZWVkOiBcIiwgdGhpcy5zcGVlZCk7XHJcbiAgICAgICAgaWYgKG1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlZWQgPSBNYXRoLm1pbihNQVhfU1BFRUQsIHRoaXMuc3BlZWQgKyAoQUNDX1NQRUVEICogZWxhcHNlZFRpbWUgLyAxMDApKTtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlVmVjdG9yLmFkZChWZWN0b3IuY29uc3RydWN0KHRoaXMuc3BlZWQgLSBvbGRTcGVlZCwgdGhpcy5yb3RhdGlvbikpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zcGVlZCA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLm1vdmVWZWN0b3IgPSBWZWN0b3IuemVybygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy54ID0gbW9kKHRoaXMueCArIHRoaXMubW92ZVZlY3Rvci54LCBXSURUSCk7XHJcbiAgICAgICAgdGhpcy55ID0gbW9kKHRoaXMueSArIHRoaXMubW92ZVZlY3Rvci55LCBIRUlHSFQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTaG90IGV4dGVuZHMgR2FtZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwdWJsaWMgaW5pdGlhdG9yOiBVbml0VHlwZSwgcHVibGljIHR5cGU6IFNob3RUeXBlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgcm90OiBudW1iZXIsIG9uRGVzdHJveWVkOiBEZXN0cm95ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIHN1cGVyKGlkLCB0eXBlLCB4LCB5LCByb3QsIG9uRGVzdHJveWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0NvbGxpZGluZ1dpdGgob3RoZXI6IEdhbWVPYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIXN1cGVyLmlzQ29sbGlkaW5nV2l0aChvdGhlcikgJiYgdGhpcy5pbml0aWF0b3IgIT09IG90aGVyLnR5cGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEVudmlyb25tZW50IGV4dGVuZHMgR2FtZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCB0eXBlOiBFbnZpcm9ubWVudFR5cGUsIHg6IG51bWJlciwgeTogbnVtYmVyLCByb3Q6IG51bWJlciwgb25EZXN0cm95ZWQ6IERlc3Ryb3llZENhbGxiYWNrKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHR5cGUsIHgsIHksIHJvdCwgb25EZXN0cm95ZWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vL2VuZHJlZ2lvblxyXG5cclxudmFyIGZyb250Q2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcclxudmFyIGZyb250Q29udGV4dCA9IGZyb250Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbnZhciBiYWNrQ2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG5iYWNrQ2FudmFzLndpZHRoID0gV0lEVEg7XHJcbmJhY2tDYW52YXMuaGVpZ2h0ID0gSEVJR0hUO1xyXG52YXIgYmFja0NvbnRleHQgPSBiYWNrQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbnZhciBzdGFydCA9IG51bGw7XHJcbnZhciBjdXJyZW50SW5wdXQgPSB7XHJcbiAgICBzcGFjZTogZmFsc2UsXHJcbiAgICBsZWZ0OiBmYWxzZSxcclxuICAgIHJpZ2h0OiBmYWxzZSxcclxuICAgIHVwOiBmYWxzZSxcclxuICAgIGRvd246IGZhbHNlXHJcbn07XHJcbnZhciBwcmlvcklucHV0ID0ge1xyXG4gICAgc3BhY2U6IGZhbHNlLFxyXG4gICAgbGVmdDogZmFsc2UsXHJcbiAgICByaWdodDogZmFsc2UsXHJcbiAgICB1cDogZmFsc2UsXHJcbiAgICBkb3duOiBmYWxzZVxyXG59O1xyXG5cclxudmFyIHBsYXllciA9IG5ldyBQbGF5ZXIoMCwgVW5pdFR5cGVFbnVtLlBMQVlFUiwgMCwgMCwgMCwgKCkgPT4ge1xyXG4gICAgZW5kR2FtZSgpO1xyXG59KTtcclxucGxheWVyLnggPSBXSURUSCAvIDIgLSBwbGF5ZXIuZ2V0V2lkdGgoKSAvIDI7XHJcbnBsYXllci55ID0gSEVJR0hUIC0gcGxheWVyLmdldEhlaWdodCgpO1xyXG52YXIgc2NvcmUgPSAwO1xyXG52YXIgc2NvcmVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY29yZV90ZXh0XCIpO1xyXG52YXIgbGl2ZXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXZlc190ZXh0XCIpO1xyXG5cclxudmFyIGVuZW15VGltZVRvU3Bhd24gPSAwO1xyXG52YXIgZW5lbXlJZENvdW50ZXIgPSAwO1xyXG52YXIgc2hvdElkQ291bnRlciA9IDA7XHJcbnZhciBlbnZpcm9ubWVudElkQ291bnRlciA9IDA7XHJcbi8vIEB0cy1pZ25vcmVcclxudmFyIGVuZW1pZXMgPSBuZXcgTWFwPG51bWJlciwgVW5pdD4oKTtcclxuLy8gQHRzLWlnbm9yZVxyXG52YXIgc2hvdHMgPSBuZXcgTWFwPG51bWJlciwgU2hvdD4oKTtcclxuLy8gQHRzLWlnbm9yZVxyXG52YXIgZW52aXJvbm1lbnRzID0gbmV3IE1hcDxudW1iZXIsIEVudmlyb25tZW50PigpO1xyXG52YXIgcnVubmluZzogYm9vbGVhbiA9IHRydWU7XHJcblxyXG5mdW5jdGlvbiBsb29wKHRpbWVzdGFtcCkge1xyXG4gICAgaWYgKCFydW5uaW5nKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGlmICghc3RhcnQpIHN0YXJ0ID0gdGltZXN0YW1wO1xyXG4gICAgbGV0IGVsYXBzZWRUaW1lID0gdGltZXN0YW1wIC0gc3RhcnQ7XHJcbiAgICBzdGFydCA9IHRpbWVzdGFtcDtcclxuXHJcbiAgICBjcmVhdGVFbmVteShlbGFwc2VkVGltZSk7XHJcbiAgICBjcmVhdGVFbnZpcm9ubWVudCgpO1xyXG4gICAgdXBkYXRlKGVsYXBzZWRUaW1lKTtcclxuICAgIHJlbmRlcihlbGFwc2VkVGltZSk7XHJcbiAgICBwb2xsSW5wdXQoKTtcclxuXHJcbiAgICBmcm9udENvbnRleHQuY2xlYXJSZWN0KDAsIDAsIFdJRFRILCBIRUlHSFQpO1xyXG4gICAgZnJvbnRDb250ZXh0LmRyYXdJbWFnZShiYWNrQ2FudmFzLCAwLCAwKTtcclxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcClcclxufVxyXG5cclxuZnVuY3Rpb24gcG9sbElucHV0KCkge1xyXG4gICAgcHJpb3JJbnB1dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3VycmVudElucHV0KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUtleWRvd24oZXZlbnQpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XHJcbiAgICAgICAgY2FzZSAnICc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnB1dC5zcGFjZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxyXG4gICAgICAgIGNhc2UgJ3cnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQudXAgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxyXG4gICAgICAgIGNhc2UgJ2EnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQubGVmdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxyXG4gICAgICAgIGNhc2UgJ2QnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQucmlnaHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlkb3duKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUtleXVwKGV2ZW50KSB7XHJcbiAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xyXG4gICAgICAgIGNhc2UgJyAnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQuc3BhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6XHJcbiAgICAgICAgY2FzZSAndyc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnB1dC51cCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxyXG4gICAgICAgIGNhc2UgJ2EnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQubGVmdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcclxuICAgICAgICBjYXNlICdkJzpcclxuICAgICAgICAgICAgY3VycmVudElucHV0LnJpZ2h0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBoYW5kbGVLZXl1cCk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFbmVteShlbGFwc2VkVGltZTogbnVtYmVyKSB7XHJcbiAgICAvLyBlbmVteVRpbWVUb1NwYXduICs9IGVsYXBzZWRUaW1lO1xyXG4gICAgLy8gaWYgKGVuZW15VGltZVRvU3Bhd24gPiBFTkVNWV9TUEFXTl9SQVRFKSB7XHJcbiAgICAvLyAgICAgZW5lbXlUaW1lVG9TcGF3biA9IDA7XHJcbiAgICAvLyAgICAgaWYgKE1hdGgucmFuZG9tKCkgKiBFTkVNWV9TUEFXTl9QUk9CQUJJTElUWSA8IDEpIHtcclxuICAgIC8vICAgICAgICAgbGV0IGlkID0gZW5lbXlJZENvdW50ZXI7XHJcbiAgICAvLyAgICAgICAgIGxldCB0eXBlID0gVW5pdFR5cGVFbnVtLkVORU1ZO1xyXG4gICAgLy8gICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwKSkge1xyXG4gICAgLy8gICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgLy8gICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgLy8gICAgICAgICAgICAgICAgIHR5cGUgPSBVbml0VHlwZUVudW0uSEVBTFRIX0VORU1ZO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgLy8gICAgICAgICAgICAgICAgIHR5cGUgPSBVbml0VHlwZUVudW0uQklHX09ORTtcclxuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIC8vICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgIC8vICAgICAgICAgICAgICAgICB0eXBlID0gVW5pdFR5cGVFbnVtLkZBU1RfT05FO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIGVuZW1pZXMuc2V0KGlkLCBuZXcgVW5pdChpZCwgdHlwZSwgTWF0aC5yYW5kb20oKSAqIChXSURUSCAtIFNoYXBlRW51bS5FTkVNWS53aWR0aCksIC1TaGFwZUVudW0uRU5FTVkuaGVpZ2h0LCBmdW5jdGlvbiAoY2F1c2U6IERlYXRoQ2F1c2VFbnVtKSB7XHJcbiAgICAvLyAgICAgICAgICAgICBpZiAoY2F1c2UgPT0gRGVhdGhDYXVzZUVudW0uT1VUX09GX0JPVU5EUykge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIHBsYXllci5vbkhpdCh0aGlzKTtcclxuICAgIC8vICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2F1c2UgPT0gRGVhdGhDYXVzZUVudW0uTElWRVMpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLnR5cGUuYm91bnRpZXMuZm9yRWFjaChib3VudHkgPT4gYm91bnR5KHRoaXMsIG51bGwsIEhpdFR5cGVFbnVtLkRFU1RST1lFRCkpO1xyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICAgICAgZW5lbWllcy5kZWxldGUoaWQpO1xyXG4gICAgLy8gICAgICAgICB9KSk7XHJcbiAgICAvLyAgICAgICAgIGVuZW15SWRDb3VudGVyKys7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFbnZpcm9ubWVudCgpIHtcclxuICAgIHN3aXRjaCAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSkge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgbGV0IGlkID0gZW52aXJvbm1lbnRJZENvdW50ZXI7XHJcbiAgICAgICAgICAgIGVudmlyb25tZW50cy5zZXQoaWQsIG5ldyBFbnZpcm9ubWVudChpZCwgRW52aXJvbm1lbnRUeXBlRW51bS5DTE9VRCwgTWF0aC5yYW5kb20oKSAqIFdJRFRILCAtRW52aXJvbm1lbnRUeXBlRW51bS5DTE9VRC5zaGFwZS5nZXRIZWlnaHQoKSwgMCwgZnVuY3Rpb24gKGNhdXNlOiBEZWF0aENhdXNlRW51bSkge1xyXG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnRzLmRlbGV0ZSh0aGlzLmlkKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBlbnZpcm9ubWVudElkQ291bnRlcisrO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGUoZWxhcHNlZFRpbWU6IG51bWJlcikge1xyXG4gICAgaWYgKGN1cnJlbnRJbnB1dC5zcGFjZSAmJiAhcHJpb3JJbnB1dC5zcGFjZSkge1xyXG4gICAgICAgIHBsYXllci5zaG9vdCgpO1xyXG4gICAgfVxyXG4gICAgcGxheWVyLnVwZGF0ZShlbGFwc2VkVGltZSwgY3VycmVudElucHV0LmxlZnQgPyAtMSA6IChjdXJyZW50SW5wdXQucmlnaHQgPyAxIDogMCksIGN1cnJlbnRJbnB1dC51cCk7XHJcblxyXG4gICAgZW5lbWllcy5mb3JFYWNoKHZhbHVlID0+IHZhbHVlLnVwZGF0ZShlbGFwc2VkVGltZSkpO1xyXG4gICAgc2hvdHMuZm9yRWFjaCh2YWx1ZSA9PiB2YWx1ZS51cGRhdGUoZWxhcHNlZFRpbWUpKTtcclxuXHJcbiAgICBzaG90cy5mb3JFYWNoKHNob3QgPT4ge1xyXG4gICAgICAgIGlmIChzaG90LmlzQ29sbGlkaW5nV2l0aChwbGF5ZXIpKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5vbkhpdChzaG90KTtcclxuICAgICAgICAgICAgc2hvdC5vbkRlc3Ryb3llZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbmVtaWVzLmZvckVhY2goZW5lbXkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2hvdC5pc0NvbGxpZGluZ1dpdGgoZW5lbXkpKSB7XHJcbiAgICAgICAgICAgICAgICBlbmVteS5vbkhpdChzaG90KTtcclxuICAgICAgICAgICAgICAgIHNob3Qub25EZXN0cm95ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxuICAgIGVudmlyb25tZW50cy5mb3JFYWNoKHZhbHVlID0+IHZhbHVlLnVwZGF0ZShlbGFwc2VkVGltZSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoZWxhcHNlZFRpbWU6IG51bWJlcikge1xyXG4gICAgYmFja0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIFdJRFRILCBIRUlHSFQpO1xyXG5cclxuICAgIGVudmlyb25tZW50cy5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICBiYWNrQ29udGV4dC5maWxsU3R5bGUgPSB2YWx1ZS5nZXRDb2xvcigpO1xyXG4gICAgICAgIGJhY2tDb250ZXh0LmZpbGxSZWN0KHZhbHVlLngsIHZhbHVlLnksIHZhbHVlLmdldFdpZHRoKCksIHZhbHVlLmdldEhlaWdodCgpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGJhY2tDb250ZXh0LnNhdmUoKTtcclxuICAgIGJhY2tDb250ZXh0LmZpbGxTdHlsZSA9IHBsYXllci5nZXRDb2xvcigpO1xyXG4gICAgYmFja0NvbnRleHQudHJhbnNsYXRlKHBsYXllci54ICsgMC41ICogcGxheWVyLmdldFdpZHRoKCksIHBsYXllci55ICsgMC41ICogcGxheWVyLmdldEhlaWdodCgpKTtcclxuICAgIGJhY2tDb250ZXh0LnJvdGF0ZShyYWQocGxheWVyLnJvdGF0aW9uKSk7XHJcbiAgICBiYWNrQ29udGV4dC50cmFuc2xhdGUoLShwbGF5ZXIueCArIDAuNSAqIHBsYXllci5nZXRXaWR0aCgpKSwgLShwbGF5ZXIueSArIDAuNSAqIHBsYXllci5nZXRIZWlnaHQoKSkpO1xyXG4gICAgYmFja0NvbnRleHQuZmlsbFJlY3QocGxheWVyLngsIHBsYXllci55LCBwbGF5ZXIuZ2V0V2lkdGgoKSwgcGxheWVyLmdldEhlaWdodCgpKTtcclxuICAgIGJhY2tDb250ZXh0LnJlc3RvcmUoKTtcclxuXHJcbiAgICBlbmVtaWVzLmZvckVhY2godmFsdWUgPT4ge1xyXG4gICAgICAgIGJhY2tDb250ZXh0LmZpbGxTdHlsZSA9IHZhbHVlLmdldENvbG9yKCk7XHJcbiAgICAgICAgYmFja0NvbnRleHQuZmlsbFJlY3QodmFsdWUueCwgdmFsdWUueSwgdmFsdWUuZ2V0V2lkdGgoKSwgdmFsdWUuZ2V0SGVpZ2h0KCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2hvdHMuZm9yRWFjaCh2YWx1ZSA9PiB7XHJcbiAgICAgICAgYmFja0NvbnRleHQuZmlsbFN0eWxlID0gdmFsdWUuZ2V0Q29sb3IoKTtcclxuICAgICAgICBiYWNrQ29udGV4dC5maWxsUmVjdCh2YWx1ZS54LCB2YWx1ZS55LCB2YWx1ZS5nZXRXaWR0aCgpLCB2YWx1ZS5nZXRIZWlnaHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlU3RhdHVzKHNjb3JlRGVsdGE6IG51bWJlciwgaGVhbHRoRGVsdGE6IG51bWJlciA9IDApIHtcclxuICAgIHNjb3JlICs9IHNjb3JlRGVsdGE7XHJcbiAgICBwbGF5ZXIubGl2ZXMgKz0gaGVhbHRoRGVsdGE7XHJcbiAgICBzY29yZUVsZW1lbnQuaW5uZXJUZXh0ID0gXCJcIiArIHNjb3JlO1xyXG4gICAgbGl2ZXNFbGVtZW50LmlubmVyVGV4dCA9IFwiXCIgKyBwbGF5ZXIubGl2ZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuZEdhbWUoKSB7XHJcbiAgICBydW5uaW5nID0gZmFsc2U7XHJcbiAgICBhbGVydChcIkdhbWUgb3ZlciFcIik7XHJcbn1cclxuXHJcbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yIHtcclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IocHVibGljIHg6IG51bWJlciwgcHVibGljIHk6IG51bWJlciwgLypwcml2YXRlIG1vZFg6IG51bWJlciwgcHJpdmF0ZSBtb2RZOiBudW1iZXIqLykge1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbSh4OiBudW1iZXIsIHk6IG51bWJlci8qLCBtb2RYOiBudW1iZXIsIG1vZFk6IG51bWJlciovKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih4LCB5LyosIG1vZFgsIG1vZFkqLyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBmcm9tT3RoZXIob3RoZXI6IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3Iob3RoZXIueCwgb3RoZXIueS8qLCBvdGhlci5tb2RYLCBvdGhlci5tb2RZKi8pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgemVybygvKm1vZFg6IG51bWJlciwgbW9kWTogbnVtYmVyKi8pOiBWZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKDAsIDAvKiwgbW9kWCwgbW9kWSovKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbnN0cnVjdChtYWduaXR1ZGU6IG51bWJlciwgYW5nbGU6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IobWFnbml0dWRlICogTWF0aC5jb3MocmFkKGFuZ2xlKSksIG1hZ25pdHVkZSAqIE1hdGguc2luKHJhZChhbmdsZSkpKS5yb3RhdGUoLTkwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNaZXJvKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggPT0gMCAmJiB0aGlzLnkgPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbWFnbml0dWRlKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkKGE6IFZlY3RvciwgYjogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmZyb21PdGhlcihhKS5hZGQoYik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZChvdGhlcjogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICB0aGlzLnggKz0gb3RoZXIueDtcclxuICAgICAgICB0aGlzLnkgKz0gb3RoZXIueTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJvdGF0ZSh2ZWN0b3I6IFZlY3RvciwgYW5nbGU6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5mcm9tT3RoZXIodmVjdG9yKS5yb3RhdGUoYW5nbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByb3RhdGUoYW5nbGU6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgbGV0IG9sZFggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy54ICogTWF0aC5jb3MocmFkKGFuZ2xlKSkgLSB0aGlzLnkgKiBNYXRoLnNpbihyYWQoYW5nbGUpKTtcclxuICAgICAgICB0aGlzLnkgPSBvbGRYICogTWF0aC5zaW4ocmFkKGFuZ2xlKSkgKyB0aGlzLnkgKiBNYXRoLmNvcyhyYWQoYW5nbGUpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHNjYWxlKHZlY3RvcjogVmVjdG9yLCBzY2FsYXI6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5mcm9tT3RoZXIodmVjdG9yKS5zY2FsZShzY2FsYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY2FsZShzY2FsYXI6IG51bWJlcik6IFZlY3RvciB7XHJcbiAgICAgICAgdGhpcy54ICo9IHNjYWxhcjtcclxuICAgICAgICB0aGlzLnkgKj0gc2NhbGFyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbm9ybWFsaXplKHZlY3RvcjogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmZyb21PdGhlcih2ZWN0b3IpLm5vcm1hbGl6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBub3JtYWxpemUoKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYWduaXR1ZGUoKSA9PT0gMCA/IHRoaXMgOiB0aGlzLnNjYWxlKDEgLyB0aGlzLm1hZ25pdHVkZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIG1vZCh2ZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAvLyAgICAgcmV0dXJuIFZlY3Rvci5mcm9tT3RoZXIodmVjdG9yKS5tb2QoKTtcclxuICAgIC8vIH1cclxuICAgIC8vXHJcbiAgICAvLyBwdWJsaWMgbW9kKCk6IFZlY3RvciB7XHJcbiAgICAvLyAgICAgdGhpcy54ID0gbW9kKHRoaXMueCwgdGhpcy5tb2RYKTtcclxuICAgIC8vICAgICB0aGlzLnkgPSBtb2QodGhpcy55LCB0aGlzLm1vZFkpO1xyXG4gICAgLy8gICAgIHJldHVybiB0aGlzO1xyXG4gICAgLy8gfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1vZChuOiBudW1iZXIsIG06IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gKChuICUgbSkgKyBtKSAlIG07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByYWQobjogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBuICogKE1hdGguUEkgLyAxODApO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==