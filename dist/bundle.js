!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o,r,s=n(1),u=800,a=600,h=s.default.from(0,-.5);!function(t){t[t.OUT_OF_BOUNDS=0]="OUT_OF_BOUNDS",t[t.LIVES=1]="LIVES"}(o||(o={})),function(t){t[t.HIT=0]="HIT",t[t.DESTROYED=1]="DESTROYED"}(r||(r={}));var c=function(){function t(t,e,n,i){this.minX=t,this.minY=e,this.maxX=n,this.maxY=i}return t.prototype.isInBounds=function(t,e,n){return t>=this.minX&&e>=this.minY&&t+n.getWidth()<=this.maxX&&e+n.getHeight()<=this.maxY},t}(),f=function(){return function(t,e){this.color=t,this.mass=e}}(),d=function(t){function e(e,n,i,o){var r=t.call(this,i,o)||this;return r.width=e,r.height=n,r}return i(e,t),e.prototype.isInBounds=function(t,e,n){},e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e}(f),l=(function(t){function e(e,n,i){var o=t.call(this,n,i)||this;return o.radius=e,o}i(e,t),e.prototype.isInBounds=function(t,e,n){},e.prototype.getHeight=function(){return 2*this.radius},e.prototype.getWidth=function(){return 2*this.radius}}(f),function(){return function(t,e,n){this.shape=t,this.boundary=e,this.move=n}}()),p=function(t){function e(e,n,i,o,r,s,u){var a=t.call(this,i,o,r)||this;return a.lives=e,a.shotFreq=n,a.shot=s,a.bounties=u,a}return i(e,t),e}(l),y=function(t){function e(e,n,i,o){var r=t.call(this,n,i,o)||this;return r.dmg=e,r}return i(e,t),e}(l),m=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return i(e,t),e}(l),v=function(){function t(){}return t.prototype.move=function(t,e,n,i){throw void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=null),new Error("Not Implemented!")},t}(),g=function(t){function e(e,n){void 0===n&&(n=0);var i=t.call(this)||this;return i.vector=e,i.rotation=n,0!=i.rotation&&e.rotate(i.rotation),i}return i(e,t),e.prototype.move=function(t,e,n,i){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=null),s.default.from(this.vector.x*t,this.vector.y*t)},e.prototype.setRotation=function(t){this.rotation=t,this.vector.rotate(t)},e}(v),O=function(t){function e(e,n){var i=t.call(this)||this;return i.accVector=e,i.decSpeed=n,i}return i(e,t),e.prototype.move=function(t,e,n,i){var o=s.default.fromOther(i).normalize().scale(-this.decSpeed);return 0!=n&&(o.add(s.default.fromOther(i).add(o).scale(-.5)),o.add(s.default.fromOther(this.accVector).rotate(e)).normalize().scale(n)),o},e}(v),w={PLAYER:new d(20,35,"#6a7fed",0),ENEMY:new d(45,50,"#ff0000",0),SHOT:new d(5,5,"#ffffff",0),HEALTH_ENEMY:new d(45,50,"#91ff6f",0),BIG_ONE:new d(60,60,"#ffbb00",0),FAST_ONE:new d(40,40,"#f5a3ff",0),CLOUD:new d(150,150,"#0a1e3a",0)},E={NONE:new c(Number.MIN_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),SHOT:new c(0,0,u,a),CLOUD:new c(-w.CLOUD.width,-w.CLOUD.height,u+w.CLOUD.width,a+w.CLOUD.height)},x={PLAYER:new O(h,.08),ENEMY_SIMPLE:new g(s.default.from(0,.1)),PLAYER_SHOT:new g(s.default.from(0,-.5)),ENEMY_SHOT:new g(s.default.from(0,.4)),CLOUD:new g(s.default.from(0,.05))},_={PLAYER:new y(1,w.SHOT,E.SHOT,x.PLAYER_SHOT),ENEMY:new y(1,w.SHOT,E.SHOT,x.ENEMY_SHOT)},L={PLAYER:new p(3,0,w.PLAYER,E.NONE,x.PLAYER,_.PLAYER,[])},b={CLOUD:new m(w.CLOUD,E.CLOUD,x.CLOUD)},S=function(){function t(t,e,n,i,o){this.id=t,this.type=e,this.x=n,this.y=i,this.onDestroyed=o,this.rotation=0,this.speed=0}return t.prototype.update=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=this.type.move.move(t);this.type.boundary.isInBounds(this.x+i.x,this.y+i.y,this.type.shape)?(this.x+=i.x,this.y+=i.y):this.type!=L.PLAYER&&this.onDestroyed(o.OUT_OF_BOUNDS)},t.prototype.isCollidingWith=function(t){return!1},t.prototype.getWidth=function(){return this.type.shape.getWidth()},t.prototype.getHeight=function(){return this.type.shape.getHeight()},t.prototype.getColor=function(){return this.type.shape.color},t}(),M=function(t){function e(e,n,i,o,r){var s=t.call(this,e,n,i,o,r)||this;return s.type=n,s}return i(e,t),e.prototype.update=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),this.rotation=s.mod(this.rotation+.2*e*t,360),this.speed=Math.max(0,this.speed-.08),console.log("Speed: ",this.speed),n?(this.speed=Math.min(20,this.speed+.5),this.moveVector.add(s.default.fromOther(h).rotate(this.rotation)).normalize().scale(this.speed*t/100)):0===this.speed?this.moveVector=s.default.zero():this.moveVector.add(s.default.fromOther(this.moveVector).normalize().scale(-.08*t/100)),this.x=s.mod(this.x+this.moveVector.x,u),this.y=s.mod(this.y+this.moveVector.y,a)},e}(function(t){function e(e,n,i,u,a){var h=t.call(this,e,n,i,u,a)||this;return h.type=n,h.moveVector=s.default.zero(),h.onHit=function(t){if(t instanceof H){if(t.initiator==h.type)return;h.type.bounties.forEach(function(e){e(h,t,r.HIT)}),h.lives-=t.type.dmg,X(0)}else h.lives--,X(0);h.lives<1&&h.onDestroyed(o.LIVES)},h.lives=n.lives,h}return i(e,t),e.prototype.isAlive=function(){return this.lives>0},e.prototype.isInBounds=function(){return this.type.boundary.isInBounds(this.x,this.y,this.type.shape)},e.prototype.update=function(e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),t.prototype.update.call(this,e,n,i),this.type!==L.PLAYER)switch(Math.floor(Math.random()*this.type.shotFreq)){case 1:this.shoot()}},e.prototype.shoot=function(){var t=V,e=new H(t,this.type,this.type.shot,this.x+this.getWidth()/2,this.y,this.rotation,function(e){k.delete(t)});return k.set(t,e),V++,e},e}(S)),H=function(t){function e(e,n,i,o,r,u,a){void 0===u&&(u=0);var h=t.call(this,e,i,o,r,a)||this;return h.initiator=n,h.type=i,h.type.move=new g(s.default.fromOther(h.type.move.vector),u),h}return i(e,t),e.prototype.isCollidingWith=function(e){return t.prototype.isCollidingWith.call(this,e)&&this.initiator!==e.type},e}(S),A=function(t){function e(e,n,i,o,r){return t.call(this,e,n,i,o,r)||this}return i(e,t),e}(S),C=document.getElementById("canvas").getContext("2d"),D=document.createElement("canvas");D.width=u,D.height=a;var U=D.getContext("2d"),N=null,T={space:!1,left:!1,right:!1,up:!1,down:!1},Y={space:!1,left:!1,right:!1,up:!1,down:!1},P=new M(0,L.PLAYER,0,0,function(){F=!1,alert("Game over!")});P.x=u/2-P.getWidth()/2,P.y=a-P.getHeight();var R=0,I=document.getElementById("score_text"),W=document.getElementById("lives_text"),V=0,B=0,j=new Map,k=new Map,z=new Map,F=!0;function X(t,e){void 0===e&&(e=0),R+=t,P.lives+=e,I.innerText=""+R,W.innerText=""+P.lives}window.addEventListener("keydown",function(t){switch(t.key){case" ":T.space=!0;break;case"ArrowUp":case"w":T.up=!0;break;case"ArrowLeft":case"a":T.left=!0;break;case"ArrowRight":case"d":T.right=!0}}),window.addEventListener("keyup",function(t){switch(t.key){case" ":T.space=!1;break;case"ArrowUp":case"w":T.up=!1;break;case"ArrowLeft":case"a":T.left=!1;break;case"ArrowRight":case"d":T.right=!1}}),window.requestAnimationFrame(function t(e){if(F){N||(N=e);var n=e-N;N=e,function(){switch(Math.floor(100*Math.random())){case 1:var t=B;z.set(t,new A(t,b.CLOUD,Math.random()*u,-b.CLOUD.shape.getHeight(),function(t){z.delete(this.id)})),B++}}(),function(t){T.space&&!Y.space&&P.shoot(),P.update(t,T.left?-1:T.right?1:0,T.up),j.forEach(function(e){return e.update(t)}),k.forEach(function(e){return e.update(t)}),k.forEach(function(t){t.isCollidingWith(P)&&(P.onHit(t),t.onDestroyed()),j.forEach(function(e){t.isCollidingWith(e)&&(e.onHit(t),t.onDestroyed())})}),z.forEach(function(e){return e.update(t)})}(n),U.clearRect(0,0,u,a),z.forEach(function(t){U.fillStyle=t.getColor(),U.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),U.save(),U.fillStyle=P.getColor(),U.translate(P.x+.5*P.getWidth(),P.y+.5*P.getHeight()),U.rotate(s.rad(P.rotation)),U.translate(-(P.x+.5*P.getWidth()),-(P.y+.5*P.getHeight())),U.fillRect(P.x,P.y,P.getWidth(),P.getHeight()),U.restore(),j.forEach(function(t){U.fillStyle=t.getColor(),U.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),k.forEach(function(t){U.fillStyle=t.getColor(),U.fillRect(t.x,t.y,t.getWidth(),t.getHeight())}),Y=JSON.parse(JSON.stringify(T)),C.clearRect(0,0,u,a),C.drawImage(D,0,0),window.requestAnimationFrame(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.x=t,this.y=e}return t.from=function(e,n){return new t(e,n)},t.fromOther=function(e){return new t(e.x,e.y)},t.zero=function(){return new t(0,0)},t.prototype.isZero=function(){return 0==this.x&&0==this.y},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.add=function(e,n){return t.fromOther(e).add(n)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.rotate=function(e,n){return t.fromOther(e).rotate(n)},t.prototype.rotate=function(t){var e=this.x;return this.x=this.x*Math.cos(o(t))-this.y*Math.sin(o(t)),this.y=e*Math.sin(o(t))+this.y*Math.cos(o(t)),this},t.scale=function(e,n){return t.fromOther(e).scale(n)},t.prototype.scale=function(t){return this.x*=t,this.y*=t,this},t.normalize=function(e){return t.fromOther(e).normalize()},t.prototype.normalize=function(){return 0===this.magnitude()?this:this.scale(1/this.magnitude())},t}();function o(t){return t*(Math.PI/180)}e.default=i,e.mod=function(t,e){return(t%e+e)%e},e.rad=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FzdGVyb2lkcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmVjdG9yLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRGVhdGhDYXVzZUVudW0iLCJIaXRUeXBlRW51bSIsInZlY3Rvcl8xIiwiV0lEVEgiLCJIRUlHSFQiLCJBQ0NfVkVDVE9SIiwiZGVmYXVsdCIsImZyb20iLCJCb3VuZGFyeSIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJ0aGlzIiwiaXNJbkJvdW5kcyIsIngiLCJ5Iiwic2hhcGUiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsIlNoYXBlIiwiY29sb3IiLCJtYXNzIiwiUmVjdGFuZ2xlIiwiX3N1cGVyIiwid2lkdGgiLCJoZWlnaHQiLCJfdGhpcyIsIl9fZXh0ZW5kcyIsImJvdW5kYXJ5IiwiR2FtZU9iamVjdFR5cGUiLCJDaXJjbGUiLCJyYWRpdXMiLCJtb3ZlIiwiVW5pdFR5cGUiLCJsaXZlcyIsInNob3RGcmVxIiwic2hvdCIsImJvdW50aWVzIiwiU2hvdFR5cGUiLCJkbWciLCJFbnZpcm9ubWVudFR5cGUiLCJNb3ZlIiwiZWxhcHNlZFRpbWUiLCJyb3RhdGlvbiIsInNwZWVkIiwibW92ZVZlY3RvciIsIkVycm9yIiwiQ29uc3RhbnRNb3ZlIiwidmVjdG9yIiwicm90YXRlIiwic2V0Um90YXRpb24iLCJEeW5hbWljTW92ZSIsImFjY1ZlY3RvciIsImRlY1NwZWVkIiwiZnJvbU90aGVyIiwibm9ybWFsaXplIiwic2NhbGUiLCJhZGQiLCJTaGFwZUVudW0iLCJQTEFZRVIiLCJFTkVNWSIsIlNIT1QiLCJIRUFMVEhfRU5FTVkiLCJCSUdfT05FIiwiRkFTVF9PTkUiLCJDTE9VRCIsIkJvdW5kYXJ5RW51bSIsIk5PTkUiLCJOdW1iZXIiLCJNSU5fVkFMVUUiLCJNQVhfVkFMVUUiLCJNb3ZlVHlwZUVudW0iLCJFTkVNWV9TSU1QTEUiLCJQTEFZRVJfU0hPVCIsIkVORU1ZX1NIT1QiLCJTaG90VHlwZUVudW0iLCJVbml0VHlwZUVudW0iLCJFbnZpcm9ubWVudFR5cGVFbnVtIiwiR2FtZU9iamVjdCIsImlkIiwidHlwZSIsIm9uRGVzdHJveWVkIiwidXBkYXRlIiwibW92ZW1lbnQiLCJPVVRfT0ZfQk9VTkRTIiwiaXNDb2xsaWRpbmdXaXRoIiwib3RoZXIiLCJnZXRDb2xvciIsIlBsYXllciIsIm1vZCIsIk1hdGgiLCJtYXgiLCJjb25zb2xlIiwibG9nIiwibWluIiwiemVybyIsIlVuaXQiLCJvbkhpdCIsIlNob3QiLCJpbml0aWF0b3IiLCJmb3JFYWNoIiwiYm91bnR5IiwiSElUIiwidXBkYXRlU3RhdHVzIiwiTElWRVMiLCJpc0FsaXZlIiwiZmxvb3IiLCJyYW5kb20iLCJzaG9vdCIsInNob3RJZENvdW50ZXIiLCJjYXVzZSIsInNob3RzIiwiZGVsZXRlIiwic2V0IiwiRW52aXJvbm1lbnQiLCJmcm9udENvbnRleHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsImJhY2tDYW52YXMiLCJjcmVhdGVFbGVtZW50IiwiYmFja0NvbnRleHQiLCJzdGFydCIsImN1cnJlbnRJbnB1dCIsInNwYWNlIiwibGVmdCIsInJpZ2h0IiwidXAiLCJkb3duIiwicHJpb3JJbnB1dCIsInBsYXllciIsInJ1bm5pbmciLCJhbGVydCIsInNjb3JlIiwic2NvcmVFbGVtZW50IiwibGl2ZXNFbGVtZW50IiwiZW52aXJvbm1lbnRJZENvdW50ZXIiLCJlbmVtaWVzIiwiTWFwIiwiZW52aXJvbm1lbnRzIiwic2NvcmVEZWx0YSIsImhlYWx0aERlbHRhIiwiaW5uZXJUZXh0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibG9vcCIsInRpbWVzdGFtcCIsImNyZWF0ZUVudmlyb25tZW50IiwiZW5lbXkiLCJjbGVhclJlY3QiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsInNhdmUiLCJ0cmFuc2xhdGUiLCJyYWQiLCJyZXN0b3JlIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiZHJhd0ltYWdlIiwiVmVjdG9yIiwiaXNaZXJvIiwibWFnbml0dWRlIiwic3FydCIsImEiLCJiIiwiYW5nbGUiLCJvbGRYIiwiY29zIiwic2luIiwic2NhbGFyIiwiUEkiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEs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LEVBQUExRyxNQUFkLFNBQW9CUixFQUFnQjRILEdBQ2hDLE9BQU9WLEVBQU81RyxVQUFVTixHQUFRUSxNQUFNb0gsSUFHbkNWLEVBQUF2SyxVQUFBNkQsTUFBUCxTQUFhb0gsR0FHVCxPQUZBaEssS0FBS0UsR0FBSzhKLEVBQ1ZoSyxLQUFLRyxHQUFLNkosRUFDSGhLLE1BR0dzSixFQUFBM0csVUFBZCxTQUF3QlAsR0FDcEIsT0FBT2tILEVBQU81RyxVQUFVTixHQUFRTyxhQUc3QjJHLEVBQUF2SyxVQUFBNEQsVUFBUCxXQUNJLE9BQTRCLElBQXJCM0MsS0FBS3dKLFlBQW9CeEosS0FBT0EsS0FBSzRDLE1BQU0sRUFBSTVDLEtBQUt3SixjQWFuRUYsRUF6RUEsR0ErRUEsU0FBZ0JOLEVBQUlwSyxHQUNoQixPQUFPQSxHQUFLa0csS0FBS21GLEdBQUssaUJBTDFCaE4sRUFBQTRILElBQUEsU0FBb0JqRyxFQUFXckIsR0FDM0IsT0FBU3FCLEVBQUlyQixFQUFLQSxHQUFLQSxHQUczQk4sRUFBQStMIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBWZWN0b3IsIHttb2QsIHJhZH0gZnJvbSBcIi4vdmVjdG9yXCI7XHJcblxyXG5jb25zdCBXSURUSCA9IDgwMDtcclxuY29uc3QgSEVJR0hUID0gNjAwO1xyXG5jb25zdCBST1RBVElPTl9TUEVFRCA9IDAuMjtcclxuY29uc3QgQUNDX1NQRUVEID0gMC41O1xyXG5jb25zdCBBQ0NfVkVDVE9SID0gVmVjdG9yLmZyb20oMCwgLUFDQ19TUEVFRCk7XHJcbmNvbnN0IERFQ0VMRVJBVElPTl9TUEVFRCA9IDAuMDg7XHJcbmNvbnN0IE1BWF9TUEVFRCA9IDIwO1xyXG5cclxuLy9yZWdpb24gR2FtZU9iamVjdCBwYXJ0c1xyXG50eXBlIEJvdW50eUNhbGxiYWNrID0gKGVuZW15OiBVbml0LCBzaG90OiBTaG90LCB0eXBlOiBIaXRUeXBlRW51bSkgPT4gYW55O1xyXG5cclxuZW51bSBEZWF0aENhdXNlRW51bSB7XHJcbiAgICBPVVRfT0ZfQk9VTkRTLFxyXG4gICAgTElWRVNcclxufVxyXG5cclxuZW51bSBIaXRUeXBlRW51bSB7XHJcbiAgICBISVQsXHJcbiAgICBERVNUUk9ZRURcclxufVxyXG5cclxuY2xhc3MgQm91bmRhcnkge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIG1pblg6IG51bWJlciwgcHVibGljIG1pblk6IG51bWJlciwgcHVibGljIG1heFg6IG51bWJlciwgcHVibGljIG1heFk6IG51bWJlcikge1xyXG4gICAgfVxyXG5cclxuICAgIGlzSW5Cb3VuZHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHNoYXBlOiBTaGFwZSkge1xyXG4gICAgICAgIHJldHVybiB4ID49IHRoaXMubWluWCAmJiB5ID49IHRoaXMubWluWSAmJiAoeCArIHNoYXBlLmdldFdpZHRoKCkpIDw9IHRoaXMubWF4WCAmJiAoeSArIHNoYXBlLmdldEhlaWdodCgpKSA8PSB0aGlzLm1heFk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFic3RyYWN0IGNsYXNzIFNoYXBlIHtcclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihwdWJsaWMgY29sb3I6IHN0cmluZywgcHVibGljIG1hc3M6IG51bWJlcikge1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRXaWR0aCgpOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGdldEhlaWdodCgpOiBudW1iZXI7XHJcbn1cclxuXHJcbmNsYXNzIFJlY3RhbmdsZSBleHRlbmRzIFNoYXBlIHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB3aWR0aDogbnVtYmVyLCBwdWJsaWMgaGVpZ2h0OiBudW1iZXIsIGNvbG9yOiBzdHJpbmcsIG1hc3M6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKGNvbG9yLCBtYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0luQm91bmRzKHg6IG51bWJlciwgeTogbnVtYmVyLCBib3VuZGFyeTogQm91bmRhcnkpIHtcclxuICAgICAgICAvL1RPRE9cclxuICAgIH1cclxuXHJcbiAgICBnZXRIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHRcclxuICAgIH1cclxuXHJcbiAgICBnZXRXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENpcmNsZSBleHRlbmRzIFNoYXBlIHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyByYWRpdXM6IG51bWJlciwgY29sb3I6IHN0cmluZywgbWFzczogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoY29sb3IsIG1hc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzSW5Cb3VuZHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIGJvdW5kYXJ5OiBCb3VuZGFyeSkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gMiAqIHRoaXMucmFkaXVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdpZHRoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDIgKiB0aGlzLnJhZGl1cztcclxuICAgIH1cclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgR2FtZU9iamVjdFR5cGUge1xyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHB1YmxpYyBzaGFwZTogU2hhcGUsIHB1YmxpYyBib3VuZGFyeTogQm91bmRhcnksIHB1YmxpYyBtb3ZlOiBNb3ZlKSB7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBVbml0VHlwZSBleHRlbmRzIEdhbWVPYmplY3RUeXBlIHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBsaXZlczogbnVtYmVyLCBwdWJsaWMgc2hvdEZyZXE6IG51bWJlciwgc2hhcGU6IFNoYXBlLCBib3VuZGFyeTogQm91bmRhcnksIG1vdmU6IE1vdmUsIHB1YmxpYyBzaG90OiBTaG90VHlwZSwgcHVibGljIGJvdW50aWVzOiBCb3VudHlDYWxsYmFja1tdKSB7XHJcbiAgICAgICAgc3VwZXIoc2hhcGUsIGJvdW5kYXJ5LCBtb3ZlKVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuY2xhc3MgU2hvdFR5cGUgZXh0ZW5kcyBHYW1lT2JqZWN0VHlwZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgZG1nOiBudW1iZXIsIHNoYXBlOiBTaGFwZSwgYm91bmRhcnk6IEJvdW5kYXJ5LCBtb3ZlOiBNb3ZlKSB7XHJcbiAgICAgICAgc3VwZXIoc2hhcGUsIGJvdW5kYXJ5LCBtb3ZlKVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBFbnZpcm9ubWVudFR5cGUgZXh0ZW5kcyBHYW1lT2JqZWN0VHlwZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzaGFwZTogU2hhcGUsIGJvdW5kYXJ5OiBCb3VuZGFyeSwgbW92ZTogTW92ZSkge1xyXG4gICAgICAgIHN1cGVyKHNoYXBlLCBib3VuZGFyeSwgbW92ZSlcclxuICAgIH1cclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgTW92ZSB7XHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZShlbGFwc2VkVGltZTogbnVtYmVyLCByb3RhdGlvbjogbnVtYmVyID0gMCwgc3BlZWQ6IG51bWJlciA9IDAsIG1vdmVWZWN0b3I6IFZlY3RvciA9IG51bGwpOiBWZWN0b3Ige1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBJbXBsZW1lbnRlZCFcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENvbnN0YW50TW92ZSBleHRlbmRzIE1vdmUge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHZlY3RvcjogVmVjdG9yLCBwcml2YXRlIHJvdGF0aW9uOiBudW1iZXIgPSAwKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBpZiAodGhpcy5yb3RhdGlvbiAhPSAwKSB7XHJcbiAgICAgICAgICAgIHZlY3Rvci5yb3RhdGUodGhpcy5yb3RhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vdmUoZWxhcHNlZFRpbWU6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIHNwZWVkOiBudW1iZXIgPSAwLCBtb3ZlVmVjdG9yOiBWZWN0b3IgPSBudWxsKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmZyb20odGhpcy52ZWN0b3IueCAqIGVsYXBzZWRUaW1lLCB0aGlzLnZlY3Rvci55ICogZWxhcHNlZFRpbWUpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc2V0Um90YXRpb24ocm90YXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcclxuICAgICAgICB0aGlzLnZlY3Rvci5yb3RhdGUocm90YXRpb24pO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBEeW5hbWljTW92ZSBleHRlbmRzIE1vdmUge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhY2NWZWN0b3I6IFZlY3RvciwgcHJpdmF0ZSBkZWNTcGVlZDogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlKGVsYXBzZWRUaW1lOiBudW1iZXIsIHJvdGF0aW9uOiBudW1iZXIsIHNwZWVkOiBudW1iZXIsIG1vdmVWZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgbGV0IHZlY3RvciA9IFZlY3Rvci5mcm9tT3RoZXIobW92ZVZlY3Rvcikubm9ybWFsaXplKCkuc2NhbGUoLXRoaXMuZGVjU3BlZWQpO1xyXG4gICAgICAgIGlmIChzcGVlZCAhPSAwKSB7XHJcbiAgICAgICAgICAgIHZlY3Rvci5hZGQoVmVjdG9yLmZyb21PdGhlcihtb3ZlVmVjdG9yKS5hZGQodmVjdG9yKS5zY2FsZSgtMC41KSk7XHJcbiAgICAgICAgICAgIHZlY3Rvci5hZGQoVmVjdG9yLmZyb21PdGhlcih0aGlzLmFjY1ZlY3Rvcikucm90YXRlKHJvdGF0aW9uKSkubm9ybWFsaXplKCkuc2NhbGUoc3BlZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBTaGFwZUVudW0gPSB7XHJcbiAgICBQTEFZRVI6IG5ldyBSZWN0YW5nbGUoMjAsIDM1LCBcIiM2YTdmZWRcIiwgMCksXHJcbiAgICBFTkVNWTogbmV3IFJlY3RhbmdsZSg0NSwgNTAsIFwiI2ZmMDAwMFwiLCAwKSxcclxuICAgIFNIT1Q6IG5ldyBSZWN0YW5nbGUoNSwgNSwgXCIjZmZmZmZmXCIsIDApLFxyXG4gICAgSEVBTFRIX0VORU1ZOiBuZXcgUmVjdGFuZ2xlKDQ1LCA1MCwgXCIjOTFmZjZmXCIsIDApLFxyXG4gICAgQklHX09ORTogbmV3IFJlY3RhbmdsZSg2MCwgNjAsIFwiI2ZmYmIwMFwiLCAwKSxcclxuICAgIEZBU1RfT05FOiBuZXcgUmVjdGFuZ2xlKDQwLCA0MCwgXCIjZjVhM2ZmXCIsIDApLFxyXG4gICAgQ0xPVUQ6IG5ldyBSZWN0YW5nbGUoMTUwLCAxNTAsIFwiIzBhMWUzYVwiLCAwKVxyXG59O1xyXG5cclxuY29uc3QgQm91bmRhcnlFbnVtID0ge1xyXG4gICAgTk9ORTogbmV3IEJvdW5kYXJ5KE51bWJlci5NSU5fVkFMVUUsIE51bWJlci5NSU5fVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpLFxyXG4gICAgU0hPVDogbmV3IEJvdW5kYXJ5KDAsIDAsIFdJRFRILCBIRUlHSFQpLFxyXG4gICAgQ0xPVUQ6IG5ldyBCb3VuZGFyeSgtU2hhcGVFbnVtLkNMT1VELndpZHRoLCAtU2hhcGVFbnVtLkNMT1VELmhlaWdodCwgV0lEVEggKyBTaGFwZUVudW0uQ0xPVUQud2lkdGgsIEhFSUdIVCArIFNoYXBlRW51bS5DTE9VRC5oZWlnaHQpXHJcbn07XHJcblxyXG5jb25zdCBCb3VudHlFbnVtID0ge1xyXG4gICAgU0NPUkVfU1Q6IChlbmVteTogVW5pdCwgc2hvdDogR2FtZU9iamVjdCwgdHlwZTogSGl0VHlwZUVudW0pID0+IHtcclxuICAgICAgICBpZiAodHlwZSA9PSBIaXRUeXBlRW51bS5ERVNUUk9ZRUQpXHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygxMCk7XHJcbiAgICB9LFxyXG4gICAgSEVBTFRIX1NUOiAoZW5lbXk6IFVuaXQsIHNob3Q6IEdhbWVPYmplY3QsIHR5cGU6IEhpdFR5cGVFbnVtKSA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gSGl0VHlwZUVudW0uREVTVFJPWUVEKVxyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoMCwgMSk7XHJcbiAgICB9LFxyXG4gICAgU0NPUkVfRkFTVDogKGVuZW15OiBVbml0LCBzaG90OiBHYW1lT2JqZWN0LCB0eXBlOiBIaXRUeXBlRW51bSkgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlID09IEhpdFR5cGVFbnVtLkhJVClcclxuICAgICAgICAgICAgdXBkYXRlU3RhdHVzKDIwKTtcclxuICAgICAgICBpZiAodHlwZSA9PSBIaXRUeXBlRW51bS5ERVNUUk9ZRUQpXHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cyg1MCk7XHJcbiAgICB9LFxyXG4gICAgU0NPUkVfMzA6IChlbmVteTogVW5pdCwgc2hvdDogR2FtZU9iamVjdCwgdHlwZTogSGl0VHlwZUVudW0pID0+IHtcclxuICAgICAgICBpZiAodHlwZSA9PSBIaXRUeXBlRW51bS5ERVNUUk9ZRUQpXHJcbiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygzMCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCBNb3ZlVHlwZUVudW0gPSB7XHJcbiAgICBQTEFZRVI6IG5ldyBEeW5hbWljTW92ZShBQ0NfVkVDVE9SLCBERUNFTEVSQVRJT05fU1BFRUQpLFxyXG4gICAgRU5FTVlfU0lNUExFOiBuZXcgQ29uc3RhbnRNb3ZlKFZlY3Rvci5mcm9tKDAsIDAuMSkpLFxyXG4gICAgUExBWUVSX1NIT1Q6IG5ldyBDb25zdGFudE1vdmUoVmVjdG9yLmZyb20oMCwgLTAuNSkpLFxyXG4gICAgRU5FTVlfU0hPVDogbmV3IENvbnN0YW50TW92ZShWZWN0b3IuZnJvbSgwLCAwLjQpKSxcclxuICAgIENMT1VEOiBuZXcgQ29uc3RhbnRNb3ZlKFZlY3Rvci5mcm9tKDAsIDAuMDUpKVxyXG59O1xyXG5cclxuY29uc3QgU2hvdFR5cGVFbnVtID0ge1xyXG4gICAgUExBWUVSOiBuZXcgU2hvdFR5cGUoMSwgU2hhcGVFbnVtLlNIT1QsIEJvdW5kYXJ5RW51bS5TSE9ULCBNb3ZlVHlwZUVudW0uUExBWUVSX1NIT1QpLFxyXG4gICAgRU5FTVk6IG5ldyBTaG90VHlwZSgxLCBTaGFwZUVudW0uU0hPVCwgQm91bmRhcnlFbnVtLlNIT1QsIE1vdmVUeXBlRW51bS5FTkVNWV9TSE9UKVxyXG59O1xyXG5cclxuY29uc3QgVW5pdFR5cGVFbnVtID0ge1xyXG4gICAgUExBWUVSOiBuZXcgVW5pdFR5cGUoMywgMCwgU2hhcGVFbnVtLlBMQVlFUiwgQm91bmRhcnlFbnVtLk5PTkUsIE1vdmVUeXBlRW51bS5QTEFZRVIsIFNob3RUeXBlRW51bS5QTEFZRVIsIFtdKSxcclxufTtcclxuXHJcbmNvbnN0IEVudmlyb25tZW50VHlwZUVudW0gPSB7XHJcbiAgICBDTE9VRDogbmV3IEVudmlyb25tZW50VHlwZShTaGFwZUVudW0uQ0xPVUQsIEJvdW5kYXJ5RW51bS5DTE9VRCwgTW92ZVR5cGVFbnVtLkNMT1VEKVxyXG59O1xyXG5cclxuLy9lbmRyZWdpb25cclxuXHJcbi8vcmVnaW9uIEdhbWVPYmplY3RzXHJcbnR5cGUgSGl0Q2FsbGJhY2sgPSAob3RoZXI6IEdhbWVPYmplY3QpID0+IGFueTtcclxudHlwZSBEZXN0cm95ZWRDYWxsYmFjayA9IChjYXVzZTogRGVhdGhDYXVzZUVudW0pID0+IGFueTtcclxuXHJcbmFic3RyYWN0IGNsYXNzIEdhbWVPYmplY3Qge1xyXG4gICAgcHVibGljIHJvdGF0aW9uOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByb3RlY3RlZCBzcGVlZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IocHVibGljIGlkOiBudW1iZXIsIHB1YmxpYyB0eXBlOiBHYW1lT2JqZWN0VHlwZSwgcHVibGljIHg6IG51bWJlciwgcHVibGljIHk6IG51bWJlciwgcHVibGljIG9uRGVzdHJveWVkOiBEZXN0cm95ZWRDYWxsYmFjaykge1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShlbGFwc2VkVGltZTogbnVtYmVyLCByb3RhdGlvbjogbnVtYmVyID0gMCwgbW92ZW1lbnQ6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIGxldCBtb3ZlID0gdGhpcy50eXBlLm1vdmUubW92ZShlbGFwc2VkVGltZSk7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZS5ib3VuZGFyeS5pc0luQm91bmRzKHRoaXMueCArIG1vdmUueCwgdGhpcy55ICsgbW92ZS55LCB0aGlzLnR5cGUuc2hhcGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCArPSBtb3ZlLng7XHJcbiAgICAgICAgICAgIHRoaXMueSArPSBtb3ZlLnk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgIT0gVW5pdFR5cGVFbnVtLlBMQVlFUikge1xyXG4gICAgICAgICAgICB0aGlzLm9uRGVzdHJveWVkKERlYXRoQ2F1c2VFbnVtLk9VVF9PRl9CT1VORFMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0NvbGxpZGluZ1dpdGgob3RoZXI6IEdhbWVPYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICAvL1RPRE9cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy9yZWdpb24gSGVscGVyIE1ldGhvZHNcclxuICAgIHB1YmxpYyBnZXRXaWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUuc2hhcGUuZ2V0V2lkdGgoKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50eXBlLnNoYXBlLmdldEhlaWdodCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb2xvcigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUuc2hhcGUuY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgLy9lbmRyZWdpb25cclxufVxyXG5cclxuY2xhc3MgVW5pdCBleHRlbmRzIEdhbWVPYmplY3Qge1xyXG4gICAgcHVibGljIG1vdmVWZWN0b3I6IFZlY3RvciA9IFZlY3Rvci56ZXJvKCk7XHJcblxyXG4gICAgcHVibGljIG9uSGl0OiBIaXRDYWxsYmFjayA9IG90aGVyID0+IHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBTaG90KSB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlci5pbml0aWF0b3IgPT0gdGhpcy50eXBlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUuYm91bnRpZXMuZm9yRWFjaChib3VudHkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYm91bnR5KHRoaXMsIG90aGVyLCBIaXRUeXBlRW51bS5ISVQpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmxpdmVzIC09IG90aGVyLnR5cGUuZG1nO1xyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5saXZlcy0tO1xyXG4gICAgICAgICAgICB1cGRhdGVTdGF0dXMoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxpdmVzIDwgMSlcclxuICAgICAgICAgICAgdGhpcy5vbkRlc3Ryb3llZChEZWF0aENhdXNlRW51bS5MSVZFUyk7XHJcbiAgICB9O1xyXG4gICAgcHVibGljIGxpdmVzOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgcHVibGljIHR5cGU6IFVuaXRUeXBlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgb25EZXN0cm95ZWQ6IERlc3Ryb3llZENhbGxiYWNrKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHR5cGUsIHgsIHksIG9uRGVzdHJveWVkKTtcclxuICAgICAgICB0aGlzLmxpdmVzID0gdHlwZS5saXZlcztcclxuICAgIH1cclxuXHJcbiAgICBpc0FsaXZlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpdmVzID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBpc0luQm91bmRzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUuYm91bmRhcnkuaXNJbkJvdW5kcyh0aGlzLngsIHRoaXMueSwgdGhpcy50eXBlLnNoYXBlKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoZWxhcHNlZFRpbWU6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIG1vdmVtZW50OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci51cGRhdGUoZWxhcHNlZFRpbWUsIHJvdGF0aW9uLCBtb3ZlbWVudCk7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gVW5pdFR5cGVFbnVtLlBMQVlFUikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy50eXBlLnNob3RGcmVxKSkge1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob290KClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvb3QoKTogU2hvdCB7XHJcbiAgICAgICAgbGV0IGlkID0gc2hvdElkQ291bnRlcjtcclxuICAgICAgICBsZXQgc2hvdCA9IG5ldyBTaG90KGlkLCB0aGlzLnR5cGUsIHRoaXMudHlwZS5zaG90LCB0aGlzLnggKyB0aGlzLmdldFdpZHRoKCkgLyAyLCB0aGlzLnksIHRoaXMucm90YXRpb24sIChjYXVzZTogRGVhdGhDYXVzZUVudW0pID0+IHtcclxuICAgICAgICAgICAgc2hvdHMuZGVsZXRlKGlkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzaG90cy5zZXQoaWQsIHNob3QpO1xyXG4gICAgICAgIHNob3RJZENvdW50ZXIrKztcclxuICAgICAgICByZXR1cm4gc2hvdDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUGxheWVyIGV4dGVuZHMgVW5pdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwdWJsaWMgdHlwZTogVW5pdFR5cGUsIHg6IG51bWJlciwgeTogbnVtYmVyLCBvbkRlc3Ryb3llZDogRGVzdHJveWVkQ2FsbGJhY2spIHtcclxuICAgICAgICBzdXBlcihpZCwgdHlwZSwgeCwgeSwgb25EZXN0cm95ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShlbGFwc2VkVGltZTogbnVtYmVyLCByb3RhdGlvbjogbnVtYmVyID0gMCwgbW92ZW1lbnQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSBtb2QodGhpcy5yb3RhdGlvbiArIHJvdGF0aW9uICogUk9UQVRJT05fU1BFRUQgKiBlbGFwc2VkVGltZSwgMzYwKTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gTWF0aC5tYXgoMCwgdGhpcy5zcGVlZCAtIERFQ0VMRVJBVElPTl9TUEVFRCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTcGVlZDogXCIsIHRoaXMuc3BlZWQpO1xyXG5cclxuICAgICAgICBpZiAobW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGVlZCA9IE1hdGgubWluKE1BWF9TUEVFRCwgdGhpcy5zcGVlZCArIEFDQ19TUEVFRCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMubW92ZVZlY3Rvci5hZGQoVmVjdG9yLmZyb21PdGhlcih0aGlzLm1vdmVWZWN0b3IpLnNjYWxlKC0wLjUpKTtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlVmVjdG9yLmFkZChWZWN0b3IuZnJvbU90aGVyKEFDQ19WRUNUT1IpLnJvdGF0ZSh0aGlzLnJvdGF0aW9uKSkubm9ybWFsaXplKCkuc2NhbGUodGhpcy5zcGVlZCAqIGVsYXBzZWRUaW1lIC8gMTAwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3BlZWQgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlVmVjdG9yID0gVmVjdG9yLnplcm8oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVWZWN0b3IuYWRkKFZlY3Rvci5mcm9tT3RoZXIodGhpcy5tb3ZlVmVjdG9yKS5ub3JtYWxpemUoKS5zY2FsZSgtREVDRUxFUkFUSU9OX1NQRUVEICogZWxhcHNlZFRpbWUgLyAxMDApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5tb3ZlVmVjdG9yLmFkZCh0aGlzLnR5cGUubW92ZS5tb3ZlKGVsYXBzZWRUaW1lLCB0aGlzLnJvdGF0aW9uLCBtb3ZlbWVudCA/IHRoaXMuc3BlZWQgOiAwLCB0aGlzLm1vdmVWZWN0b3IpKTtcclxuXHJcbiAgICAgICAgdGhpcy54ID0gbW9kKHRoaXMueCArIHRoaXMubW92ZVZlY3Rvci54LCBXSURUSCk7XHJcbiAgICAgICAgdGhpcy55ID0gbW9kKHRoaXMueSArIHRoaXMubW92ZVZlY3Rvci55LCBIRUlHSFQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTaG90IGV4dGVuZHMgR2FtZU9iamVjdCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwdWJsaWMgaW5pdGlhdG9yOiBVbml0VHlwZSwgcHVibGljIHR5cGU6IFNob3RUeXBlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgcm90YXRpb246IG51bWJlciA9IDAsIG9uRGVzdHJveWVkOiBEZXN0cm95ZWRDYWxsYmFjaykge1xyXG4gICAgICAgIHN1cGVyKGlkLCB0eXBlLCB4LCB5LCBvbkRlc3Ryb3llZCk7XHJcbiAgICAgICAgdGhpcy50eXBlLm1vdmUgPSBuZXcgQ29uc3RhbnRNb3ZlKFZlY3Rvci5mcm9tT3RoZXIoKHRoaXMudHlwZS5tb3ZlIGFzIENvbnN0YW50TW92ZSkudmVjdG9yKSwgcm90YXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ29sbGlkaW5nV2l0aChvdGhlcjogR2FtZU9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5pc0NvbGxpZGluZ1dpdGgob3RoZXIpICYmIHRoaXMuaW5pdGlhdG9yICE9PSBvdGhlci50eXBlO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBFbnZpcm9ubWVudCBleHRlbmRzIEdhbWVPYmplY3Qge1xyXG4gICAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgdHlwZTogRW52aXJvbm1lbnRUeXBlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgb25EZXN0cm95ZWQ6IERlc3Ryb3llZENhbGxiYWNrKSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHR5cGUsIHgsIHksIG9uRGVzdHJveWVkKTtcclxuICAgIH1cclxufVxyXG5cclxuLy9lbmRyZWdpb25cclxuXHJcbnZhciBmcm9udENhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XHJcbnZhciBmcm9udENvbnRleHQgPSBmcm9udENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG52YXIgYmFja0NhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuYmFja0NhbnZhcy53aWR0aCA9IFdJRFRIO1xyXG5iYWNrQ2FudmFzLmhlaWdodCA9IEhFSUdIVDtcclxudmFyIGJhY2tDb250ZXh0ID0gYmFja0NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG52YXIgc3RhcnQgPSBudWxsO1xyXG52YXIgY3VycmVudElucHV0ID0ge1xyXG4gICAgc3BhY2U6IGZhbHNlLFxyXG4gICAgbGVmdDogZmFsc2UsXHJcbiAgICByaWdodDogZmFsc2UsXHJcbiAgICB1cDogZmFsc2UsXHJcbiAgICBkb3duOiBmYWxzZVxyXG59O1xyXG52YXIgcHJpb3JJbnB1dCA9IHtcclxuICAgIHNwYWNlOiBmYWxzZSxcclxuICAgIGxlZnQ6IGZhbHNlLFxyXG4gICAgcmlnaHQ6IGZhbHNlLFxyXG4gICAgdXA6IGZhbHNlLFxyXG4gICAgZG93bjogZmFsc2VcclxufTtcclxuXHJcbnZhciBwbGF5ZXIgPSBuZXcgUGxheWVyKDAsIFVuaXRUeXBlRW51bS5QTEFZRVIsIDAsIDAsICgpID0+IHtcclxuICAgIGVuZEdhbWUoKTtcclxufSk7XHJcbnBsYXllci54ID0gV0lEVEggLyAyIC0gcGxheWVyLmdldFdpZHRoKCkgLyAyO1xyXG5wbGF5ZXIueSA9IEhFSUdIVCAtIHBsYXllci5nZXRIZWlnaHQoKTtcclxudmFyIHNjb3JlID0gMDtcclxudmFyIHNjb3JlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmVfdGV4dFwiKTtcclxudmFyIGxpdmVzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGl2ZXNfdGV4dFwiKTtcclxuXHJcbnZhciBlbmVteVRpbWVUb1NwYXduID0gMDtcclxudmFyIGVuZW15SWRDb3VudGVyID0gMDtcclxudmFyIHNob3RJZENvdW50ZXIgPSAwO1xyXG52YXIgZW52aXJvbm1lbnRJZENvdW50ZXIgPSAwO1xyXG4vLyBAdHMtaWdub3JlXHJcbnZhciBlbmVtaWVzID0gbmV3IE1hcDxudW1iZXIsIFVuaXQ+KCk7XHJcbi8vIEB0cy1pZ25vcmVcclxudmFyIHNob3RzID0gbmV3IE1hcDxudW1iZXIsIFNob3Q+KCk7XHJcbi8vIEB0cy1pZ25vcmVcclxudmFyIGVudmlyb25tZW50cyA9IG5ldyBNYXA8bnVtYmVyLCBFbnZpcm9ubWVudD4oKTtcclxudmFyIHJ1bm5pbmc6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXApIHtcclxuICAgIGlmICghcnVubmluZylcclxuICAgICAgICByZXR1cm47XHJcbiAgICBpZiAoIXN0YXJ0KSBzdGFydCA9IHRpbWVzdGFtcDtcclxuICAgIGxldCBlbGFwc2VkVGltZSA9IHRpbWVzdGFtcCAtIHN0YXJ0O1xyXG4gICAgc3RhcnQgPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgY3JlYXRlRW5lbXkoZWxhcHNlZFRpbWUpO1xyXG4gICAgY3JlYXRlRW52aXJvbm1lbnQoKTtcclxuICAgIHVwZGF0ZShlbGFwc2VkVGltZSk7XHJcbiAgICByZW5kZXIoZWxhcHNlZFRpbWUpO1xyXG4gICAgcG9sbElucHV0KCk7XHJcblxyXG4gICAgZnJvbnRDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBXSURUSCwgSEVJR0hUKTtcclxuICAgIGZyb250Q29udGV4dC5kcmF3SW1hZ2UoYmFja0NhbnZhcywgMCwgMCk7XHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBvbGxJbnB1dCgpIHtcclxuICAgIHByaW9ySW5wdXQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRJbnB1dCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVLZXlkb3duKGV2ZW50KSB7XHJcbiAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xyXG4gICAgICAgIGNhc2UgJyAnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQuc3BhY2UgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBcnJvd1VwJzpcclxuICAgICAgICBjYXNlICd3JzpcclxuICAgICAgICAgICAgY3VycmVudElucHV0LnVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcclxuICAgICAgICBjYXNlICdhJzpcclxuICAgICAgICAgICAgY3VycmVudElucHV0LmxlZnQgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcclxuICAgICAgICBjYXNlICdkJzpcclxuICAgICAgICAgICAgY3VycmVudElucHV0LnJpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5ZG93bik7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVLZXl1cChldmVudCkge1xyXG4gICAgc3dpdGNoIChldmVudC5rZXkpIHtcclxuICAgICAgICBjYXNlICcgJzpcclxuICAgICAgICAgICAgY3VycmVudElucHV0LnNwYWNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxyXG4gICAgICAgIGNhc2UgJ3cnOlxyXG4gICAgICAgICAgICBjdXJyZW50SW5wdXQudXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcclxuICAgICAgICBjYXNlICdhJzpcclxuICAgICAgICAgICAgY3VycmVudElucHV0LmxlZnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XHJcbiAgICAgICAgY2FzZSAnZCc6XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnB1dC5yaWdodCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5dXApO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlRW5lbXkoZWxhcHNlZFRpbWU6IG51bWJlcikge1xyXG4gICAgLy8gZW5lbXlUaW1lVG9TcGF3biArPSBlbGFwc2VkVGltZTtcclxuICAgIC8vIGlmIChlbmVteVRpbWVUb1NwYXduID4gRU5FTVlfU1BBV05fUkFURSkge1xyXG4gICAgLy8gICAgIGVuZW15VGltZVRvU3Bhd24gPSAwO1xyXG4gICAgLy8gICAgIGlmIChNYXRoLnJhbmRvbSgpICogRU5FTVlfU1BBV05fUFJPQkFCSUxJVFkgPCAxKSB7XHJcbiAgICAvLyAgICAgICAgIGxldCBpZCA9IGVuZW15SWRDb3VudGVyO1xyXG4gICAgLy8gICAgICAgICBsZXQgdHlwZSA9IFVuaXRUeXBlRW51bS5FTkVNWTtcclxuICAgIC8vICAgICAgICAgc3dpdGNoIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMCkpIHtcclxuICAgIC8vICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgIC8vICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgIC8vICAgICAgICAgICAgICAgICB0eXBlID0gVW5pdFR5cGVFbnVtLkhFQUxUSF9FTkVNWTtcclxuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIC8vICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgIC8vICAgICAgICAgICAgICAgICB0eXBlID0gVW5pdFR5cGVFbnVtLkJJR19PTkU7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgdHlwZSA9IFVuaXRUeXBlRW51bS5GQVNUX09ORTtcclxuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICBlbmVtaWVzLnNldChpZCwgbmV3IFVuaXQoaWQsIHR5cGUsIE1hdGgucmFuZG9tKCkgKiAoV0lEVEggLSBTaGFwZUVudW0uRU5FTVkud2lkdGgpLCAtU2hhcGVFbnVtLkVORU1ZLmhlaWdodCwgZnVuY3Rpb24gKGNhdXNlOiBEZWF0aENhdXNlRW51bSkge1xyXG4gICAgLy8gICAgICAgICAgICAgaWYgKGNhdXNlID09IERlYXRoQ2F1c2VFbnVtLk9VVF9PRl9CT1VORFMpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBwbGF5ZXIub25IaXQodGhpcyk7XHJcbiAgICAvLyAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhdXNlID09IERlYXRoQ2F1c2VFbnVtLkxJVkVTKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy50eXBlLmJvdW50aWVzLmZvckVhY2goYm91bnR5ID0+IGJvdW50eSh0aGlzLCBudWxsLCBIaXRUeXBlRW51bS5ERVNUUk9ZRUQpKTtcclxuICAgIC8vICAgICAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgICAgIGVuZW1pZXMuZGVsZXRlKGlkKTtcclxuICAgIC8vICAgICAgICAgfSkpO1xyXG4gICAgLy8gICAgICAgICBlbmVteUlkQ291bnRlcisrO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRW52aXJvbm1lbnQoKSB7XHJcbiAgICBzd2l0Y2ggKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkpIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgIGxldCBpZCA9IGVudmlyb25tZW50SWRDb3VudGVyO1xyXG4gICAgICAgICAgICBlbnZpcm9ubWVudHMuc2V0KGlkLCBuZXcgRW52aXJvbm1lbnQoaWQsIEVudmlyb25tZW50VHlwZUVudW0uQ0xPVUQsIE1hdGgucmFuZG9tKCkgKiBXSURUSCwgLUVudmlyb25tZW50VHlwZUVudW0uQ0xPVUQuc2hhcGUuZ2V0SGVpZ2h0KCksIGZ1bmN0aW9uIChjYXVzZTogRGVhdGhDYXVzZUVudW0pIHtcclxuICAgICAgICAgICAgICAgIGVudmlyb25tZW50cy5kZWxldGUodGhpcy5pZCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgZW52aXJvbm1lbnRJZENvdW50ZXIrKztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlKGVsYXBzZWRUaW1lOiBudW1iZXIpIHtcclxuICAgIGlmIChjdXJyZW50SW5wdXQuc3BhY2UgJiYgIXByaW9ySW5wdXQuc3BhY2UpIHtcclxuICAgICAgICBwbGF5ZXIuc2hvb3QoKTtcclxuICAgIH1cclxuICAgIHBsYXllci51cGRhdGUoZWxhcHNlZFRpbWUsIGN1cnJlbnRJbnB1dC5sZWZ0ID8gLTEgOiAoY3VycmVudElucHV0LnJpZ2h0ID8gMSA6IDApLCBjdXJyZW50SW5wdXQudXApO1xyXG5cclxuICAgIGVuZW1pZXMuZm9yRWFjaCh2YWx1ZSA9PiB2YWx1ZS51cGRhdGUoZWxhcHNlZFRpbWUpKTtcclxuICAgIHNob3RzLmZvckVhY2godmFsdWUgPT4gdmFsdWUudXBkYXRlKGVsYXBzZWRUaW1lKSk7XHJcblxyXG4gICAgc2hvdHMuZm9yRWFjaChzaG90ID0+IHtcclxuICAgICAgICBpZiAoc2hvdC5pc0NvbGxpZGluZ1dpdGgocGxheWVyKSkge1xyXG4gICAgICAgICAgICBwbGF5ZXIub25IaXQoc2hvdCk7XHJcbiAgICAgICAgICAgIHNob3Qub25EZXN0cm95ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZW5lbWllcy5mb3JFYWNoKGVuZW15ID0+IHtcclxuICAgICAgICAgICAgaWYgKHNob3QuaXNDb2xsaWRpbmdXaXRoKGVuZW15KSkge1xyXG4gICAgICAgICAgICAgICAgZW5lbXkub25IaXQoc2hvdCk7XHJcbiAgICAgICAgICAgICAgICBzaG90Lm9uRGVzdHJveWVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbiAgICBlbnZpcm9ubWVudHMuZm9yRWFjaCh2YWx1ZSA9PiB2YWx1ZS51cGRhdGUoZWxhcHNlZFRpbWUpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKGVsYXBzZWRUaW1lOiBudW1iZXIpIHtcclxuICAgIGJhY2tDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBXSURUSCwgSEVJR0hUKTtcclxuXHJcbiAgICBlbnZpcm9ubWVudHMuZm9yRWFjaCh2YWx1ZSA9PiB7XHJcbiAgICAgICAgYmFja0NvbnRleHQuZmlsbFN0eWxlID0gdmFsdWUuZ2V0Q29sb3IoKTtcclxuICAgICAgICBiYWNrQ29udGV4dC5maWxsUmVjdCh2YWx1ZS54LCB2YWx1ZS55LCB2YWx1ZS5nZXRXaWR0aCgpLCB2YWx1ZS5nZXRIZWlnaHQoKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBiYWNrQ29udGV4dC5zYXZlKCk7XHJcbiAgICBiYWNrQ29udGV4dC5maWxsU3R5bGUgPSBwbGF5ZXIuZ2V0Q29sb3IoKTtcclxuICAgIGJhY2tDb250ZXh0LnRyYW5zbGF0ZShwbGF5ZXIueCArIDAuNSAqIHBsYXllci5nZXRXaWR0aCgpLCBwbGF5ZXIueSArIDAuNSAqIHBsYXllci5nZXRIZWlnaHQoKSk7XHJcbiAgICBiYWNrQ29udGV4dC5yb3RhdGUocmFkKHBsYXllci5yb3RhdGlvbikpO1xyXG4gICAgYmFja0NvbnRleHQudHJhbnNsYXRlKC0ocGxheWVyLnggKyAwLjUgKiBwbGF5ZXIuZ2V0V2lkdGgoKSksIC0ocGxheWVyLnkgKyAwLjUgKiBwbGF5ZXIuZ2V0SGVpZ2h0KCkpKTtcclxuICAgIGJhY2tDb250ZXh0LmZpbGxSZWN0KHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLmdldFdpZHRoKCksIHBsYXllci5nZXRIZWlnaHQoKSk7XHJcbiAgICBiYWNrQ29udGV4dC5yZXN0b3JlKCk7XHJcblxyXG4gICAgZW5lbWllcy5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICBiYWNrQ29udGV4dC5maWxsU3R5bGUgPSB2YWx1ZS5nZXRDb2xvcigpO1xyXG4gICAgICAgIGJhY2tDb250ZXh0LmZpbGxSZWN0KHZhbHVlLngsIHZhbHVlLnksIHZhbHVlLmdldFdpZHRoKCksIHZhbHVlLmdldEhlaWdodCgpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNob3RzLmZvckVhY2godmFsdWUgPT4ge1xyXG4gICAgICAgIGJhY2tDb250ZXh0LmZpbGxTdHlsZSA9IHZhbHVlLmdldENvbG9yKCk7XHJcbiAgICAgICAgYmFja0NvbnRleHQuZmlsbFJlY3QodmFsdWUueCwgdmFsdWUueSwgdmFsdWUuZ2V0V2lkdGgoKSwgdmFsdWUuZ2V0SGVpZ2h0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVN0YXR1cyhzY29yZURlbHRhOiBudW1iZXIsIGhlYWx0aERlbHRhOiBudW1iZXIgPSAwKSB7XHJcbiAgICBzY29yZSArPSBzY29yZURlbHRhO1xyXG4gICAgcGxheWVyLmxpdmVzICs9IGhlYWx0aERlbHRhO1xyXG4gICAgc2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IFwiXCIgKyBzY29yZTtcclxuICAgIGxpdmVzRWxlbWVudC5pbm5lclRleHQgPSBcIlwiICsgcGxheWVyLmxpdmVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmRHYW1lKCkge1xyXG4gICAgcnVubmluZyA9IGZhbHNlO1xyXG4gICAgYWxlcnQoXCJHYW1lIG92ZXIhXCIpO1xyXG59XHJcblxyXG53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xyXG5cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlY3RvciB7XHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHB1YmxpYyB4OiBudW1iZXIsIHB1YmxpYyB5OiBudW1iZXIsIC8qcHJpdmF0ZSBtb2RYOiBudW1iZXIsIHByaXZhdGUgbW9kWTogbnVtYmVyKi8pIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZyb20oeDogbnVtYmVyLCB5OiBudW1iZXIvKiwgbW9kWDogbnVtYmVyLCBtb2RZOiBudW1iZXIqLyk6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoeCwgeS8qLCBtb2RYLCBtb2RZKi8pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZnJvbU90aGVyKG90aGVyOiBWZWN0b3IpOiBWZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKG90aGVyLngsIG90aGVyLnkvKiwgb3RoZXIubW9kWCwgb3RoZXIubW9kWSovKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHplcm8oLyptb2RYOiBudW1iZXIsIG1vZFk6IG51bWJlciovKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcigwLCAwLyosIG1vZFgsIG1vZFkqLyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzWmVybygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ID09IDAgJiYgdGhpcy55ID09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1hZ25pdHVkZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZChhOiBWZWN0b3IsIGI6IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5mcm9tT3RoZXIoYSkuYWRkKGIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGQob3RoZXI6IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgdGhpcy54ICs9IG90aGVyLng7XHJcbiAgICAgICAgdGhpcy55ICs9IG90aGVyLnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyByb3RhdGUodmVjdG9yOiBWZWN0b3IsIGFuZ2xlOiBudW1iZXIpOiBWZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBWZWN0b3IuZnJvbU90aGVyKHZlY3Rvcikucm90YXRlKGFuZ2xlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcm90YXRlKGFuZ2xlOiBudW1iZXIpOiBWZWN0b3Ige1xyXG4gICAgICAgIGxldCBvbGRYID0gdGhpcy54O1xyXG4gICAgICAgIHRoaXMueCA9IHRoaXMueCAqIE1hdGguY29zKHJhZChhbmdsZSkpIC0gdGhpcy55ICogTWF0aC5zaW4ocmFkKGFuZ2xlKSk7XHJcbiAgICAgICAgdGhpcy55ID0gb2xkWCAqIE1hdGguc2luKHJhZChhbmdsZSkpICsgdGhpcy55ICogTWF0aC5jb3MocmFkKGFuZ2xlKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzY2FsZSh2ZWN0b3I6IFZlY3Rvciwgc2NhbGFyOiBudW1iZXIpOiBWZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBWZWN0b3IuZnJvbU90aGVyKHZlY3Rvcikuc2NhbGUoc2NhbGFyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2NhbGUoc2NhbGFyOiBudW1iZXIpOiBWZWN0b3Ige1xyXG4gICAgICAgIHRoaXMueCAqPSBzY2FsYXI7XHJcbiAgICAgICAgdGhpcy55ICo9IHNjYWxhcjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIG5vcm1hbGl6ZSh2ZWN0b3I6IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5mcm9tT3RoZXIodmVjdG9yKS5ub3JtYWxpemUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbm9ybWFsaXplKCk6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFnbml0dWRlKCkgPT09IDAgPyB0aGlzIDogdGhpcy5zY2FsZSgxIC8gdGhpcy5tYWduaXR1ZGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHVibGljIHN0YXRpYyBtb2QodmVjdG9yOiBWZWN0b3IpOiBWZWN0b3Ige1xyXG4gICAgLy8gICAgIHJldHVybiBWZWN0b3IuZnJvbU90aGVyKHZlY3RvcikubW9kKCk7XHJcbiAgICAvLyB9XHJcbiAgICAvL1xyXG4gICAgLy8gcHVibGljIG1vZCgpOiBWZWN0b3Ige1xyXG4gICAgLy8gICAgIHRoaXMueCA9IG1vZCh0aGlzLngsIHRoaXMubW9kWCk7XHJcbiAgICAvLyAgICAgdGhpcy55ID0gbW9kKHRoaXMueSwgdGhpcy5tb2RZKTtcclxuICAgIC8vICAgICByZXR1cm4gdGhpcztcclxuICAgIC8vIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtb2QobjogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuICgobiAlIG0pICsgbSkgJSBtO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmFkKG46IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gbiAqIChNYXRoLlBJIC8gMTgwKTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0=